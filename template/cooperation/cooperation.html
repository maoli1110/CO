<style>
	.content-container {
	     height:calc(100vh - 150px);
	 }
	.content-scroll-container {
	    overflow:auto;
	}
</style>
<header ng-include="'template/core/header.html'"></header>
<div class="main-container rela" style="height:100%">
	<div class="sidebar absol" ng-include="'template/core/sidebar.html'"></div>
	<div class="right-content rela">
		<!-- <breadcrumbs display-name="data.displayName" front-msg="当前页面"></breadcrumbs> -->
		<div class="container-fluid rela">
			<div class="operation clearfix">
				<div class="left">
					<button style="margin-top:0px;padding:5px 12px;height:34px;" type="button" class="btn btn-default cop-filter" ng-click="openfilter()"><span ><img
							src="imgs/icon/funnel.png" alt=""></span>筛选</button>
					<select class="selectpicker cop-list" ng-change="changeAttr()" ng-model="coopattr">
						<option value="0">全部</option>
					  	<option value="1">我负责的</option>
					  	<option value="2">我签署的</option>
					  	<option value="3">与我相关</option>
					  	<option value="4">已结束</option>
					</select>
					<div class="rela search inline">
						<input type="text" class="form-control" id="exampleInputName2" style="height:34px;" placeholder="请输入关键字" ng-model="searchkey">
						<img src="imgs/seache.png" alt="" ng-click="inputSearch()">
					</div>
					<!-- <button type="button" class="btn btn-default" ng-click="inputSearch()">搜索</button> -->
				</div>
				<div class="right ">
                    <button type="button" id="comboBox_count" ng-click="comboxCount()" class="btn  btn_count" style="margin-right:12px;">统计</button>
                    <button type="button" class="btn btn_new new_cooper" ng-click="openNew()">新建协作</button>
                </div>
			</div>
		</div>
		<!--筛选框-->
		<div class="comboBox clearfix rela" copy-radio>
			<div class="row absol filter clearfix" ng-show="isCollapsed">
				<div class="filter-table clearfix">
					<form class="form-inline">
						<div class="tabs">
							<div class="checkbox">
								<label class="filter_title rela">
									<input id="allTypeId" type="checkbox" class="comboBox_checkType" ng-click="allType()" ng-model="typeCheck">协作类型
									<div class="absol check-funnel" style="margin-top: 4px;"></div>
								</label>
							</div>
							<div class="type-check rela inline check-sub " ng-repeat="item in coQueryType track by $index" profit>
								 <label class="rela bg{{$index}}">
									 <input type="checkbox" class="absol"  ng-click="updateSelection($event, item, 1, $index)" style="opacity:0">
								</label>
							</div>
						</div>
						<!--most(优先级)-->
						<div class="tabs">
							<div class="checkbox">
								<label class="filter_title">
									<input id="allPriorityId" type="checkbox" class="comboBox_checkType" ng-click="allPriority()" ng-model="priorityCheck">优先级
									<div class="absol check-funnel"></div>
								</label>
							</div>
							<div class="priority-check rela inline check-sub1" ng-repeat="item in coPriority track by $index" profit>
								<label class="rela" style="background: none;margin-right:20px;">
									<span>{{item.name}}</span>
									<input type="checkbox" class="absol" ng-click="updateSelection($event, item, 2, $index)">
									<div class="absol check-funnel">{{item.name}}</div>
								</label>
							</div>
						</div>
						<!--marking标识-->
						<div class="marking">
							<div class="tabs " style="margin-bottom:0;">
								<div class="checkbox" style="float:left;margin-top:19px;">
									<label class="filter_title">
										<input id="allMarkId" type="checkbox"class="comboBox_checkType" ng-click="allMark()" ng-model="markCheck">标识
										<div class="absol check-funnel"></div>
									</label>
								</div>
								<div class="marklist" style="margin-top:-7px;">
									<div class="mark-check rela inline check-sub1" ng-repeat="item in coMark track by $index" profit>
										<label class="rela" title="{{item.name}}">
											<span class="width50">{{item.name}}</span>
											<input type="checkbox" class="absol" ng-click="updateSelection($event, item, 3, $index)">
											<div class="absol width50" >{{item.name}}</div>
										</label>
									</div>
								</div>
								
							</div>
						</div>
					</form>
				</div>
			<div class="filter-button"><div class="btn btn-default btn-success btn-green" ng-click="filterOk()" style="margin-right:20px;">确定</div><div ng-click="filterCancel()" class="btn btn-default btn-cancel">取消</div></div>
		</div>
		</div>
		<div class="overlay" style="display:none;top:59px;" ng-click="clicklay()"></div>
		<!---->
		<div class="addcoo absol overflow" ng-show="openSignal">
			<!-- <div class="row"><span class="glyphicon glyphicon-remove align-right block close" ng-click="closeNew()"></span></div> -->
			<div class="row">
				<div class="col-md-6" ng-repeat="items in typeList"><a ng-click="trans(items.typeId)" style="background:url('./imgs/dyfilter/co-type_{{items.typeImg}}.png') no-repeat"></a></div>
			</div>
		</div>
		<div class=" table-list basic-project content-container content-scroll-container" infinite-scroll-parent="true" >
			<table class="table" class="info_list" id ="table1scroll"  infinite-scroll-container='".content-scroll-container"'  infinite-scroll="addMoreData()" infinite-scroll-distance="0" infinite-scroll-disabled="scrollend" >
				<thead>
					<tr style="background:#d2d7de;height:47px;">
						<th>协做类型</th>
						<th>主题</th>
						<th>优先级</th>
						<th>最后更新时间</th>
						<th>更新人</th>
						<th>详情</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="item in cooperationList" style="font-size:12px;border-bottom:1px solid #ddd;" profit ng-class="{'bold':!item.isRead}">
						<!--<td></td>-->
						<td ui-sref="coopdetail({coid: item.coid})" width="15%" style="border:none;position:relative;" >
							<span class="cop-edit"></span>
							<div style="background:{{item.type.color}}">{{item.type.name}}</div>
						</td>
						<td ui-sref="coopdetail({coid: item.coid})" style="border:none;text-align:left;">{{item.name}}</td>
						<td ui-sref="coopdetail({coid: item.coid})" style="border:none;">{{item.priority}}</td>
						<td ui-sref="coopdetail({coid: item.coid})" style="border:none;">{{item.updateTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
						<td class="edit-click">{{item.updater}}</td>
						<td ng-click="openDetail(item)">
							<!--<img src="imgs/icon/detail.png" alt="">-->
							<span class="cop-add"></span>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!--草稿箱-->
 		<div class="table-list draft-box" style="max-height:calc(100vh - 117px); overflow:auto;" id="content-b7" >
 			<table class="table" class="info_list">
 				<thead>
 				<tr style="background:#d2d7de;height:47px;">
 					<th>协做类型</th>
 					<th>主题</th>
 					<th>优先级</th>
 					<th>最后更新时间</th>
 					<th>删除</th>
 					<th>详情</th>
 				</tr>
 				</thead>
 				<tbody infinite-scroll="addMoreData()" infinite-scroll-distance="3" infinite-scroll-disabled="false">
 				<tr ng-repeat="item in cooperationList" style="font-size:12px;border-bottom:1px solid #ddd;" profit ng-class="{'bold':!item.isRead}">
 					<td ui-sref="coopdetail({coid: item.coid})" width="15%" style="border:none;position:relative;" >
 						<span class="cop-edit"></span>
 						<div style="background:{{item.type.color}}">{{item.type.name}}</div>
 					</td>
 					<td ui-sref="coopdetail({coid: item.coid})" style="border:none;text-align:left;">{{item.name}}</td>
 					<td ui-sref="coopdetail({coid: item.coid})" style="border:none;">{{item.priority}}</td>
 					<td ui-sref="coopdetail({coid: item.coid})" style="border:none;">{{item.updateTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
 					<td class="td-del" ng-click ="deleteProject(item.coid)"><span class="icon-del-tr"></span></td>
 					<td ng-click="openDetail(item)" >
 						<span class="cop-add"></span>
 					</td>
 				</tr>
 				</tbody>
 			</table>
 		</div>
		<div class="coo-detail absol" ng-show="detailSignal">
			<div class="title">协作详情</div>
			<div class="row list">
				 <div class="col-xs-6">
				 	<div>类型：</div>
				 	<div>主题：</div>
				 	<div>负责人：</div>
				 	<div>标识：</div>
				 	<div>发起时间：</div>
				 	<div>最后更新时间：</div>
				 	<div>最后更新人：</div>
				 	<div>当前状态：</div>
				 	<div>期限：</div>
				 </div>
				 <div class="col-xs-6" style="padding: 0;">
				 	<div class="coop-detial-right">{{everyDetail.type.name}}</div>
				 	<div class="substr deta-main coop-detial-right" title="{{everyDetail.name}}" >{{everyDetail.name}}</div>
				 	<div class="coop-detial-right">{{everyDetail.collaborator}}</div>
				 	<div class="coop-detial-right"><div class="mark" style="background:{{everyDetail.markerColor}}"></div>{{everyDetail.markerName}}</div>
				 	<div class="coop-detial-right">{{everyDetail.createTime}}</div>
				 	<div class="coop-detial-right">{{everyDetail.updateTime | date:'yyyy-MM-dd HH:mm:ss'}}</div>
				 	<div class="coop-detial-right">{{everyDetail.updater}}</div>
				 	<div class="coop-detial-right">{{everyDetail.status}}</div>
				 	<div class="coop-detial-right">{{everyDetail.deadline}}</div>
				 </div>
			</div>
		</div>
		<!--data_count（统计页面）-->
		<div class="data_count" scroll-directive >
			<div class="data_Totle">
				<div class="data_back" ng-click ="">
					<span class="" style="margin-left:15px;"><img src="imgs/call_back.png" alt=""></span><a href="" style="color:#69C080;">返回</a>
				</div>
				<!--<button type="button" class="btn btn-default" ng-click="openNew()" class="new_cooper">新建协作</button>-->
				<button type="button" class="btn btn_new new_cooper" ng-click="openNew()" style="float:right;margin-right:15px;margin-top:15px;">新建协作</button>
				<h4>统计结果</h4>

			</div>
			<!--data_list-->
			<div class="data_list overflow" copy-radio>
				<!--data_every-->

					<div class="data_every">
						<div id="data_graph" class="data_graph"></div>
						<div class=" data_titleInfo first">
							<ul> 
								<h4>优先级</h4>
								<li ng-repeat="mostState in arrString track by $index">
									<span class="data_raduis"></span>
									<p class="substr" style="width: 55%;text-align: left;" title="{{mostState}}">{{mostState}}</p>
								</li>
							</ul>
						</div>
					</div>
					<div class="data_every">
						<div id="data_graph2" class="data_graph"></div>
						<div class=" data_titleInfo first">
							<ul>
								<h4>期限</h4>
								<li ng-repeat="deadline in deadlineStr track by $index">
									<span class="data_raduis"></span>
									<p class="substr" style="width: 55%;text-align: left;" title="{{deadline}}">{{deadline}}</p>
								</li>
							</ul>
						</div>
					</div>
					<!--transverse-line(统计中的田字格)-->
					<div class="clearfix transverse-line" ></div>
					<div class="clearfix long-line" ></div>

					<div class="data_every ">
						<div id="data_graph3" class="data_graph"></div>
						<div class=" data_titleInfo second">
							<ul id="statistic_marker">
								<h4>标识</h4>
								<li ng-repeat="makerStatStrInfo in makerStatStr track by $index">
									<span class="markColor"  style="border:4px solid {{makerStatStrInfo.color}};"></span>
									<p class="substr" style="width: 55%;text-align: left;" title="{{makerStatStrInfo.name}}">{{makerStatStrInfo.name}}</p>
								</li>
							</ul>
						</div>

					</div>
					<div class="data_every " >
						<div id="data_graph4" class="data_graph"></div>
						<div class=" data_titleInfo second">
							<ul>
								<h4>协作类型</h4>
								<li ng-repeat="type in typeStatStr track by $index">
									<span class="markColor"  style="border:4px solid {{type.color}};"></span>
									<p class="substr" style="width: 55%;text-align: left;" title="{{type.name}}">{{type.name}}</p>
								</li>
							</ul>
						</div>
					</div>

			</div>
		</div>
	</div>
</div>
	<!--</div>-->
<!--</div>-->
<script type="text/javascript">
	$('.selectpicker').selectpicker({
	  style: 'btn-default',
	  width: '102px',
	});

	//调出新建
	function transCreateCooperation () {
		$('.new_cooper').click();
	}
	//跳转协作管理
	function transCoManage (ppid) {
		//pc跳转传递deptId, ppid 定位到当前工程
		document.location= '#!/coopdetail'; 
	}
	//跳转协作详情
	function transCoDetail (coid) {
		//拼接跳转
		alert(coid);
		alert(success);
		document.location= '#!/coopdetail/?coid='+ coid;
	}
</script>


