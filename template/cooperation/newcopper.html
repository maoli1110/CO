<style type="text/css">
.container {
	width: 1200px !important;
}
header{
    height:60px;
    line-height: 60px;
    background:#ddd;
    text-align:center;
    position:relative;
}
</style>
<div ng-show="!isPreview">
	<header class="create-title">创建协作</header>
	<div class="container">
		<div class="create">
			<div class="row">
				<div class="col-xs-6 left">
					<div class="row">
						<label for="" class="col-xs-2">主题：</label>
				  		<div class="inline col-xs-6"><input type="text" class="form-control left-area new-name" id="" placeholder="" ng-model="coopname" ng-change="changeTopic()"></div>
					</div>
					<div class="row">
						<label for="" class="col-xs-2">优先级：</label>
					   	<select class="selectpicker col-xs-6 priority" ng-model="priority">
						  	<option value="1">Ⅰ</option>
						  	<option value="2">Ⅱ</option>
						  	<option value="3">Ⅲ</option>
						</select>
					</div>
					<div class="row coop-Levels" show-select>
						<label class="col-xs-2">标识：</label>
					  	<select class="identify col-xs-6" ng-model="mark" ng-options="item.picMarker for item in markerList" ng-click="switchMark(mark)">
						</select>
						<!-- <select name="" id="" class="identify selectpicker col-xs-6" ng-model="mark">
							<option value=""></option>
						</select> -->
					</div>
				</div>
				<div class="col-xs-6 right">
					<div class="row">
						<label for="" class="col-xs-3 align-right">负责人：</label>
						<dl ng-repeat="item in collaList.relevants" class="photoImg">
							<dt><img src="{{item.avatar}}"/></dt>
							<dd class="substr" style="width:100px;">{{item.username}}</dd>
						</dl>
					    <div class="inline col-xs-7">
					    	<!-- <input type="text" class="col-xs-3" id="" placeholder="" ng-model="responsiblePerson"> -->
					    	<div class="relate-people inline responsible new-man" >{{responsiblePerson}}</div>
					    	<span class="plus-icon" ng-click="selectResponsible()">+</span>
					    </div>
					</div>
					<div class="row">
					    <label for="" class="col-xs-3 align-right">限制期限：</label>
					    <p class="input-group col-xs-7">
				          <input type="text" class="form-control" style="height:40px !important;width:97%" uib-datepicker-popup ng-model="dt" is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="关闭" clear-text="清除" current-text="今天" ng-disabled="!checksignal" style="width:97%"/>
				          <span class="input-group-btn">
				            <button type="button" class="btn btn-default btn-calendar" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
				          </span>
							<input type="checkbox" ng-click="isChecked()">
				        </p>
					</div>
				</div>
			</div>
			
			<div class="row link">
				<label for="" class="col-xs-1">关联：</label>
				<div class="list-inline col-xs-8">
					<!-- <button class="btn btn-default" popover-placement="right" popover-trigger="'focus'" uib-popover-template="dynamicPopover.templateUrl">与工程关联</button> -->
					<button class="btn btn-link1 new-relative" ng-click="linkProject()">工程</button>
					<button class="btn btn-link1 new-relative" ng-click="linkComponent()">图上构件</button>
					<button class="btn btn-link1 new-relative" ng-click="linkCategoty()">构件类别</button>
				</div>
			</div>
			<div class="row">
				<label for="" class="col-xs-1">&nbsp;</label>
				<div class="col-xs-11" >
					<div class="coop-delete">
						<div class="inline new-pro relate-pro">
							<div ng-show="linkProject1" style="line-height:37px">
								<span class="substr" width="285px">与工程相关： {{data.linkProjectDptName}}项目部 -- {{data.linkProjectName}}工程</span><!-- <span ng-click="removeLink()" style="margin-left:20px;">重新关联</span> -->
							</div>
							<div ng-show="linkComponent1" style="line-height:37px;">
								<span>与构件相关：{{data.linkProjectDptName}}项目部 -- {{data.linkProjectName}}工程</span><!-- <span ng-click="removeLink()" style="margin-left:20px;">删除</span> -->
							</div>
							<div ng-show="linkCategoty1" style="line-height:37px;">
								<span>与构件类别相关：{{data.linkProjectDptName}}项目部 -- {{data.linkProjectName}}工程</span>
							</div>
							<label style="display:inline-block"><img src="imgs/delete.png" alt="" class="new-del" ng-click="removeLink()"></label>
						</div>

					</div>
				</div>
			</div>
			<div class="row mt-15 mx">
				<label for="" class="col-xs-1">描述：</label>
				<div class="col-xs-11" >
					<textarea rows="8" ng-model="desc" style="width:100%;padding:0 13px;"></textarea>
				</div>
			</div>
			<div class="row mt-15 relative-man">
				<label for="" class="col-xs-1">相关人员：</label>
				<div class="selected-list inline col-xs-11">
					<!-- <div class="inline" style="border-right:1px solid #ccc;"> -->
						<ul class="inline rela relative-ion" ng-repeat="item in related.sign track by $index">
							<img src="{{item.avatar}}" alt=""><span class="absol glyphicon glyphicon-pencil" style="right:16px;top:28px;color:#1298DD"></span>
							<li class="substr" style="width:55px;margin-top:25px;margin-bottom:25px;">{{item.username}}</li>
						</ul>
					<!-- </div> -->
					<!-- <div class="inline"> -->
						<ul class="inline relative-ion" ng-repeat="item in related.noSign track by $index">
							<img src="{{item.avatar}}" alt="">
							<li class="substr" style="width:55px;margin-top:25px;margin-bottom:25px;">{{item.username}}</li>
						</ul>
					<!-- </div> -->
					<button class="btn add-related" ng-click="selectRelated()"><span>+</span></button>
				</div>
			</div>
			<!-- upload -->
			<div class="row upload">
				<label for="" class="col-xs-1">照片：</label>
				<div class="upload-img col-xs-11">
					<input class="upload-img" type="file" nv-file-select="" uploader="uploader" style="display:none;" multiple />
			        <ul class="list-inline photo-box" style="margin-top:10px;">
			            <li ng-repeat="item in uploader.queue">
			                <div ng-show="uploader.isHTML5" ng-thumb="{ file: item._file, height: 100 }"></div><br/>
							Name: <span ng-bind="item.file.name" class="substr" style="width:100px;display:inline-block"></span>

			                <!--<button ng-click="item.upload()">upload</button>-->
			            </li>
			            <li><button class="btn  btn-add btn-lg" ng-click="fileUpload()" style="vertical-align:top"><span>+</span></button></li>
			        </ul>
			       
			       	<!--  <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">
		                <span class="glyphicon glyphicon-upload"></span> Upload all
		            </button>
		            <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading" disabled="disabled">
		                <span class="glyphicon glyphicon-ban-circle"></span> Cancel all
		            </button> -->
					<!-- <div class="col-xs-6"><button class="btn">添加</button></div> -->
				</div>
			</div>
			<!-- <div class="row">
				<label for="" class="col-xs-2">资料：</label>
				<div class="upload-docs">
					<input class="upload-docs" type="file" nv-file-select="" uploader="uploader1" multiple nv-file-select="" style="display:none;" />
					 <ul class="list-inline inline">
			            <li ng-repeat="item in uploader1.queue">
			                Name: <span ng-bind="item.file.name"></span><br/>
			                <button ng-click="item.upload()">upload</button>
			            </li>
			        </ul>
					<button class="btn btn-default btn-add" ng-click="docsUpload()">+</button>
				</div>
			</div> -->
			<div class="row docs upload" style="margin-top:10px;">
				<label for="" class="col-xs-1">资料：</label>
				<div class="col-xs-11 look-book">
					<ul ng-repeat="items in docSelectedList track by $index" class="select-docs rela read-book" style="border:0;vertical-align:top">
						<!--文件类型-->
						<li style="border:1px solid #ddd;"><img src="imgs/pro-icon/icon-txt.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='txt'">
	                    <img src="imgs/pro-icon/icon-doc.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='doc'">
	                    <img src="imgs/pro-icon/icon-pdf.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='pdf'"> 
	                    <img src="imgs/pro-icon/icon-xls.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='xls'">
	                    <img src="imgs/pro-icon/icon-ppt.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='ppt'">
	                    <img src="imgs/pro-icon/icon-docx.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='docx'">
	                    <img src="imgs/pro-icon/icon-xlsx.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='xlsx'">
	                    <img src="imgs/pro-icon/icon-pptx.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='pptx'">
	                    <!--图片类型-->
	                    <img src="imgs/pro-icon/icon-jpeg.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='jpeg'">
	                    <img src="imgs/pro-icon/icon-bmp.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='bmp'">
	                    <img src="imgs/pro-icon/icon-png.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='PNG'">
	                    <img src="imgs/pro-icon/icon-gif.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='GIF'">
	                    <img src="imgs/pro-icon/icon-jpg.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='JPG'">
	                    <img src="imgs/pro-icon/icon-png.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='png'">
	                    <img src="imgs/pro-icon/icon-jpg.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='jpg'">
	                    <img src="imgs/pro-icon/icon-gif.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='gif'">

	                    <img src="imgs/pro-icon/icon-dwg.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='dwg'">
	                    <img src="imgs/pro-icon/icon-rar.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='rar'">
	                    <img src="imgs/pro-icon/icon-zip.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='zip'">

	                    <!--视频-->
	                    <img src="imgs/pro-icon/icon-avi.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='avi'">
	                    <img src="imgs/pro-icon/icon-mp4.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='mp4'">
	                    <img src="imgs/pro-icon/icon-mov.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='mov'">
	                    <img src="imgs/pro-icon/icon-flv.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='flv'">
	                    <img src="imgs/pro-icon/icon-swf.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='swf'">
	                    <img src="imgs/pro-icon/icon-wmv.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='wmv'">
	                    <img src="imgs/pro-icon/icon-mpeg.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='mpeg'">
	                    <img src="imgs/pro-icon/icon-mpg.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='mpg'">
	                    <!--音频-->
	                    <img src="imgs/pro-icon/icon-mp3.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='mp3'">
	                    <!--显示其他页面-->
	                    <img src="imgs/pro-icon/icon-xz.png" class="bookSection" ng-click="preView(items.uuid,items.docName,items.fileType,$index,'docSelectedList')" ng-if="items.fileType=='dll'||items.fileType=='hsf'||items.fileType=='exe'||items.fileType=='cab'||items.fileType=='MSI'||items.fileType=='ini'||items.fileType=='EDS'
	                    ||items.fileType =='xml'||items.docName=='EDS'||items.fileType=='ipa'||items.fileType=='pds' ||items.fileType=='lic'||items.fileType=='h' ||items.fileType=='cpp'||items.fileType=='jar'">

							<!-- 根据filetype判断文件类型end -->
						<span class="absol glyphicon glyphicon-remove" ng-click="removeDoc(items)"></span>
						</li>
						<p title="{{items.docName}}" class="substr" style="width:100px;">{{items.docName}}</p>
					</ul>
					<ul ng-repeat="items in formSelectedList" class="select-form rela read-book" style="border:0;vertical-align:top">
						<li style="border:1px solid #ddd;"><img src="imgs/pro-icon/icon-doc.png" alt="" ng-click="preView(items.uuid,items.name,items.suffix,$index,'formSelectedList')">
						<span class="absol glyphicon glyphicon-remove" ng-click="removeForm(items)"></span>
						</li>
						<!-- <input type="checkbox" class="absol" ng-checked="isSelected" ng-click="updateSelection($event,items)"> -->
						<p title="{{items.docName}}"class="substr" style="width:100px;">{{items.name}}</p>
					</ul>
					<input class="upload-docs" type="file" nv-file-select="" uploader="uploader1" multiple nv-file-select="" style="display:none;" />
					<ul class="list-inline inline" style="vertical-align:middle">
			            <li ng-repeat="item in uploader1.queue">
			                <div ng-show="uploader1.isHTML5 && item.file.type.substr(0,5) === 'image'" ng-thumb="{ file: item._file, height: 100 }"></div>
	                        <div ng-show="uploader1.isHTML5 && item.file.type.substr(0,5) !== 'image'" style="width:72px;">
	                            <img src="./imgs/icon/icon-doc.png" alt=""><br/>
	                        </div>
							<div class="substr">{{item.file.name}}</div>
			            </li>
			        </ul>
					<ul class="inline"><button class="btn  btn-add btn-lg" popover-trigger="'focus'" class="form-control" popover-placement="right" uib-popover-template="dynamicPopover.templateUrl"><span>+</span></button></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<div class="create-btn-submit footer">
		<div class="text-center">
			<button class="btn btn-default foot-btn" ng-click="save(0)">存储</button>
			<button class="btn btn-default foot-btn" ng-click="save(1)">提交</button>
			<button class="btn btn-default new-btnFail" ui-sref="cooperation">取消</button>
		</div>
	</div>
</div>
<div ng-show="isPreview">
	<div class="container">
		<header>
			<div class="pull-left" ng-click="backDetail()"><a><--返回</a></div>
			<div class="pull-right" style="text-align:right" ng-show="isDoc" ng-click="editOffice()">编辑资料</div>
		</header>
		<!-- 预览部分 -->
		<div style="width:100%" ng-show="!isEdit">
			<iframe src="{{previewUrl}}" style="height:calc(100vh - 100px);width:100%;" scrolling="no" frameborder="0"></iframe>
		</div>
		<!-- 编辑部分 -->
		<div class="doc-edit" ng-show="isEdit">
			<div id="edit-office" style="min-height:300px">editOffice</div>
			<div class="text-center footer">
				<button class="btn btn-default foot-btn" type="button" ng-click="saveOffice()">保存</button>
				<button class="btn btn-default foot-btn" type="button" ng-click="cancelEditOffice()">取消</button>
			</div>
		</div>
	</div>
	
</div>
<script type="text/javascript">
	$('.selectpicker').selectpicker({
		  style: '',
		  size: 'auto'
		});
</script>
