{"version":3,"sources":["webpack:///webpack/bootstrap f84293d028897fb88844?92a1","webpack:///./script.js","webpack:///./modules/core/core.module.js","webpack:///./modules/core/config/core.routes.js","webpack:///./modules/core/directives/directive.js","webpack:///./modules/core/directives/directive1.js","webpack:///./modules/core/services/common.service.js","webpack:///./modules/core/controller/header.ctrl.js","webpack:///./modules/core/services/header.service.js","webpack:///./modules/manage/manage.module.js","webpack:///./modules/manage/config/manage.routes.js","webpack:///./modules/manage/controllers/manage.ctrl.js","webpack:///./modules/manage/services/manage.service.js","webpack:///./modules/cooperation/cooperation.module.js","webpack:///./modules/cooperation/config/cooperation.routes.js","webpack:///./modules/cooperation/controllers/cooperation.ctrl.js","webpack:///./modules/cooperation/controllers/newcooperation.ctrl.js","webpack:///./modules/cooperation/controllers/selectperson.ctrl.js","webpack:///./modules/cooperation/controllers/coopdetail.ctrl.js","webpack:///./modules/cooperation/controllers/updatecomment.ctrl.js","webpack:///./modules/cooperation/controllers/coopeditdetail.ctrl.js","webpack:///./modules/cooperation/controllers/linkproject.ctrl.js","webpack:///./modules/cooperation/controllers/linkcomponent.ctrl.js","webpack:///./modules/cooperation/controllers/linkbe.ctrl.js","webpack:///./modules/cooperation/controllers/linkform.ctrl.js","webpack:///./modules/cooperation/services/cooperation.service.js","webpack:///./modules/cooperation/services/treesearch.service.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yB;;;;;;;;;;;;;;;;;AC1BA;;AAEA;AACA,iD;;;;;;ACHA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,I;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,gDAA+C,aAAa;AAC5D,cAAa;AACb;AACA,mDAAkD,iBAAiB;AACnE,cAAa;AACb;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa;;AAEb;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kCAAiC,+BAA+B;AAChE;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;;;AAGjB,oBAAmB;;AAEnB;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,6FAA4F,eAAe;AAC3G;AACA;AACA;AACA;AACA;AACA,mDAAkD,UAAU;AAC5D;AACA,kEAAiE,UAAU;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,cAAc;AAC5D,qDAAoD,UAAU;AAC9D;AACA;;AAEA,kBAAiB;AACjB,gDAA+C,YAAY;AAC3D,sDAAqD,iBAAiB;AACtE;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C,oBAAoB;AAClE,qDAAoD,UAAU;AAC9D;AACA;;AAEA,kBAAiB;AACjB,gDAA+C,YAAY;AAC3D,sDAAqD,wBAAwB;AAC7E;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C,oBAAoB;AAClE,qDAAoD,UAAU;AAC9D;AACA;;AAEA,kBAAiB;AACjB,gDAA+C,YAAY;AAC3D,sDAAqD,wBAAwB;AAC7E;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,E;;;;;;ACriBH;;AAEA;AACA;AACA;AACA;;;;AAIA,6CAA4C,4CAA4C;;;AAGxF;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;;AAGA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;;AAErB;AACA;AACA,MAAK,E;;;;;;ACxCL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC,E;;;;;;ACrCD;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA,8BAA6B,yCAAyC;AACtE,cAAa;AACb,8BAA6B,mCAAmC;AAChE;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,8BAA6B,yCAAyC;AACtE,cAAa;AACb,8BAA6B,mCAAmC;AAChE;AACA;AACA,cAAa;AACb,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,iCAAiC;AACnF;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,e;AACA;AACA;AACA,2B;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS,O;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA,EAAC;;;;;;;AC9FD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAiC,kCAAkC;AACnE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,6BAA4B,WAAW;AACvC;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA,EAAC,C;;;;;;AChCD,mD;;;;;;ACAA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,I;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B,kBAAiB;AACjB,2DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC,wCAAuC;AACvC,0CAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0CAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,qBAAqB;AACtC;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA,+OAA8O,2CAA2C;AACzR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,0CAAyC,iBAAiB;AAC1D,kBAAiB;AACjB;AACA,yCAAwC,kBAAkB;AAC1D;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,iBAAiB;AAC1D,kBAAiB;AACjB;AACA,0CAAyC,kBAAkB;AAC3D;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa;AACb;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,oDAAmD,MAAM;AACzD;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;;AAEb,UAAS;;AAET;AACA;AACA,+BAA8B,wGAAwG;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,+BAA8B,+GAA+G;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb,iCAAgC,sGAAsG;AACtI;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAkE,iBAAiB;AACnF;AACA,mCAAkC,oBAAoB;AACtD,WAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,kCAAiC,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA,cAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,gCAAgC,EAAE,qBAAqB;AACtF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,qCAAoC,sBAAsB;AAC1D;AACA,cAAa;AACb;AACA;;AAEA;AACA,uCAAsC,kBAAkB;AACxD;AACA,EAAC,G;;;;;;AChiBD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,mCAAmC;AACpE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,mCAAmC;AACpE;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC,wEAAwE;AAC5G;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,mCAAmC;AACnE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,EAAC,E;;;;;;ACpHD;;AAEA;AACA,wD;;;;;;ACHA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN;;AAEA;AACA,I;;;;;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA,yDAAwD;AACxD,0BAAyB;AACzB,+BAA8B;AAC9B,8BAA6B;AAC7B,qBAAoB;AACpB;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B,0BAAyB;AACzB,gCAA+B;AAC/B,6BAA4B;AAC5B,uBAAsB;AACtB,mBAAkB;AAClB,kCAAiC;AACjC,+BAA8B;AAC9B,2BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX;AACA,YAAW;AACX;AACA,YAAW;AACX;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT;;AAEA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA6B,qFAAqF,EAAE,mBAAmB;AACvI;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,kBAAiB,qBAAqB;AACtC;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA,+OAA8O,2CAA2C;AACzR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,6E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mC;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD,iBAAiB;AACnE;AACA,2BAA0B,oBAAoB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,gCAAgC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,+BAA8B,eAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;;AAGA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA,GAAE;AACF;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb,GAAE;;;AAGF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,KAAI;AACJ;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,wD;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,yD;AACA;AACA,eAAc;AACd;AACA,qD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA,6CAA4C;AAC5C;AACA;AACA;AACA,yCAAwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,kBAAiB,qCAAqC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,4BAA4B;AACpD;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA,IAAG;AACH,yBAAwB,4BAA4B;AACpD;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,kBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,2BAA2B;AAChD,qBAAoB;AACpB;AACA;AACA;;AAEA,OAAM;AACN;AACA;AACA;AACA,sBAAqB,2BAA2B;AAChD,qBAAoB;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,kBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,uBAAuB;AAC1C,qBAAoB;AACpB;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,oBAAmB,uBAAuB;AAC1C,qBAAoB;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,wBAAwB,MAAM;AAC5C;AACA,gBAAe,2BAA2B;AAC1C;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,eAAc,qBAAqB,MAAM;AACzC;AACA,gBAAe,+BAA+B;AAC9C;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA,eAAc,iBAAiB,MAAM;AACrC;AACA,gBAAe,2BAA2B;AAC1C;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,OAAM;AACN;AACA;AACA;AACA,kBAAiB;AACjB;AACA,OAAM;AACN;AACA;AACA;AACA,qBAAoB;AACpB;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV,OAAM;AACN;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,eAAc,wBAAwB,MAAM;AAC5C,+BAA8B;AAC9B;AACA;AACA,KAAI,OAAO;AACX;AACA;AACA,gBAAe,uCAAuC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,eAAc,qBAAqB,MAAM;AACzC,4BAA2B;AAC3B;AACA;AACA,KAAI,OAAO;AACX;AACA;AACA,gBAAe,oCAAoC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,eAAc,iBAAiB,MAAM;AACrC,wBAAuB;AACvB;AACA;AACA,KAAI,OAAO;AACX;AACA;AACA,gBAAe,gCAAgC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,6CAA6C;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,eAAe;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,kBAAiB,qBAAqB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,mBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL,qBAAoB,iBAAiB;AACrC;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;;AAEA,MAAK;AACL,oBAAmB,mBAAmB;AACtC;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;;AAEA;AACA;AACA,kCAAiC,wBAAwB,EAAE,oBAAoB;AAC/E;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,iCAAgC,sBAAsB;AACtD;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8D;AACA,UAAS;AACT;AACA;AACA,UAAS,EAAE;AACX;AACA,qCAAoC,gBAAgB;AACpD,oCAAmC,0BAA0B,EAAE,qBAAqB;AACpF,WAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN,GAAE;;AAEF,+BAA8B;AAC9B;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5wCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,2BAA0B;AAC1B;AACA,kC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB,gCAA+B;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;;AAGF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,+BAA+B,M;AACnD;AACA;AACA;AACA;AACA;AACA,qBAAoB,iCAAiC,M;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB,+BAA+B,MAAM;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAiB,iCAAiC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,+BAA+B,MAAM;AACtD;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAiB,iCAAiC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,6BAA6B;AACjD;AACA;AACA;AACA;AACA;AACA,qBAAoB,+BAA+B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,wCAAuC;AACvC,2CAA0C;AAC1C;AACA;AACA,8BAA6B,oBAAoB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,8BAA6B,oBAAoB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB,6BAA4B;AAC5B,yBAAwB;AACxB,kCAAiC;;AAEjC;AACA,gBAAe,sCAAsC,gBAAgB,+JAA+J,EAAE,6JAA6J,GAAG;AACtY;AACA;AACA;AACA;AACA,W;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA,KAAI;AACJ;AACA;AACA,iCAAgC;AAChC;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,4HAA2H;AAC3H,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ,OAAO;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0HAAyH;AACzH,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,sCAAsC,gBAAgB,+JAA+J,EAAE,6JAA6J,GAAG;;AAEhZ;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;;AAGA,mBAAkB;AAClB;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,O;AACA;AACA;;AAEA,8BAA6B,qDAAqD,EAAE,qBAAqB;AACzG,iCAAgC,gCAAgC,EAAE,qBAAqB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,OAAM;;;AAGN;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,e;AACA;AACA;AACA,2B;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS,O;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,6BAA4B,2CAA2C,EAAE,qBAAqB;;AAE9F,MAAK;AACL;;AAEA;AACA;AACA,+BAA8B,2CAA2C,EAAE,qBAAqB;AAChG;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,YAAY;AAC3C;AACA;;AAEA;;AAEA,EAAC,G;;;;;;AC5mCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB,8BAA6B;AAC7B;AACA;AACA;AACA,wBAAuB;AACvB,iCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,SAAQ;AACR;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA,OAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,uBAAuB;AAC1C;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,KAAI;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,gBAAe,mCAAmC;AAClD,8CAA6C;AAC7C;AACA,8C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAC,G;;;;;;ACjVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B;;AAE1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,KAAI;;AAEJ;AACA;AACA,2CAA0C,eAAe;AACzD,KAAI;AACJ,2CAA0C,eAAe;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,OAAM;;AAEN;;AAEA;AACA;AACA,6B;AACA,IAAG;AACH,6B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yD;AACA,UAAS;AACT,kCAAiC,WAAW;AAC5C,SAAQ;AACR;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wBAAuB,gDAAgD;AACvE;AACA;AACA;AACA;;AAEA;;AAEA,qBAAoB,sCAAsC;AAC1D;AACA,eAAc,kFAAkF;AAChG;AACA;AACA,kBAAiB,mFAAmF;AACpG;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,uC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,kCAAiC,GAAG,aAAa;AACjD,SAAQ;AACR;AACA,MAAK;;AAEL,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,gDAA+C,gBAAgB;AAC/D,KAAI;AACJ,gDAA+C,iBAAiB;AAChE,KAAI;AACJ;AACA;AACA,oDAAmD,gBAAgB;AACnE,KAAI;AACJ,oDAAmD,iBAAiB;AACpE,KAAI;;AAEJ;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;;AAGA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,sCAAsC,gBAAgB,+JAA+J,EAAE,6JAA6J,GAAG;AAC7Y,sBAAqB,sCAAsC,gBAAgB,gIAAgI,EAAE,uCAAuC,gBAAgB,mIAAmI,EAAE,uCAAuC,gBAAgB,gIAAgI,GAAG;AACnkB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,WAAU;AACV;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gB;AACA;AACA;AACA,4B;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU,O;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gC;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,gCAA+B,kGAAkG,EAAE,qBAAqB;AACxJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;AACA,iCAAgC,YAAY;AAC5C;AACA,QAAO;AACP;AACA,gCAA+B,YAAY;AAC3C;;AAEA;;AAEA,EAAC,G;;;;;;AClwBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA,+BAA8B,oBAAoB;AAClD;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA,iDAAgD,mCAAmC;AACnF,KAAI;;AAEJ,EAAC,G;;;;;;AC/ID;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,0BAAyB;AACzB;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,0BAAyB;AACzB;;AAEA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAa;AACb,0M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA,cAAa;;;AAGb,UAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,2BAA0B,sCAAsC;AAChE;AACA,2BAA0B,kFAAkF;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA6G;AAC7G,kBAAiB;AACjB;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAsC,sCAAsC;AAC5E,sBAAqB;AACrB,uCAAsC,qCAAqC;AAC3E;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA,cAAa;AACb;AACA;AACA;AACA,mCAAkC,8DAA8D;AAChG;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAgB;AAChB;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA,4DAA2D,gBAAgB;AAC3E,cAAa;AACb,4DAA2D,iBAAiB;AAC5E,cAAa;AACb;AACA;AACA,gEAA+D,gBAAgB;AAC/E,cAAa;AACb,gEAA+D,iBAAiB;AAChF,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA,6EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,2EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,cAAa;AACb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,mCAAkC,YAAY;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mB;AACA;AACA;AACA,+B;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa,O;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA4C,YAAY;AACxD;AACA;;AAEA;;;AAGA,EAAC,G;;;;;;ACpfD;AACA;AACA;AACA,eAAc;AACd,mB;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,yBAAwB;AACxB,6BAA4B;AAC5B,mBAAkB;AAClB,qBAAoB;AACpB,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA,4BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,6BAA6B;AACzD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA,qB;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAqD;AACrD,uDAAsD;AACtD,sDAAqD;AACrD,uDAAsD;AACtD,0DAAyD;AACzD;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA,OAAM;AACN;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAmD,qBAAqB;AACxE;AACA,4BAA2B,oBAAoB;AAC/C;AACA,sBAAqB;AACrB;AACA,MAAK,uBAAuB;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,qE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA,MAAK,uBAAuB;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,cAAc;AAClC;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,yBAAwB,IAAI;AAC5B;AACA;AACA;AACA,iBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,mBAAkB,oBAAoB;AACtC;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB,iBAAgB;AAChB;AACA;AACA,MAAK,uBAAuB;AAC5B,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB,iBAAgB;AAChB;AACA;AACA,MAAK,uBAAuB;AAC5B,iBAAgB;AAChB;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACvgBD;AACA;AACA;AACA,eAAc;AACd,mB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,yBAAwB;AACxB,6BAA4B;AAC5B,mBAAkB;AAClB,qBAAoB;AACpB,kBAAiB;AACjB;AACA;AACA,kB;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,mBAAmB;AACrC,uCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAmD,qBAAqB;AACxE;AACA,4BAA2B,oBAAoB;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,qE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,cAAc;AAClC;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA,yBAAwB,IAAI;AAC5B;AACA;AACA;AACA,iBAAgB,qBAAqB;AACrC;AACA;AACA;AACA,mBAAkB,oBAAoB;AACtC;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,6BAA6B;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA,EAAC,G;;;;;;ACjXD;AACA;AACA;AACA,eAAc;AACd,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kB;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,0BAAyB;AACzB;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,M;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL,IAAG;;AAEH;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AClQD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,KAAI;;AAEJ;AACA;AACA;AACA,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ,IAAG;AACH,EAAC,G;;;;;;AC3DD;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,WAAW;AAC1C;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA4B,WAAW;AACvC;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC,6CAA6C;AAChF;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAsC,YAAY;AAClD;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA4B,WAAW;AACvC;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,mCAAmC;AAClF;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA,oCAAmC,wEAAwE;AAC3G;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,sCAAqC,iBAAiB;AACtD;AACA,0CAAyC,mCAAmC;AAC5E;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA,UAAS;AACT;AACA,UAAS;AACT,8B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAgC,mCAAmC;AACnE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA,oCAAmC,mCAAmC;AACtE;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,mCAAmC;AACtE;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,EAAE,wEAAwE;AACvG;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAiC,mCAAmC;AACpE;AACA,SAAQ;AACR;AACA,YAAW;AACX;AACA;AACA,EAAC,E;;;;;;ACtaD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB,mBAAmB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,EAAC,E","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f84293d028897fb88844\n **/","\nrequire(\"./modules/core/core.module.js\");\nrequire(\"./modules/core/config/core.routes.js\");\nrequire(\"./modules/core/directives/directive.js\");\nrequire(\"./modules/core/directives/directive1.js\");\nrequire(\"./modules/core/services/common.service.js\");\nrequire(\"./modules/core/controller/header.ctrl.js\");\nrequire(\"./modules/core/services/header.service.js\");\n\nrequire(\"./modules/manage/manage.module.js\");\nrequire(\"./modules/manage/config/manage.routes.js\");\nrequire(\"./modules/manage/controllers/manage.ctrl.js\");\nrequire(\"./modules/manage/services/manage.service.js\");\nrequire(\"./modules/cooperation/cooperation.module.js\");\nrequire(\"./modules/cooperation/config/cooperation.routes.js\");\nrequire(\"./modules/cooperation/controllers/cooperation.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/newcooperation.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/selectperson.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/coopdetail.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/updatecomment.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/coopeditdetail.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/linkproject.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/linkcomponent.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/linkbe.ctrl.js\");\nrequire(\"./modules/cooperation/controllers/linkform.ctrl.js\");\nrequire(\"./modules/cooperation/services/cooperation.service.js\");\nrequire(\"./modules/cooperation/services/treesearch.service.js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./script.js\n ** module id = 0\n ** module chunks = 1\n **/","'use strict';\n\n// 注册核心模块\nApplicationConfiguration.registerModule('core');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/core.module.js\n ** module id = 12\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('core').config(['$stateProvider', '$urlRouterProvider',\n\tfunction($stateProvider, $urlRouterProvider) {\n\t\t$urlRouterProvider.otherwise('/manage');\n\n\t\t$stateProvider.\n\t\t state('login', {\n\t\t\turl:\"/\",\n\t\t\ttemplateUrl: 'template/core/login.html',\n\t\t\tdata: {\n\t\t\t\tdisplayName: 'login'\n\t\t\t}\n\t\t});\n\t}\n]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/config/core.routes.js\n ** module id = 13\n ** module chunks = 1\n **/","'use strict';\nangular.module('core').directive('profit', function($timeout) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n            if (scope.$last === true) {\n                $timeout(function() {\n                    scope.$emit('ngRepeatFinished');\n                });\n            }\n\n        }\n\n    };\n});\n\nangular.module('core').directive('profitDept', function($timeout) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n            if (scope.$last === true) {\n                $timeout(function() {\n                    scope.$emit('ngRepeatFinishedDept');\n                });\n            }\n\n        }\n\n    };\n});\n\nangular.module('core').directive('profitSwitch', function($timeout) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n            if (scope.$last === true) {\n                $timeout(function() {\n                    scope.$emit('ngRepeatFinishedSwitch');\n                });\n            }\n\n        }\n\n    };\n});\n\nangular.module('core').directive('getCooperlist', function($timeout) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n        \telement.bind('click',function(){\n        \t\tdebugger;\n        \t})\n        }\n\n    };\n});\n\nangular.module('core').directive('copyRadio', function ($timeout) {\n    return {\n\t\trestrict: 'AE',\n\t\tlink: function (scope, ele, attr) {\n           \n\t\t\t//var checkObj= angular.element('.sub-nav li');\n\t\t\t////console.log(checkObj);\n\t\t\t//checkObj.on('click', function () {\n\t\t\t//\tif($(this).find(':checkbox').prop('checked')){\n\t\t\t//\t\t$(this).siblings().find(':checkbox').prop('checked',false);\n\t\t\t//\t\t$(this).parent().parent().siblings().find(':checkbox').prop('checked', false);\n\t\t\t//\t}\n\t\t\t//})\n            //点击新建协作把统计页面给关闭\n            $(\".new_cooper\").click(function(){\n                $(\".data_count\").hide();\n            })\n            //点击返回按钮关闭当前对话框\n            $(\".data_back\").click(function(){\n                $(\".data_count\").hide();\n                $(\".table-list.basic-project\").show();\n                $(\".table-list.draft-box\").hide();\n            })\n                    //动态列表图片定位动画\n            $(\".list\").on(\"mouseenter\",\".tools_bar\",function(){\n            \t$(this).children(\".bar\").animate({\"bottom\":'0'})\n            });\n            $(\".list\").on(\"mouseleave\",\".tools_bar\",function(){\n                $(this).children(\".bar\").animate({\"bottom\":'-28px'})\n            });\n         //   协作首页点击表格编辑状态\n         //   $(\".table-list>table\").on('click','edit-click',function(){\n         //       alert(123)\n         //       $(this).find(\".cop-edit\").hide();\n         //   })\n         //   新建负责人点击选中状态时间委托\n            $(\".select-person-responsible-modal .person-list\").on(\"click\",\".checkA\",function(){\n                $(\".user-chioce\").hide();\n                $(this).find(\".user-chioce\").show();\n            })\n         //   新建相关人点击选中事件委托\n            $(\".select-person-related-modal .left .person-list\").on(\"click\",\".select-check\",function(){\n\n                //删除默认状态\n                $('li ').css(\"background\",'#fff')\n                $(\".user-chioce\").hide();\n                //给当前获取焦点添加一个样式\n                //debugger;\n                $(this).find(\".user-chioce\").show().siblings().find(\".user-chioce\").hide();\n                $(this).css(\"background\",'#eceef0').siblings().css(\"background\",\"#fff\");\n\n            })\n\n\t\t}\n\t};\n});\n\n\nangular.module('core').directive('showIcon', function () {\n    return {\n        restrict: 'AE',\n        link: function (scope, ele, attr) {\n            //        导航栏效果\n            $(\".navbar-nav li\").click(function(){\n                //判断有没有这个class 有的话就删除没有的话就添加toggleClass(\"navActive\")\n                $(this).addClass(\"navActive\").siblings().removeClass(\"navActive\");\n            })\n        }\n    };\n});\n\nangular.module('core').directive('ngThumb', ['$window', function($window) {\n        var helper = {\n            support: !!($window.FileReader && $window.CanvasRenderingContext2D),\n            isFile: function(item) {\n                return angular.isObject(item) && item instanceof $window.File;\n            },\n            isImage: function(file) {\n                var type =  '|' + file.type.slice(file.type.lastIndexOf('/') + 1) + '|';\n                return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1;\n            }\n        };\n\n        return {\n            restrict: 'A',\n            template: '<canvas/>',\n            link: function(scope, element, attributes) {\n                if (!helper.support) return;\n\n                var params = scope.$eval(attributes.ngThumb);\n\n                if (!helper.isFile(params.file)) return;\n                if (!helper.isImage(params.file)) return;\n\n                var canvas = element.find('canvas');\n                var reader = new FileReader();\n\n                reader.onload = onLoadFile;\n                reader.readAsDataURL(params.file);\n\n                function onLoadFile(event) {\n                    var img = new Image();\n                    img.onload = onLoadImage;\n                    img.src = event.target.result;\n                }\n\n                function onLoadImage() {\n                    var width = params.width || this.width / this.height * params.height;\n                    var height = params.height || this.height / this.width * params.width;\n                    canvas.attr({ width: width, height: height });\n                    canvas[0].getContext('2d').drawImage(this, 0, 0, width, height);\n                }\n            }\n        };\n    }]);\n//滚动条\nangular.module('core').directive('scrollDirective', function () {\n        return {\n            restrict: 'AE',\n            link: function (scope, ele, attr) {\n                var sideHeight = $(window).height()-124;\n               $(\"#content-a2\").mCustomScrollbar({\n                   mouseWheelPixels:200,\n                   scrollAmount:10,\n                   scrollSpeed:10,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a3\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                     setHeight:$(window).height(),\n                    theme:\"minimal\"\n                });\n                $(\"#content-a4\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a5\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a6\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a7\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a8\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a9\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a10\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a11\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a12\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a13\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a14\").mCustomScrollbar({\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-a15\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    theme:\"minimal\"\n                });\n                //$(\"#content-a3\").mCustomScrollbar({\n                //    theme:\"minimal\"\n                //});\n                $(\"#content-b1\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:5,\n                    setHeight:'90%',\n                    theme:\"minimal\",\n                    advanced:{\n                        updateOnBrowserResize:false\n                    }\n                });\n                $(\"#content-b2\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n\n                $(\"#statistic_marker\").mCustomScrollbar({\n                    mouseWheelPixels:200,\n                    scrollAmount:10,\n                    scrollSpeed:10,// 统计页面--标识\n                    setHeight:240,\n                    theme:\"minimal\"\n                });\n                \n                $(\"#content-b7\").mCustomScrollbar({\n                    setHeight:sideHeight,\n                    theme:\"minimal\"\n                });\n                $(\"#content-b8\").mCustomScrollbar({\n                    theme:\"minimal\"\n                });\n\n\n                //});\n\n            }\n        };\n    });\n//搜索部分搜索关键字高亮显示\nangular.module('core').directive('lightHeight', function () {\n    return {\n        restrict: 'AE',\n        link: function (scope, ele, attr) {\n            //$(window).load(function(){\n            //    console.log('22222');\n\n            jQuery.fn.highlight = function(pat) {\n                function innerHighlight(node, pat) {\n                    var skip = 0;\n                    if (node.nodeType == 3) {\n                        var pos = node.data.toUpperCase().indexOf(pat);\n                        if (pos >= 0) {\n                            var spannode = document.createElement('span');\n                            spannode.className = 'highlight';\n                            var middlebit = node.splitText(pos);\n                            var endbit = middlebit.splitText(pat.length);\n                            var middleclone = middlebit.cloneNode(true);\n                            spannode.appendChild(middleclone);\n                            middlebit.parentNode.replaceChild(spannode, middlebit);\n                            skip = 1;\n                        }\n                    }\n                    else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {\n                        for (var i = 0; i < node.childNodes.length; ++i) {\n                            i += innerHighlight(node.childNodes[i], pat);\n                        }\n                    }\n                    return skip;\n                }\n                return this.each(function() {\n                    innerHighlight(this, pat.toUpperCase());\n                });\n            };\n            jQuery.fn.removeHighlight = function() {\n                function newNormalize(node) {\n                    for (var i = 0, children = node.childNodes, nodeCount = children.length; i < nodeCount; i++) {\n                        var child = children[i];\n                        if (child.nodeType == 1) {\n                            newNormalize(child);\n                            continue;\n                        }\n                        if (child.nodeType != 3) { continue; }\n                        var next = child.nextSibling;\n                        if (next == null || next.nodeType != 3) { continue; }\n                        var combined_text = child.nodeValue + next.nodeValue;\n                        var new_node = node.ownerDocument.createTextNode(combined_text);\n                        node.insertBefore(new_node, child);\n                        node.removeChild(child);\n                        node.removeChild(next);\n                        i--;\n                        nodeCount--;\n                    }\n                }\n                return this.find(\"span.highlight\").each(function() {\n                    var thisParent = this.parentNode;\n                    thisParent.replaceChild(this.firstChild, this);\n                    newNormalize(thisParent);\n                }).end();\n            };\n\n\n\n            //$('#exampleInputName2').bind('keyup change', function(ev) {\n            //    // pull in the new value\n            //    var searchTerm = $(this).val();\n            //    // remove any old highlighted terms\n            //    $('.project_name').removeHighlight();\n            //    // disable highlighting if empty\n            //    if ( searchTerm) {\n            //    // highlight the new term\n            //        $('.project_name').highlight( searchTerm );\n            //    }\n            //});\n            //\n            //\n            //\n            //$('#exampleInputName3').bind('keyup change', function(ev) {\n            //    // pull in the new value\n            //    var searchTerm = $(this).val();\n            //    // remove any old highlighted terms\n            //    $('.menName').removeHighlight();\n            //    // disable highlighting if empty\n            //    if (searchTerm) {\n            //        // highlight the new term\n            //        $('.menName').highlight( searchTerm );\n            //    }\n            //});\n            //// be高亮搜索\n            //$('#linkbeSear').bind('keyup change', function(ev) {\n            //    // pull in the new value\n            //    var searchTerm = $(this).val();\n            //    // remove any old highlighted terms\n            //    $('.linkbeMatter').removeHighlight();\n            //    // disable highlighting if empty\n            //    if ( searchTerm ) {\n            //        // highlight the new term\n            //        $('.linkbeMatter').highlight( searchTerm );\n            //    }\n            //});\n        }\n    };\n});\n//选中阴影\nangular.module('core').directive('boxShadow', function($timeout) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n\n            if (scope.$last === true) {\n                $timeout(function() {\n                    scope.$emit('shadowFinsh');\n                });\n            }\n        }\n    };\n});\nangular.module('core').directive('detail', function($timeout) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attr) {\n\n            if (scope.$last === true) {\n                $timeout(function() {\n                    scope.$emit('detailTools');\n                });\n            }\n        }\n\n    };\n});\n\nangular.module('core').directive('showSelect', function($timeout) {\n    return {\n        restrict: 'AE',\n        link: function(scope, element, attr) {\n                $('.identify').addClass('selectpicker');\n                $timeout(function() {\n                    $('.selectpicker').selectpicker({\n                        style: '',\n                        size: 'auto'\n                    });\n                }, 300);\n            }\n    };\n});\n\nangular.module('core').directive('pcOperation', function() {\n    return {\n        restrict: 'AE',\n        link: function(scope, element, attr) {\n            $(\".btn_box_pc\").click(function(){\n                $(\".show_btn\").toggleClass(\"glyphicon-menu-left\")\n                //toggleClass增加一个class      \n                //通过判断这个class的状态来决定是开操作还是关操作\n                $(\".content_right_pc\").toggleClass(\"menus\");\n                if($(\".content_right_pc\").hasClass(\"menus\")){\n                    $(\".btn_box_pc\").animate({right:\"260px\"})\n                    $(\".content_right_pc\").animate({right:\"0\"})\n                    $(\".glyphicon-menu-right\").css(\"display\",'inline-block');\n                    $(\".mobile-mark\").show();\n\n                }else{\n                     $(\".btn_box_pc\").animate({\"right\":\"0\"});\n                     $(\".content_right_pc\").animate({\"right\":\"-260px\"});\n                    $(\".glyphicon-menu-right\").css('display','none');\n                    $(\".mobile-mark\").hide();\n                }\n              });\n        }\n    };\n});\n\nangular.module('core').directive('bvOperation', function($document) {\n    return {\n        restrict: 'AE',\n        link: function(scope, element, attr) {\n            var rightDistance = document.getElementsByClassName('content_right_bv')[0].offsetWidth;\n            var rightDistance1 = document.getElementsByClassName('paly-model')[0].offsetWidth;\n\n            $(\".btn_box_bv\").click(function(){\n            console.log('rightDistance1', rightDistance);\n                $(\".show_btn\").toggleClass(\"glyphicon-menu-left\")\n                //toggleClass增加一个class      \n                        //通过判断这个class的状态来决定是开操作还是关操作\n                        $(\".content_right_bv\").toggleClass(\"menus\");\n                if($(\".content_right_bv\").hasClass(\"menus\")){\n\n                    $(\".btn_box_bv\").animate({right:rightDistance})\n                    $(\".content_right_bv\").animate({right:\"0\"})\n                    $(\".glyphicon-menu-right\").css(\"display\",'inline-block');\n                    $(\".mobile-mark\").show();\n\n                }else{\n                     $(\".btn_box_bv\").animate({\"right\":\"0\"});\n                     $(\".content_right_bv\").animate({\"right\": -rightDistance});\n                    $(\".glyphicon-menu-right\").css('display','none');\n                    $(\".mobile-mark\").hide();\n                }\n              });\n            $('.mobile-mark').click(function() {\n                $(\".show_btn\").toggleClass(\"glyphicon-menu-left\")\n                //toggleClass增加一个class      \n                        //通过判断这个class的状态来决定是开操作还是关操作\n                        $(\".content_right_bv\").toggleClass(\"menus\");\n                if($(\".content_right_bv\").hasClass(\"menus\")){\n\n                    $(\".btn_box_bv\").animate({right:rightDistance})\n                    $(\".content_right_bv\").animate({right:\"0\"})\n                    $(\".glyphicon-menu-right\").css(\"display\",'inline-block');\n                    $(\".mobile-mark\").show();\n\n                }else{\n                     $(\".btn_box_bv\").animate({\"right\":\"0\"});\n                     $(\".content_right_bv\").animate({\"right\": -rightDistance});\n                    $(\".glyphicon-menu-right\").css('display','none');\n                    $(\".mobile-mark\").hide();\n                }\n            });\n        }\n    };\n});\n//$(\" #content-a3\").height($(window).height()-125)\nwindow.onresize = function(){\n    $(\" #content-a3\").height($(window).height()-125);\n}\n//angular.module('core').directive('canvas', function($timeout) {\n//    return {\n//        restrict: 'AE',\n//        link: function(scope, element, attr) {\n//\n//        }\n//    };\n//});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/directives/directive.js\n ** module id = 14\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('core').directive('niceScroll', function () {\n    return {\n        restrict: 'AE',\n        link: function (scope, ele, attr) {\n\n          \n\n                $('.sider-bar').niceScroll({cursorborderradius:\"5px\",cursorcolor:\"#00F\"})\n\n\n        }\n    };\n});\n\nangular.module('core').directive('scrollcDirective1', function () {\n        return {\n            restrict: 'AE',\n            link: function (scope, ele, attr) {\n                \n\n                    $(\"#content-1\").mCustomScrollbar({\n                        theme:\"minimal\"\n                    });\n                    $(\"#content-2\").mCustomScrollbar({\n                        theme:\"minimal\"\n                    });\n                    $(\"#content-3\").mCustomScrollbar({\n                        theme:\"minimal\"\n                    });\n                    $(\"#content-4\").mCustomScrollbar({\n                        theme:\"minimal\"\n                    });\n                    $(\"#content-9\").mCustomScrollbar({\n                        theme:\"minimal\"\n                    });\n   \n            }\n        };\n    });\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/directives/directive1.js\n ** module id = 15\n ** module chunks = 1\n **/","'use strict';\n/**\n * 通用方法\n */\nangular.module('core').service('Common', function () {\n\n\tvar self = this;\n\n\t// 补零\n\tthis.zero = function (num) {\n\t\tnum = num < 10 ? \"0\" + num : num;\n        return num;\n\t};\n\n\tthis.createTimeList = function (arr) {\n\t\tvar i = 0,\n            start = \":00:00\",\n            end = \":59:59\";\n        while (i < 24) {\n            var num = self.zero(i);\n            arr.push({\n                start: num + start,\n                end: num + end\n            });\n            i++;\n        }\n\t};\n\n    this.dateFormat = function (date) {\n        var dateStr = date.getFullYear() + \"-\" + self.zero(date.getMonth() + 1) + \"-\" + self.zero(date.getDate()) + \" \" + self.zero(date.getHours()) + \":\" + self.zero(date.getMinutes()) + \":\" + self.zero(date.getSeconds());\n        return dateStr;\n    };\n\n    this.dateFormat1 = function (date) {\n        var dateStr = date.getFullYear() + \"-\" + self.zero(date.getMonth() + 1) + \"-\" + self.zero(date.getDate());\n        return dateStr;\n    };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/services/common.service.js\n ** module id = 16\n ** module chunks = 1\n **/","/**\n * Created by sdergt on 2016/8/24.\n */\n//var app = angular.module(\"myApp\",[]);\nvar clickCount = 0;\t\t// 头部小三角点击次数\nangular.module(\"core\").controller(\"headerCtrl\",function($scope,headerService){\n    //console.info(\"我是头部标签\")\n    //分公司列表的状态\n    //   点击工具栏三角形出现二级菜单\n    $scope.$on(\"ngRepeatFinished\",function(ngRepeatFinishedEvent){\n    \tif(clickCount > 0) {\t\t// 第一次点击也要显示\n    \t\t$(\".header_menus\").slideToggle(\"fast\");\n            $(\".header_menus ul li\").hover(function(){\n                $(\".header_menus\").show();\n                $(this).css({\"background\":\"#f5f6f7\",\"color\":\"#69c080\"}).children().find(\"ol\").show();\n            },function(){\n                $(this).css({\"background\":\"#fff\",\"color\":\"#333\"}).children().find(\"ol\").hide();\n                $(\".header_menus\").hide();\n                $('.header-shape').removeClass('dispatcher-database')\n            })\n    \t}\n    \t$(\".header-shape\").click(function(){\n            $(\".header_menus\").slideToggle(\"fast\");\n            $(\".header_menus ul li\").hover(function(){\n                $(\".header_menus\").show();\n                $(this).css({\"background\":\"#f5f6f7\",\"color\":\"#69c080\"}).children().find(\"ol\").show();\n            },function(){\n                $(this).css({\"background\":\"#fff\",\"color\":\"#333\"}).children().find(\"ol\").hide();\n                $(\".header_menus\").hide();\n                $('.header-shape').removeClass('dispatcher-database')\n            })\n        })\n    })\n    $scope.headerMenus=[];\n    //  头部信息的数据显示\n        $scope.menus = function(){\n            $('.header-shape').toggleClass(\"dispatcher-database\");\n            if($('.header-shape').hasClass(\"dispatcher-database\")){\n            \tclickCount++;\n                headerService.enterpriseInfoList({epid:0,isAll:3,queryFromBV:false}).then(function(data){\n                    $scope.headerMenus = data.data;\n                });\n            }\n        }\n    \n    //获取当前用户信息\n    $scope.currentUser={\n\t\timg:\"\",\n\t\tname:\"\",\n\t\tjob:\"\",\n\t\tcompName:\"\"\n\t};\n    headerService.currentUserInfo().then(function(data){\n        $scope.currentUser.img = data.avatarUrl;\n    \t$scope.currentUser.name = data.userName;\n    \t$scope.currentUser.job = data.roleName;\n    \t$scope.currentUser.compName = data.enterpriseName;\n    });\n\n    //最大化、最小化、还原、关闭\n    //SC_MAXIMIZE、SC_MINIMIZE、SC_RESTORE、SC_CLOSE  \n    //窗口缩小\n    $scope.minimize = function () {\n        BimCo.SysCommand('SC_MINIMIZE');\n    }\n\n    //窗口放大还原\n    var num=0; \n    $scope.max = true;\n    $scope.maxRestore = function ($event) {\n        if(num++ %2 == 0){ \n            console.log('max');\n            $scope.max = false;\n            $scope.restore = true;\n            //对接pc\n            BimCo.SysCommand('SC_MAXIMIZE');\n\n        } else { \n            console.log('restore');\n            $scope.max = true;\n            $scope.restore = false;\n            //对接pc\n            BimCo.SysCommand('SC_RESTORE');\n        }\n    }\n    \n\n    //窗口关闭\n    $scope.close = function () {\n        BimCo.SysCommand('SC_CLOSE');\n    }\n    //分公司下拉列表\n\n\n})\n \n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/controller/header.ctrl.js\n ** module id = 17\n ** module chunks = 1\n **/","/**\n * Created by sdergt on 2016/8/24.\n */\nangular.module(\"core\").service(\"headerService\",function($http,$q){\n    var headerService = {};\n\n    // 获取头部菜单数据\n    headerService.enterpriseInfoList = function(params){\n        var url_join = \"/bimco/rs/co/enterpriseInfoList\";\n        var delay = $q.defer();\n        var obj = JSON.stringify(params);\n        $http.post(url_join,obj,{transformRequest:angular.identity}).then(function(data){\n            delay.resolve(data);\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n    \n    headerService.currentUserInfo = function () {\n        var delay = $q.defer();\n        var url_join= \"/bimco/rs/co/userInfo\";\n        $http.get(url_join,{cache:true})\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    };\n    \n    return headerService;\n})\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/core/services/header.service.js\n ** module id = 18\n ** module chunks = 1\n **/","ApplicationConfiguration.registerModule('manage');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/manage/manage.module.js\n ** module id = 19\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('core').config(['$stateProvider', '$urlRouterProvider',\n\tfunction($stateProvider, $urlRouterProvider) {\n\t\t$urlRouterProvider.otherwise('/manage');\n\n\t\t$stateProvider.\n\t\t state('manage', {\n\t\t\turl:\"/manage\",\n\t\t\ttemplateUrl: 'template/manage/manage.html',\n\t\t\tcontroller: 'manageCtrl',\n\t\t\tdata: {\n\t\t\t\tdisplayName: 'manage'\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\t'deptId': null,\n\t\t\t\t'ppid': null\n\t\t\t}\n\t\t});\n\t\t// .state('home.part', {\n\t\t// \t'url':\"/part\",\n\t\t// \ttemplateUrl: 'template/home/part.html',\n\t\t// \tcontroller: 'homeCtrl',\n\t\t// \tdata: {\n\t\t// \t\tdisplayName: 'part'\n\t\t// \t}\n\t\t// })\n\t\t// .state('home.all', {\n\t\t// \t'url': \"/all\",\n\t\t// \ttemplateUrl: 'template/home/all.html',\n\t\t// \tcontroller: 'allCtrl',\n\t\t// \tdata: {\n\t\t// \t\tdisplayName: 'all'\n\t\t// \t}\n\t\t// });\n\t}\n]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/manage/config/manage.routes.js\n ** module id = 20\n ** module chunks = 1\n **/","'use strict';\n/**\n * 协作管理\n */\nangular.module('manage').controller('manageCtrl', ['$scope', '$http', '$uibModal', '$state','FileUploader','Manage','$stateParams',\n    function ($scope, $http, $uibModal, $state, FileUploader,Manage,$stateParams) {\n\tvar firstreackflag = true;//进入页面只加载一次定位\n\tvar firstdeptid; //第一个项目部id\n    var searchId = $stateParams.ppid?$stateParams.ppid:'';//工程ppid\n\tvar deptId = $stateParams.deptId?$stateParams.deptId:'';\n\tvar changeProj = false;\n\t$scope.docType = \"1\";\n    $scope.deptInfoList = [];\n    $scope.projectInfoList = [];\n    $scope.openSignal = false;\n    $scope.isNoSearchValue = false;//搜索无工程\n    $scope.isNoSearchValueBook = false;//搜索资料\n    $scope.isNoSearchValueReject = false;//搜索无结果\n    $scope.openNew = function () {\n    \t$scope.openSignal = true;\n    }\n\n    $scope.closeNew = function () {\n    \t$scope.openSignal = false;\n    }\n\n    $scope.trans = function () {\n    \tvar url = $state.href('newcopper', {parameter: \"parameter\"});\n\t\twindow.open(url,'_blank');\n    }\n    //加载更多\n    var moreTrents;\n    var searchBox = $(\"#exampleInputName2\").val();//项目部下面的工程搜索参数\n    //获取项目部列表\n    Manage.getDeptInfoList().then(function (data) {\n        $scope.deptInfoList = data;\n        if(!deptId){\n        \t firstdeptid = data[0].deptId;\n        }\n    })\n\n    $scope.initScrollend = function(id){\n          //如果当前企业和切换的企业id不一样，初始化$scope.scrollend\n          if(searchId != id){\n                $scope.scrollend = false;\n                lastUploadTime = '';\n                lastUsername = '';\n            }\n     }\n  \n    //点击项目部追加工程列表，并且绑定click事件\n    function getimgurl(treeItems,deptId){\n    \t$(\"#dept_\"+deptId).empty();\n\t\tfor(var i = 0 ; i< treeItems.length;i++){\n\t\t\tif(treeItems[i].projectType==\"土建预算\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/1.png\";\n\t\t\t}else if(treeItems[i].projectType==\"钢筋预算\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/2.png\";\n\t\t\t}else if(treeItems[i].projectType==\"安装预算\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/3.png\";\n\t\t\t}else if(treeItems[i].projectType==\"Revit\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/4.png\";\n\t\t\t}else if(treeItems[i].projectType==\"Tekla\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/5.png\";\n\t\t\t};\n\t\t\t$(\"#dept_\"+deptId).append(\"<span id=projectbutton_\"+treeItems[i].ppid+\" title='\"+treeItems[i].projectName+\"' class='spanwidth'><img src='\"+treeItems[i].imgsrc+\"'><span class='substr-sideMenus coop-menusSet' style='display:inline-block;'>\"+treeItems[i].projectName+\"</span>&nbsp;<b class='coop-countElement'>(\"+treeItems[i].count+\")</b></span>\")\n        }\n\t\t\n\t\t$(\"span[id^='projectbutton_']\").bind(\"click\", function(){\n             $(\".manage-menus\").removeClass(\"menusActive\");\n\t\t   \t  $(\"span\").removeClass(\"menusActive\");\n\t\t        //获取当前元素\n\t\t   \t  $(this).addClass(\"menusActive\").siblings().removeClass(\"menusActive\");\n\t\t   \t  $(\" .data_count\").hide();\n              $scope.trentsListInfo = [];\n              changeProj = true;\n\t\t   \t  $scope.trentsList($(this).attr(\"id\").split(\"_\")[1]);\n\t\t});\n\t}\n    \n    //获取项目部下的工程列表\n    $scope.childItems = function(id,$event,open){\n        var searchBox = $(\"#exampleInputName2\").val();\n        $(\".good_list\").show();\n        $(\".pro_list\").hide();\n        $(\".goodlist_left\").show();\n        $(\".prolist_left\").hide();\n        $('.manage-menus').removeClass('menusActive');\n        $(\"span.spanwidth\").removeClass(\"menusActive\");\n        if( $scope.isNoSearchValue){\n            $(\".good_list\").css({'display':'none'});\n        }\n        if(!open){\n        \tManage.getProjectInfoList(id).then(function (data) {\n            \tgetimgurl(data,id);\n            });\n            deptId = id;\n            //获取项目统计列表\n            var params = {deptId:id,searchText:searchBox};\n            var obj = JSON.stringify(params);\n            Manage.getProjectTrends(obj).then(function(data){\n                $scope.trentsCount = data.data;\n               if(data.data.length==0){\n                    $scope.isNoSearchValue = true;\n                    $(\".good_list\").css({'display':'none'});\n                }else{\n                   $scope.isNoSearchValue = false;\n                   $(\".good_list\").css({'display':'block'})\n               }\n            });\n        }\n        if(!deptId){\n            deptId = deptId;\n        }\n        if(deptId != deptId ){\n           deptId = deptId;\n        }\n    }\n        //项目统计列表搜索功能\n        //搜索功能\n        $scope.searchProject = function(deptId,searchBox){\n            var params = {deptId:deptId,searchText:searchBox};\n            var obj = JSON.stringify(params);\n            Manage.getProjectTrends(obj).then(function(data){\n                $scope.trentsCount = data.data;\n                //setTimeout(addProjectStyle,100);\n                if($scope.trentsCount.length==0){\n                    $scope.isNoSearchValue = true;\n                    $(\".good_list\").css({'display':'none'})\n                }else{\n                    $scope.isNoSearchValue = false;\n                    $(\".good_list\").css({'display':'block'})\n                }\n            });\n        }\n        $scope.getDeptId = function(){\n            if(!deptId){\n                 deptId = firstdeptid;\n            }\n            else{\n                 deptId = deptId;\n            }\n            var searchBox = $(\"#exampleInputName2\").val();\n            if(searchBox.length>0){\n                $scope.searchProject(deptId,searchBox);\n\n            }else if(searchBox.length==0){\n                if(!deptId){\n                    deptId = firstdeptid;\n                }else{\n                    deptId = deptId;\n                }\n                searchBox='';\n                $scope.searchProject(deptId,searchBox);\n\n            }\n        }\n\n        function addProjectStyle(){\n            var searchTerm = $(\"#exampleInputName2\").val();\n            $('.project_name').removeHighlight();\n            if (searchTerm) {\n                $('.project_name').highlight(searchTerm);\n            }\n        }\n        function addEpcStyle(){\n            var searchTerm = $(\"#exampleInputName3\").val();\n            $('.menName').removeHighlight();\n            if (searchTerm) {\n                $('.menName').highlight(searchTerm);\n            }\n        }\n\n        //图片预览效果\n        $scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n            var slid = $('ul.slide_box li')\n            slid.addClass('none');\n            slid.eq(0).removeClass('none');\n            var slideindex = 0;\n            function switchi() {\n                if(slideindex == slid.length - 1){\n                    slideindex = 0;\n                }else {\n                    slideindex = slideindex + 1;\n                }\n                slid.addClass('none');\n                slid.eq(slideindex).removeClass('none');\n            }\n            var timer = setInterval(switchi, 3000);\n            function options(indexs) {\n                slid.addClass('none');\n                slid.eq(indexs).removeClass('none');\n            }\n            //判断是第几页的内容\n            //前进后退的效果\n            //如果恒等于0的时候就等于三，执行减操作，执行上一个动作\n            $('a.options').click(function(){\n                var drec = $(this).data('drec');\n                if(drec == 'pre') {\n                    if(slideindex == 0) {\n                        slideindex = 3;\n                    }else {\n                        slideindex = slideindex - 1;\n                    }\n                    //如果恒等于3的时候就等于0 ，执行加操作,执行下一个\n                }else {\n                    if(slideindex == 3) {\n                        slideindex = 0;\n                    }else {\n                        slideindex = slideindex + 1;\n                    }\n                }\n                clearInterval(timer);\n                options(slideindex);\n            });\n            $('ul > li >.bx-controls >.img_list>.tools_bar>.bookSection').click(function(){\n                slideindex = $(this).index();\n                clearInterval(timer);\n                options(slideindex);\n                $(\".mask\").show();\n                $(\".showImg\").show();\n                $(\".turnDown\").show();\n            });\n            $(\".turnDown\").click(function(){\n                $(this).hide();\n                $(\".mask\").hide();\n                $(\".showImg\").hide();\n            })\n         \n            //下载弹出遮罩层和下载进度\n            $(\".pro-down\").click(function(){\n                $(\".tools_bar>.pro_mask\").animate({top:0});\n                $(\".bar\").hide();\n            })\n            $(\".proName\").click(function(){\n                if($(this).find(\".panel-body\").height()<=20){\n                    //alert(\"子元素为空，没有子元素\");\n                    $(this).find(\".panel-body\").css(\"padding-bottom\",'0px')\n                }\n            })\n            $(\".manage-menus\").bind(\"click\", function(){\n                $(\"manage-menus\").removeClass(\"menusActive\");\n                //获取当前元素\n                $(this).addClass(\"menusActive\").siblings().removeClass(\"menusActive\");\n            });\n\n        });\n\n        //动态列表搜索关键字\n        $scope.trentsSearch = function(seacherKey){\n            Manage.getTrends({count:10,lastUploadTime:\"\",lastUsername:\"\",ppid:searchId,searchKey:seacherKey,searchType:$scope.docType}).then(function(data){\n                $scope.trentsListInfo = data.data;\n                var typeArr = ['txt','doc','pdf','ppt','docx','xlsx','xls','pptx','jpeg','bmp','PNG','GIF','JPG','TXT','DOC','PDF','PPT','DOCX','XLSX','PPTX','JPEG','BMP','png','jpg','gif','dwg','rar','zip','avi','mp4','mov','flv','swf','wmv','mpeg','mpg','mp3'];\n                angular.forEach(data.data, function (value, key) {\n                    angular.forEach(value.docs, function (value1, key1) {\n                        if(typeArr.indexOf(value1.fileType) == -1) {\n                            $scope.trentsListInfo[key].docs[key1].fileType = 'other';\n                            console.log( $scope.trentsListInfo[key].docs[key1].fileType );\n                        }\n                    });\n                });\n                //setTimeout(addEpcStyle,100);\n                if(data.data.length==0 ){\n                    $scope.isNoSearchValueReject =true;\n                    $('.pro_list').css('display','none');\n                }else{\n                    $scope.isNoSearchValueReject =false;\n                    $('.pro_list').css('display','block');\n                }\n            });\n        }\n        $scope.manageSeacher = function(){\n            //获取搜索类型关键字\n            $scope.trentsListInfo=[];\n            $scope.seacherKey = $(\"#exampleInputName3\").val();\n            if(!$scope.docType){\n                $scope.docType=\"1\";\n            }else{\n                $scope.docType=$scope.docType;\n            }\n            $scope.trentsSearch( $scope.seacherKey)\n        }\n\n        $scope.changeAttr = function (docType) {\n            $scope.trentsListInfo = [];\n            $scope.seacherKey = $(\"#exampleInputName3\").val();\n            if(!$scope.docType){\n                $scope.docType=1;\n            }else{\n                $scope.docType=$scope.docType;\n            }\n            Manage.getTrends({count:10,lastUploadTime:\"\",lastUsername:\"\",ppid:searchId,searchKey:$scope.seacherKey,searchType:$scope.docType}).then(function(data){\n                $scope.trentsListInfo = data.data;\n                var typeArr = ['txt','doc','pdf','ppt','docx','xlsx','xls','pptx','jpeg','bmp','PNG','GIF','JPG','TXT','DOC','PDF','PPT','DOCX','XLSX','PPTX','JPEG','BMP','png','jpg','gif','dwg','rar','zip','avi','mp4','mov','flv','swf','wmv','mpeg','mpg','mp3'];\n                angular.forEach(data.data, function (value, key) {\n                    angular.forEach(value.docs, function (value1, key1) {\n                        if(typeArr.indexOf(value1.fileType) == -1) {\n                            $scope.trentsListInfo[key].docs[key1].fileType = 'other';\n                            console.log( 'qqqqq',$scope.trentsListInfo[key].docs[key1].fileType );\n                        }\n                    });\n                });\n                //setTimeout(addEpcStyle,100);\n                if(data.data.length==0){\n                    $scope.isNoSearchValueReject = true;\n                    $('.pro_list').css('display','none')\n                }else{\n                    $scope.isNoSearchValueReject =false;\n                    $('.pro_list').css('display','block')\n                }\n            });\n            //Manage.getTrends({lastUploadTime:\"\",lastUsername:\"\",ppid:searchId,searchKey:$scope.seacherKey,searchType:$scope.docType}).then(function(data){\n            //    $scope.trentsListInfo = data.data;\n            //});\n        }\n        //判断是否按下enter键进行搜索（动态工程列表页面）\n        //工程列表enter键搜索\n        $(\"#exampleInputName2\").val();\n        $scope.previewList = function(e){\n            var keyCode = e.keyCode|| e.which;\n            if($(\"#exampleInputName2\").val()!=\"\" && keyCode==13){\n                $scope.getDeptId();\n            }else if($(\"#exampleInputName2\").val()==''){\n                $scope.trentsCount=[];\n                searchBox = $(\"#exampleInputName2\").val();\n                searchBox=''\n                if(!deptId){\n                    deptId = firstdeptid;\n                }else{\n                    deptId = deptId;\n                }\n                $scope.searchProject(deptId,searchBox);\n            }\n        }\n        //判断是否按下enter键进行搜索（动态工程动态列表页面）\n        //工程动态列表enter键搜索\n        $scope.keyUp = function(e){\n            var keyCode = e.keyCode|| e.which;\n            if($(\"#exampleInputName3\").val()!=\"\" && keyCode==13){\n                $scope.seacherKey = $(\"#exampleInputName3\").val();\n                $scope.manageSeacher();\n            }else if($(\"#exampleInputName3\").val()==''){\n                var searchValue = $(\"#exampleInputName3\").val();\n                searchValue='';\n                $scope.trentsListInfo=[];\n                $scope.trentsSearch(searchValue)\n            }\n        }\n        /*滚动加载只防止多次提交请求问题start*/\n        //可以查询\n        var searchFlag;\n        var pollingFlag = true;\n        var checkSearchInterval;\n        //搜索高亮显示\n        $scope.addMoreData = function (){\n        \tif(!changeProj){\n        \t\tsetSearchFlagFalse();\n                if(pollingFlag){\n                    pollingFlag = false;\n                    checkSearchInterval = setInterval(function() {checkCanSearch()},100);\n         \t\t}\n         \t\tsetTimeout(function() {setSearchFlagTrue()},150);\n        \t}else{\n        \t\tchangeProj = false;\n        \t}\n            \n        };\n        var setSearchFlagFalse = function(){\n        \tconsole.log(false);\n            searchFlag = false;\n        }\n        var setSearchFlagTrue = function(){\n        \tconsole.log(true);\n            searchFlag = true;\n        }\n        var checkCanSearch = function(){\n        \tconsole.log(\"轮询\");\n            if(searchFlag){\n            \tconsole.log(\"chaxun\");\n                clearInterval(checkSearchInterval);\n                $scope.trentsList(searchId);\n                pollingFlag = true;\n            }\n        }\n        /*滚动加载只防止多次提交请求问题end*/\n        var lastUploadTime; //下一次请求的时间 第一次没有值\n        var lastUsername;//下一次请求的用户名 第一次没有值\n        $scope.trentsListInfo=[];\n        $scope.scrollend= false;\n        //点击右侧列表获取动态列表\n        $scope.turnPage = function(id){\n            $(\"span[id='projectbutton_\"+id+\"']\").click();\n        }\n        //通过侧边栏的子元素去调出动态列表\n        $scope.trentsList = function(id) {\n            //如过却换工程 scrollend需要初始化设置\n            $(\".manage-menus\").removeClass(\"menusActive\");\n            //$scope.initScrollend(id);\n            if(changeProj){\n            \t $scope.scrollend = false;\n                 lastUploadTime = '';\n                 lastUsername = '';\n                 //changeProj = false;\n            }\n        \tif(!id){\n        \t\tconsole.log(\"无id,查询失败\");\n        \t\treturn;\n        \t}\n            searchId = id;\n            $(\".good_list\").hide();\n            $(\".pro_list\").show();\n            $(\".goodlist_left\").hide();\n            $(\".prolist_left\").show();\n            var createindex = layer.load(1, {\n                shade: [0.1,'#000'] //0.1透明度的黑色背景\n            });\n            $scope.seacherKey = $(\"#exampleInputName3\").val();\n            if(!$scope.docType){\n                $scope.docType =1;\n            }else{\n                $scope.docType = $scope.docType;\n            }\n            Manage.getTrends({\n                count:10,\n                lastUploadTime:lastUploadTime,\n                lastUsername:lastUsername,\n                ppid: id,\n                searchKey:$scope.seacherKey,\n                searchType:$scope.docType\n            }).then(function (data) {\n            \tvar size = 0;\n                if(data.data.length==0){\n                    $(\".pro_list\").css('display','none');\n                    $scope.isNoSearchValueReject = true;\n                } else{\n                    $(\".pro_list\").css('display','block');\n                    $scope.isNoSearchValueReject = false;\n                }\n                if(data.data.length!=0){\n                    for(var i=0 ;i<data.data.length;i++){\n                    \tsize++;\n                        $scope.trentsListInfo.push(data.data[i])\n                    }\n                    lastUploadTime = data.data[data.data.length-1].updateTime;\n                    lastUsername = data.data[data.data.length-1].username;\n                    console.info('动态详情列表',$scope.trentsListInfo)\n                }\n                if(data.data.length<10){\n                    $scope.scrollend = true;\n                }\n               // debugger;\n                var lh = 0;\n                if($scope.trentsListInfo.length > 10){\n                \tlh = $scope.trentsListInfo.length - size;\n                }\n                var typeArr = ['txt','doc','pdf','ppt','docx','xlsx','xls','pptx','jpeg','bmp','PNG','GIF','JPG','TXT','DOC','PDF','PPT','DOCX','XLSX','PPTX','JPEG','BMP','png','jpg','gif','dwg','rar','zip','avi','mp4','mov','flv','swf','wmv','mpeg','mpg','mp3'];\n                angular.forEach(data.data, function (value, key) {\n                    angular.forEach(value.docs, function (value1, key1) {\n                        if(typeArr.indexOf(value1.fileType) == -1) {\n                        \tvar keys = lh + key;\n                            $scope.trentsListInfo[keys].docs[key1].fileType = 'other';\n                            //console.log( '格式数组',$scope.trentsListInfo[keys].docs[key1].fileType );\n                        }\n                    });\n                });\n                layer.close(createindex);\n            });\n            $scope.id = id;\n        }\n\n\n    $scope.getProjectList = function (index) {\n        $scope.isOpen = !$scope.isOpen;\n    }\n        //通过动态列表的图片获取大图的资源路径\n        $scope.transformBig = function(uuid,docName,isPreview){\n            var data ={fileName:docName,uuid:uuid};\n            if(isPreview == false){\n                alert('该文件暂不支持预览')\n                return;\n            }\n            Manage.getTrendsFileViewUrl(data).then(function (result) {\n                $scope.previewimg = result;\n                layer.open({\n                        type: 2,\n                        title: '预览',\n                        fix: false,\n                        shadeClose: true,\n                        maxmin: true,\n                        area: ['1000px', '500px'],\n                        content: $scope.previewimg\n                    });\n            },function (data) {\n                var obj = JSON.parse(data);\n                console.log(obj);\n                alert(obj.message);\n            });\n        }\n        //回退按钮关闭列表页面\n        $scope.listBack = function(){\n            $(\".good_list\").show();\n            $(\".pro_list\").hide();\n            $(\".goodlist_left\").show();\n            $(\".prolist_left\").hide();\n           $state.go('manage',{'deptId':deptId,'ppid':searchId},{ location: 'replace'});\n        }\n\n        //更新资料和选中模块加阴影效果\n        $scope.$on('shadowFinsh', function (ngRepeatFinishedEvent) {\n            $scope.updataBook = function(adds){\n                adds = adds;\n                if(adds>0){\n                    adds--\n                }\n                $(\".good_list dl\").click(function(){\n                    $(this).find(\".updateNub\").text(adds);\n                    $(this).addClass(\"dlActive\").siblings().removeClass(\"dlActive\")\n                })\n            }\n        })\n        \n        $scope.$on('ngRepeatFinishedDept',function(ngRepeatFinishedEvent){\n\t    \tif(firstreackflag){\n\t\t\t\t//获取列表里面第一个项目部\n\t\t\t\tif(deptId){\n\t\t\t\t\t$(\"#deptbutton_\"+deptId).click();\n\t\t\t\t}else{\n\t\t\t\t\t$(\"#deptbutton_\"+firstdeptid).click();\n\t\t\t\t}\n\t\t\t\tfirstreackflag = false;\n\t\t\t}\n\t\t})\n\n        //服务器时间\n        $scope.currentTime= function(){\n            Manage.getTrendsSystem({sysTime:\"\",sysWeek:\"\"}).then(function(data){\n                $scope.serviceTime = data.data;\n            })\n        }\n        $scope.currentTime();\n\n        $scope.transCooperation = function () {\n            $state.go('cooperation', {'transignal':'be'});\n        }\n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/manage/controllers/manage.ctrl.js\n ** module id = 21\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('manage').service('Manage', function ($http, $q) {\n\n    //var trendUrl = ApplicationConfiguration.urls.trendUrl?ApplicationConfiguration.urls.trendUrl:\"\";\n    var trendUrl = basePath;\n    //trendUrl=\"http://172.16.21.69:8080/bimco\";\n    /**\n     *获取项目部列表\n     */\n    this.getDeptInfoList = function () {\n        var delay = $q.defer();\n        var url_join = trendUrl + 'rs/trends/deptInfoList';\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n                //console.info(data)\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    };\n\n    this.getProjectInfoList = function (params) {\n\n        var delay = $q.defer();\n        var url_join = trendUrl + 'rs/trends/projectInfoList/' + params;\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n//    获取项目动态统计\n    this.getProjectTrends = function(obj){\n        var delay = $q.defer();\n        var url_join = trendUrl+\"rs/trends/projectTrends\";\n        $http.post(url_join,obj,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data)\n        },function(data){\n            delay.resolve(data)\n        })\n        return delay.promise;\n    }\n\n\n    //静态数据\n    //var param = {\n    //    count:10,\n    //    lastUploadTime:\"\",\n    //    lastUsername:\"\",\n    //    ppid:1000,\n    //    searchKey:\"\",\n    //    searchType:\"\"\n    //};\n//    获取动态列表\n    this.getTrends = function(params){\n        var delay = $q.defer();\n        var url_join = trendUrl+\"rs/trends/trends\";\n        var obj = JSON.stringify(params);\n//        console.log(obj);\n        $http.post(url_join,obj,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n            //console.info(data)\n        },function(data){\n            delay.reject(data)\n        })\n        return delay.promise;\n    }\n\n\n//    获取大图效果（获取资料地址）\n//    getTrendsFileViewUrl\n    this.getTrendsFileViewUrl = function(params){\n        var params = JSON.stringify(params);\n        var delay = $q.defer();\n        var url_join = trendUrl+ \"rs/trends/viewUrl\";\n        $http.post(url_join,params,{transformRequest: angular.identity, transformResponse: angular.identity}).success(function(data){\n           delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    //系统时间\n    this.getCurrentDate = function () {\n        var cDate = new Date();\n        //console.info($scope.date)\n        var cYear = cDate.getFullYear();\n        var cMouth = cDate.getMonth()+1;\n        var cDay = cDate.getDate();\n        var cWeekday=new Array(7);\n        cWeekday[0]=\"星期日\";\n        cWeekday[1]=\"星期一\";\n        cWeekday[2]=\"星期二\";\n        cWeekday[3]=\"星期三\";\n        cWeekday[4]=\"星期四\";\n        cWeekday[5]=\"星期五\";\n        cWeekday[6]=\"星期六\";\n       var currentDate =  cYear+\"年\"+ cMouth+\"月\"+cDay+\"日\"+cWeekday[cDate.getDay()];\n       return currentDate;\n    }\n//    获取服务器时间\n    this.getTrendsSystem = function(params){\n        var delay = $q.defer();\n        var url_join = trendUrl+\"rs/trends/system\";\n        var obj = JSON.stringify(params);\n        $http.get(url_join,obj,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/manage/services/manage.service.js\n ** module id = 22\n ** module chunks = 1\n **/","'use strict';\n\n// 注册核心模块\nApplicationConfiguration.registerModule('cooperation');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/cooperation.module.js\n ** module id = 23\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('core').config(['$stateProvider', '$urlRouterProvider','$locationProvider',\n\tfunction($stateProvider, $urlRouterProvider,$locationProvider) {\n\t\t\n\t\t$urlRouterProvider.otherwise('/cooperation');\n\n\t\t$stateProvider.\n\t\t state('cooperation', {\n\t\t\turl:\"/cooperation?deptId&ppid\",\n\t\t\ttemplateUrl: 'template/cooperation/cooperation.html',\n\t\t\tcontroller: 'coopreationCtrl',\n\t\t\tdata: {\n\t\t\t\tdisplayName: 'cooperation'\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\t'deptId': null,\n\t\t\t\t'ppid': null,\n\t\t\t\t'status':null,\n\t\t\t\t'transignal': null\n\t\t\t}\n\t\t})\n\t\t.state('newcopper', {\n\t\t\t'url':\"/newcopper?typeid\",\n\t\t\ttemplateUrl: 'template/cooperation/newcopper.html',\n\t\t\tcontroller: 'newcoopreationCtrl',\n\t\t\tdata: {\n\t\t\t\tdisplayName: 'newcopper'\n\t\t\t},\n\t\t\tparams:{\n\t\t\t\ttypeid:null,\n\t\t\t\ttypename:null,\n\t\t\t\tdeptId:null,\n\t\t\t\tppid:null,\n\t\t\t\tdeptName:null,\n\t\t\t\tppidName:null\n\t\t\t}\n\t\t})\n\t\t.state('coopdetail', {\n\t\t\t'url':\"/coopdetail/?coid\",\n\t\t\ttemplateUrl: 'template/cooperation/coop_detail.html',\n\t\t\tcontroller: 'coopdetailCtrl',\n\t\t\tdata: {\n\t\t\t\tdisplayName: 'coopdetail'\n\t\t\t},\n\t\t\tparams: {\n\t\t\t\t'deptId':null,\n\t\t\t\t'ppid':null,\n\t\t\t\t'coid':null\n\t\t\t}\n\t\t}).state(\"editdetail\",{\n\t\t\t'url':\"/editdetail/?coid\",\n\t\t\ttemplateUrl:\"template/cooperation/coop_editdetail.html\",\n\t\t\tcontroller:\"editdetailCtrl\"\n\t\t});\n\n\t\t// .state('home.all', {\n\t\t// \t'url': \"/all\",\n\t\t// \ttemplateUrl: 'template/home/all.html',\n\t\t// \tcontroller: 'allCtrl',\n\t\t// \tdata: {\n\t\t// \t\tdisplayName: 'all'\n\t\t// \t}\n\t\t// });\n\n\t\t//$locationProvider.html5Mode(true);\n\n\t}\n]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/config/cooperation.routes.js\n ** module id = 24\n ** module chunks = 1\n **/","'use strict';\n/**\n * 协作管理\n */\nangular.module('cooperation').controller('coopreationCtrl', ['$scope', '$http', '$uibModal','$httpParamSerializer','FileUploader','Cooperation','$state','$stateParams','$location','$timeout',\n    function ($scope, $http, $uibModal, $httpParamSerializer,FileUploader,Cooperation,$state,$stateParams,$location,$timeout) {\n    var urlParams = $location.search(); //截取url参数\n    $scope.flag = {};\n    $scope.flag.isEmptyUrl = $.isEmptyObject(urlParams); //判断当前url参数否为空 false:有值 true：空\n    var firstflag = true; //筛选全选只加载一次标识\n    var firstreackflag = true;//进入页面只加载一次定位\n    $scope.scrollend = false;//停止滚动加载\n    var firstdeptid; //第一个项目部id;\n\tvar searId;\n\t$scope.branchList = false;//子公司弹窗列表初始状态\n    //查询列表初始值\n    $scope.currentDate =  Cooperation.getCurrentDate();\n    $scope.cooperationList = [];\n    var tempCooperationList = [];\n    var queryData = {};\n  \tqueryData.count = 20;\n  \tqueryData.deptId = (!$scope.flag.isEmptyUrl && urlParams.deptId >= -1)?urlParams.deptId:'';\n  \tqueryData.groups=[];\n  \tqueryData.modifyTime = '';\n    queryData.modifyTimeCount = 0;\n  \tqueryData.ppid = urlParams.ppid?urlParams.ppid:'';\n  \t\n  \tqueryData.queryFromBV = true;\n  \tqueryData.searchKey = '';\n  \tqueryData.searchType = '';\n    $scope.isTypeChecked = false;\n    $scope.coopattr = '0';\n    $scope.openSignal = false;\n    $scope.projectInfoList = [];\n    $scope.deptIdToken = 0;//防止点击项目部多次提交\n    $scope.ppidToken = 0;//防止点击工程部多次提交\n    $scope.deptIdOpenToken = 0;//防止点击项目部关闭多次提交;\n    var oldSelsectType = [];//筛选旧值存储-协作类型\n\tvar oldPriority = [];//筛选旧值存储-优先级\n\tvar oldMark = [];//筛选旧值存储-标识\n\t$scope.checkboxSelsectType = [];//筛选实际checkbox旧值存储-协作类型\n\t$scope.checkboxPriority = [];//筛选实际checkbox旧值存储-优先级\n\t$scope.checkboxMark = [];//筛选实际checkbox旧值存储-标识\n\t\n    $scope.openNew = function () {\n    \t$scope.openSignal = true;\n    \tCooperation.getTypeList().then(function (data) {\n        $('.overlay').css('top','0px');\n        $('.overlay').css('height','calc(100vh - 65px)');\n        $('.overlay').css('display','block');\n        angular.forEach(data,function(value,key) {\n          if(value.name == '问题整改'){\n            data[key].typeImg = 1;\n          } else if(value.name == '阶段报告'){\n            data[key].typeImg = 2;\n          }else if(value.name == '方案报审'){\n            data[key].typeImg = 3;\n          }else if(value.name == '方案会签'){\n            data[key].typeImg = 4;\n          }else if(value.name == '现场签证'){\n            data[key].typeImg = 5;\n          } else if(value.name == '图纸变更'){\n            data[key].typeImg = 6;\n          }\n        });\n    \t\t$scope.typeList = data;\n\n    \t});\n    }\n    \n\t$scope.link = function(id){\n        $scope.flag.isDraft = false;\n\t\t$scope.deptIdOpenToken = 0;\n\t\t//searId =id;\n//\t\tconsole.info('searId',searId)\n        $scope.initScrollend(id);\n\t\t$scope.projectInfoList = [];\n\t\tqueryData.groups = [];\n\t\t\tif(id==-1){\n\t\t\t\tqueryData.deptId = '';\n\t\t\t\tqueryData.ppid = '';\n\t\t\t}\n\t\t\tCooperation.getCollaborationList(queryData).then(function (data) {\n\t\t\t$scope.cooperationList = data;\n\t\t\tqueryData.deptId = '';\n\t\t\tqueryData.ppid = '';\n\t\t});\n      $(\".general\").removeClass('menusActive');\n      $(\"#draft\").removeClass('menusActive');\n\t\t$(\".cop-filter, .cop-list, .btn_count\").css(\"display\",'inline-block');\n\t\t$(\".basic-project\").show();\n\t\t// $(\".draft-box\").hide();\n\t}\n\t\n\t$scope.drafts = function(id){\n    $scope.flag.isDraft = true;\n\t\t$scope.deptIdOpenToken = 0;\n\t\tsearId = id;\n//\t\tconsole.info('searId',searId)\n      $scope.initScrollend(id);\n\t\t\t$scope.projectInfoList = [];\n\t\t\tqueryData = {};\n\t\t\tqueryData.groups = [];\n\t\t\tqueryData.count = 20;\n\t\t\tqueryData.queryFromBV = true;\n\t\t\tqueryData.modifyTimeCount = 0;\n\t\t\tif(id==-1){\n\t\t\t\tqueryData.deptId = '';\n\t\t\t\tqueryData.ppid = '';\n\t\t\t}else if(id==0){\n\t\t\t\tvar group = {\n\t\t\t\t\ttype:605,\n\t\t\t\t\tvalue:{\n\t\t\t\t\t\tkey:\"0\"\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tqueryData.groups.push(group);\n\t\t\t}\n\t\t\t//alert(\"我是草稿箱\")\n      $(\".general\").removeClass('menusActive'); \n      $(\"#no-relate\").removeClass('menusActive');\n\t\t\t$(\".cop-filter ,.cop-list ,.btn_count\").css(\"display\",'none');\n\t\t\t$(\".draft-box\").show();\n\t\t\tCooperation.getCollaborationList(queryData).then(function (data) {\n\t\t\t\t$scope.cooperationList = data;\n\t\t\t\tqueryData.deptId = '';\n\t\t\t\tqueryData.ppid = '';\n\t\t\t\t//console.info('$scope.cooperationList',$scope.typeList)\n//\t\t\t\tconsole.info('xjmifsnfw',$scope.cooperationList)\n\t\t\t\tif($scope.cooperationList.isLock){\n\t\t\t\t\t$('.table  tbody .problems-rect .problems-box').css('margin-left','40px')\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n     //弹出筛选框\n    $scope.openfilter = function () {\n      $scope.isCollapsed = true;\n      $('.overlay').css('display','block');\n      $('.overlay').css('top','59px');\n      $('.overlay').css('height','calc(100vh - 115px)');\n\t  $('.operation-mask').css('display','block')\n    }\n    //点击蒙层隐藏筛选匡\n    $scope.clicklay = function () {\n      $scope.isCollapsed = false;\n      $scope.detailSignal = false;\n      $scope.openSignal = false;\n      $('.overlay').css('display','none');\n\t  $(\".operation-mask\").hide()\n    }\n\n    //点击显示列表每条协作的详情\n    $scope.openDetail = function (item) {\n      $scope.detailSignal = true;\n      $('.overlay').css('top','0px');\n       $('.overlay').css('height','calc(100vh - 65px)');\n      $('.overlay').css('display','block');\n      $scope.everyDetail = item;\n    }\n\n    $scope.trans = function (typeId,typeName) {\n    \t$state.go('newcopper', {'typeid': typeId,'typename':typeName,'deptId':queryData.deptId,'ppid':queryData.ppid},{location:'replace'});\n    \t//window.open(url,'_self');\n    }\n\n    //获取项目部列表3434\n    Cooperation.getDeptInfo().then(function (data) {\n    \t$scope.deptInfoList = data;\n    \tif(!queryData.deptId){\n    \t\tfirstdeptid = data[0].deptId;//确定第一个deptid\n            queryData.deptId = firstdeptid;\n    \t\t$scope.deptIdToken = 0;\n    \t}\n//      console.log(queryData.deptId);\n    });\n    \n    function getimgurl(treeItems,deptId){\n    \t//清空旧数据\n    \t$(\"#dept_\"+deptId).empty();\n\t\tfor(var i = 0 ; i< treeItems.length;i++){\n\t\t\tif(treeItems[i].projectType==\"土建预算\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/1.png\";\n\t\t\t}else if(treeItems[i].projectType==\"钢筋预算\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/2.png\";\n\t\t\t}else if(treeItems[i].projectType==\"安装预算\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/3.png\";\n\t\t\t}else if(treeItems[i].projectType==\"Revit\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/4.png\";\n\t\t\t}else if(treeItems[i].projectType==\"Tekla\"){\n\t\t\t\ttreeItems[i].imgsrc=\"imgs/icon/5.png\";\n\t\t\t};\n\t\t\t$(\"#dept_\"+deptId).append(\"<span id=projectbutton_\"+treeItems[i].ppid+\" title='\"+treeItems[i].projectName+\"' class='spanwidth'><img src='\"+treeItems[i].imgsrc+\"'><span class='substr-sideMenus coop-menusSet' style='display:inline-block;'>\"+treeItems[i].projectName+\"</span>&nbsp;<b class='coop-countElement'>(\"+treeItems[i].count+\")</b></span>\")\n\t\t}\n\t\t\n\t\t$(\"span[id^='projectbutton_']\").bind(\"click\", function(){\n\t\t\t  // $(\".draft-box\").hide();\n            $scope.flag.isDraft = false;\n            $('.manage-menus').removeClass('menusActive');\n\t\t   \t$(\"span[class*=ng-binding]\").removeClass(\"menusActive\");\n\t\t    //获取当前元素\n\t\t   \t$(this).addClass(\"menusActive\").siblings().removeClass(\"menusActive\");\n\t\t   \t$(\" .data_count\").hide();\n\t\t\t$(\".table-list.basic-project\").show();\n\t\t\t$scope.getCollaborationList($(this).attr(\"id\").split(\"_\")[1]);\n\t\t});\n\t}\n\n    //获取工程列表\n   \t$scope.getprojectInfoList = function (deptId, open) {\n         $scope.flag.isDraft = false;\n      $('#deptbutton_'+deptId).parent().addClass('menusActive');\n      $(':not(#deptbutton_'+deptId+')').parent().removeClass('menusActive'); \n      \n       var ppid = queryData.ppid;\n   \t\t//初始化数据\n   \t\t$scope.scrollend = false;\n        queryData.modifyTime = '';\n        queryData.modifyTimeCount = 0;\n        queryData.ppid = '';\n\t\t$scope.projectInfoList=[];\n\t\tqueryData.groups=[];\n\t\t$(\".cop-filter, .cop-list, .btn_count\").css(\"display\",'inline-block');\n\t\t$(\".basic-project\").show();\n\t\t// $(\".draft-box\").hide();\n\t\tif(!open){\n\t\t\tCooperation.getProjectList(deptId).then(function (data) {\n\t\t\t\tgetimgurl(data,deptId);\n\t\t\t\tif(ppid){\n\t\t\t\t\t$(\"span[id='projectbutton_\"+ppid+\"']\").click();\n\t\t\t\t}\n\t\t\t});\n\t\t\t$scope.deptIdOpenToken = 0;\n\t\t}else{\n\t\t\t$scope.deptIdOpenToken = 1;\n\t\t}\n\n\t\tif(!queryData.deptId){\n\t\t\tqueryData.deptId  = deptId;\n\t\t}\n\t\t//如果进入的deptid不同\n\t\tif(queryData.deptId != deptId ){\n\t\t\tqueryData.deptId  = deptId;\n\t\t}\n    if(!queryData.ppid){\n      $scope.cooperationList = []; \n      Cooperation.getCollaborationList(queryData).then(function (data) {\n        $scope.cooperationList = data;\n        $scope.deptIdToken = 1;\n        $scope.deptIdOpenToken = 0;\n      });\n    $(\" .data_count\").hide();\n    }\n   \t}\n   \n   \t\n   \t/*滚动加载只防止多次提交请求问题start*/\n    //可以查询\n \tvar searchFlag;\n \tvar pollingFlag = true;\n \tvar checkSearchInterval;\n \t$scope.addMoreData = function (){\n \t\tif($scope.deptIdToken == 0 ||  $scope.ppidToken == 1 || $scope.deptIdOpenToken == 1) {\n \t\t\t$scope.ppidToken = 0;\n \t\t\treturn;\n \t\t}\n \t\tif(token == true){\n \t\t\ttoken = false;\n \t\t\treturn;\n \t\t}\n \t\tsetSearchFlagFalse();\n \t\tif(pollingFlag){\n \t\t\tpollingFlag = false;\n \t\t\tcheckSearchInterval = setInterval(function() {checkCanSearch()},100);\n \t\t}\n \t\tsetTimeout(function() {setSearchFlagTrue()},150);\n\n \t};\n \tvar setSearchFlagFalse = function(){\n \t\tsearchFlag = false;\n \t}\n\tvar setSearchFlagTrue = function(){\n\t\tsearchFlag = true;\n \t}\n\tvar checkCanSearch = function(){\n\t\tif(searchFlag){\n\t\t\tclearInterval(checkSearchInterval);\n\t\t\t$scope.searchMoreData();\n\t\t\tpollingFlag = true;\n\t\t}\n\t}\n\t/*滚动加载只防止多次提交请求问题end*/\n\t\n     //当滚动加载到最后一页时候，$scope.scrollend全局变量为true，\n     //导致切换工程时候不能进行滚动加载，需要初始化$scope.scrollend的值\n     $scope.initScrollend = function(id){\n          //如果当前企业和切换的企业id不一样，初始化$scope.scrollend\n          if(queryData.ppid != id){\n             $scope.scrollend = false;\n             queryData.modifyTime = '';\n             queryData.modifyTimeCount = 0;\n          }\n     }\n\n    //下拉获取更多协同列表数据\n    $scope.searchMoreData = function () {\n    \t\n        //默认获取第一个项目部列表的工程列表\n        if(!queryData.deptId) {\n           // queryData.deptId = firstdeptid;\n            queryData.searchType = 0;\n        }\n        //第一次queryData.modifyTime为空\n        //第二次modifyTime为最后一次的数据的时间值\n        if($scope.cooperationList.length) {\n            queryData.modifyTimeCount = 1;\n            for(var i = 0;i<$scope.cooperationList.length;i++){\n            \tqueryData.modifyTime = $scope.cooperationList[i].updateTime;\n            }\n            queryData.modifyTime =  $scope.cooperationList[$scope.cooperationList.length - 1].updateTime;\n        }\n        Cooperation.getCollaborationList(queryData).then(function (data) {\n        \tif(!$scope.cooperationList.length) {\n                $scope.cooperationList = data;\n            } else {\n                if(data.length) {\n                \tfor(var j=0 ; j<data.length;j++){\n                \t\t $scope.cooperationList.push(data[j]);\n                \t}\n                    if(data.length<20){\n                    \t$scope.scrollend = true;\n                    }\n                }\n                return;\n            }\n        });\n    }\n    \n    \n\t$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){\n\t\t$('.table-list table tbody tr').click(function(){\n\t\t\t$(this).find(\".cop-edit\").show();\n\t\t\t$(this).siblings().find(\".cop-edit\").hide();\n\t\t});\n\t\tif(firstflag){\n\t\t\t//第一次设置默认全选\n\t        $scope.typeCheck = true;\n\t        $scope.priorityCheck = true;\n\t    \t$scope.markCheck = true;\n\t    \t$scope.allType(firstflag);\n\t      \t$scope.allPriority(firstflag);\n\t      \t$scope.allMark(firstflag);\n\t      \tfirstflag = false;\n\t\t}\n\t\t//协作筛选状态被改变时触发\n\t\tif(!$scope.typeCheck ||!$scope.priorityCheck||!$scope.markCheck){\n\t\t\t$('.cop-filter').addClass('filter-active');\n\t\t}else{\n\t\t\t$('.cop-filter').removeClass('filter-active');\n\t\t}\n\n\t})\n\t\t//选择子公司关闭子公司列表弹框\n\t\t//$('.trent-branch ul li').click(function(){\n\t\t//\t$scope.branchList = false;\n\t\t//})\n\t\t//console.info($('.trent-branch ul li'))\n\n\t$scope.$on('ngRepeatFinishedDept',function(ngRepeatFinishedEvent){\n\n\t\tif(firstreackflag){\n\t\t\t//获取列表里面第一个项目部\n\t\t\tif(queryData.deptId && queryData.deptId!=0 && queryData.deptId!=-1){\n\t\t\t\t$(\"#deptbutton_\"+queryData.deptId).click();\n\t\t\t\t$(\"#deptbutton_\"+queryData.deptId).parent().addClass('menusActive');\n\t\t\t}else if(queryData.deptId==-1){\n\t\t\t\t$scope.deptIdToken = 1;\n\t\t\t\t$('#no-relate').click();\n\t\t\t\t$(\"#no-relate\").addClass('menusActive');\n\t\t\t}else if(queryData.deptId==0){\n\t\t\t\t$scope.deptIdToken = 1;\n\t\t\t\t$('#draft').click();\n\t\t\t\t$(\"#draft\").addClass('menusActive');\n\t\t\t}else{\n\t\t\t\t$(\"#deptbutton_\"+firstdeptid).click();\n\t\t\t\t$(\"#deptbutton_\"+firstdeptid).parent().addClass('menusActive');\n\t\t\t}\n\t\t\tfirstreackflag = false;\n\t\t}\n\n     $(\".manage-menus\").bind(\"click\", function(){\n                $(\"manage-menus\").removeClass(\"menusActive\");\n                //获取当前元素\n                $(this).addClass(\"menusActive\").siblings().removeClass(\"menusActive\");\n            });\n\t})\n\n\t\n\t//删除草稿箱的内容\n\t$scope.deleteProject = function(coid){\n\t\tlayer.confirm('是否删除该协作？', {\n\t\t\tbtn: ['是','否'] //按钮\n\t\t}, function(){\n\t\t\tlayer.closeAll();\n\t\t\tCooperation.removeDraft(coid).then(function(data){\n\t\t\t})\n\t\t\t$scope.drafts(0);\n\t\t});\n\n\t}\n\tvar token = false;\n   \t//点击工程获取协同列表\n   $scope.getCollaborationList = function (ppid) {\n\t   var createindex = layer.load(1, {\n\t\t   shade: [0.1,'#000'] //0.1透明度的黑色背景\n\t   });\n\t  if(queryData.ppid==ppid && queryData.modifyTimeCount != 1){\n\t\t  return;\n\t  }else{\n\t\t  if($scope.scrollend == true && queryData.ppid != ppid){\n        \t  token = true;\n          }\n\t\t  $scope.ppidToken = 0;\n\t\t  $scope.scrollend = false;\n          queryData.modifyTime = '';\n          queryData.modifyTimeCount = 0;\n\t  }\n\n      $scope.initScrollend(ppid);\n   \t  queryData.ppid = ppid;\n\t  $scope.typeStatStr=[];\n   \t  Cooperation.getCollaborationList(queryData).then(function (data) {\n   \t\t   $scope.cooperationList = data;\n   \t\t   $scope.ppidToken = 1;\n\t\t  layer.close(createindex)\n   \t  });\n   }\n    \n    //获取动态筛选列表\n    Cooperation.getCoQueryFilter().then(function (data) {\n    \t$scope.coQueryFilterList = data;\n    \tdata[0].list.shift();\n    \tdata[1].list.shift();\n    \tdata[2].list.shift();\n    \t$scope.coQueryType = data[0].list;\n    \t$scope.coPriority = data[2].list;\n    \t$scope.coMark = data[1].list;\n    });\n\n\tvar queryTypeSelected = [];\n\tvar queryPriorityselected = [];\n\tvar queryMarkSelected = [];\n    var updateSelected = function(action,id,type,index,signal){\n        var findIndex = _.findIndex(type, id);\n        if(action == 'add' && findIndex == -1){\n            type.push(id);\n       \t}\n        if(action == 'add') {\n            if(signal == 1) {\n                $('.bg' + index).removeClass('bg' + index).addClass('bgs' + index);\n            }\n        }\n        if(action == 'remove' && findIndex !=-1){\n            type.splice(findIndex,1);\n        }\n        if(action == 'remove'){\n            if(signal == 1) {\n                $('.bgs' + index).removeClass('bgs' + index).addClass('bg' + index);\n                $('#allTypeId').prop('checked',false);\n            }else if(signal == 2 ){\n            \t$('#allPriorityId').prop('checked',false); \n            }else if(signal == 3){\n            \t$('#allMarkId').prop('checked',false);\n            }\n        }else{\n        \t if(signal == 1) {\n        \t\t if($scope.coQueryType.length == type.length){\n        \t\t\t $('#allTypeId').prop('checked',true);\n        \t\t }\n             }else if(signal == 2 ){\n            \t if($scope.coPriority.length == type.length){\n            \t\t $('#allPriorityId').prop('checked',true); \n            \t }\n             }else if(signal == 3){\n            \t if($scope.coMark.length == type.length){\n            \t\t $('#allMarkId').prop('checked',true); \n            \t }\n             }\n        }\n     }\n    $scope.updateSelection = function($event,id,signal,index){\n    \tvar checkbox = $event.target;\n        var action = (checkbox.checked?'add':'remove');\n        var type;\n\t\tvar obj = {index:index, flag:checkbox.checked};\n        switch (signal) {\n        \tcase 1:\n        \t\ttype = queryTypeSelected;\n        \t\t$scope.checkboxSelsectType[index] = {index:index, checkbox:checkbox};\n        \t\tbreak;\n        \tcase 2:\n        \t\ttype = queryPriorityselected;\n        \t\t$scope.checkboxPriority[index] = {index:index, checkbox:checkbox};\n        \t\tbreak;\n        \tcase 3:\n        \t\ttype = queryMarkSelected;\n        \t\t$scope.checkboxMark[index] = {index:index, checkbox:checkbox};\n        \t\tbreak;\n        }\n        updateSelected(action,id,type,index,signal);\n    }\n    \n    $scope.isSelected = function(id){\n//    \tconsole.log(queryTypeSelected.indexOf(id));\n        return queryTypeSelected.indexOf(id)>=0;\n    }\n    //选中\n\tfunction isCheck(){\n\t\t$('.cop-filter').removeClass('filter-active');\n\t\t$(\".icon-sub\").attr(\"src\",'imgs/icon/funnel.png');\n\t}\n\t//非选中\n\tfunction isNotCheck(){\n\t\t$('.cop-filter').addClass('filter-active');\n\t\t$(\".icon-sub\").attr(\"src\",'imgs/icon/funnel-1.png');\n\t}\n    //alltype全选\n\t$scope.allType = function (firstflag) {\n\t\t$scope.checkboxSelsectType = new Array($scope.coQueryType.length);\n\t\tif(firstflag) {\n\t\t\toldSelsectType = new Array($scope.coQueryType.length);\n\t\t} else {\n\t\t\tfor(var i = 0; i<$scope.checkboxSelsectType.length;i++) {\n\t\t\t\t$scope.checkboxSelsectType[i] = $('.checkbox_type_' + i );\n\t\t\t}\n\t\t}\n\t\tif($scope.typeCheck) {\n\t\t\t$('.type-check').find('input').prop('checked',true);\n            queryTypeSelected = _.cloneDeep($scope.coQueryType);\n            for(var i=0;i<$scope.coQueryType.length;i++) {\n                $('.bg' + i).removeClass('bg' + i).addClass('bgs' + i);\n                if(firstflag) {\n                \tvar type = {name:$scope.coQueryType[i].name,flag:true};\n\t\t\t\t\toldSelsectType[i] = type;\n\t\t\t\t}\n            }\n\t\t} else {\n            for(var i=0;i<$scope.coQueryType.length;i++) {\n                $('.bgs' + i).removeClass('bgs' + i).addClass('bg' + i);\n                if(firstflag) {\n                \tvar type = {name:$scope.coQueryType[i].name,flag:false};\n\t\t\t\t\toldSelsectType[i] = type;\n\t\t\t\t}\n            }\n\t\t\t$('.type-check').find('input').prop('checked',false);\n\t\t\tqueryTypeSelected = [];\n\t\t}\n\t}\n\n\t//allPriority全选-优先级\n    $scope.allPriority = function (firstflag) {\n    \t$scope.checkboxPriority = new Array($scope.coPriority.length);\n    \tif(firstflag) {\n    \t\toldPriority = new Array($scope.coPriority.length);\n\t\t} else {\n\t\t\tfor(var i = 0; i<$scope.checkboxPriority.length;i++) {\n\t\t\t\t$scope.checkboxPriority[i] = $('.checkbox_priority_' + i );\n\t\t\t}\n\t\t}\n        $('.priority-check label').addClass('input-check');\n    \tif($scope.priorityCheck) {\n    \t\t$('.priority-check').find('input').prop('checked',true);\n    \t\tqueryPriorityselected = _.cloneDeep($scope.coPriority);\n    \t\tif(firstflag) {\n    \t\t\tfor(var i = 0;i<$scope.coPriority.length;i++){\n    \t\t\t\tvar type = {name:$scope.coPriority[i].name,flag:true};\n    \t\t\t\toldPriority[i] = type;\n    \t\t\t}\n    \t\t}\n\n    \t} else {\n    \t\t$('.priority-check').find('input').prop('checked',false);\n    \t\tqueryPriorityselected = [];\n    \t\tif(firstflag) {\n    \t\t\tfor(var i = 0;i<$scope.coPriority.length;i++){\n    \t\t\t\tvar type = {name:$scope.coPriority[i].name,flag:false};\n    \t\t\t\toldPriority[i] = type;\n    \t\t\t}\n    \t\t}\n    \t}\n    }\n\n    //marking标识全选\n    $scope.allMark = function (firstflag) {\n    \t$scope.checkboxMark = new Array($scope.coMark.length);\n    \tif(firstflag) {\n    \t\toldMark = new Array($scope.coMark.length);\n\t\t} else {\n\t\t\tfor(var i = 0; i<$scope.checkboxMark.length;i++) {\n\t\t\t\t$scope.checkboxMark[i] = $('.checkbox_mark_' + i );\n\t\t\t}\n\t\t}\n    \tif($scope.markCheck) {\n    \t\t$('.mark-check').find('input').prop('checked',true);\n    \t\tqueryMarkSelected = _.cloneDeep($scope.coMark);\n    \t\tif(firstflag) {\n    \t\t\tfor(var i=0;i<$scope.coMark.length;i++){\n    \t\t\t\tvar type = {name:$scope.coMark[i].name,flag:true};\n    \t\t\t\toldMark[i] = type;\n    \t\t\t}\n    \t\t}\n    \t} else {\n    \t\t$('.mark-check').find('input').prop('checked',false);\n    \t\tqueryMarkSelected = [];\n    \t\tif(firstflag) {\n    \t\t\tfor(var i=0;i<$scope.coMark.length;i++){\n    \t\t\t\tvar type = {name:$scope.coMark[i].name,flag:false};\n    \t\t\t\toldMark[i] = type;\n    \t\t\t}\n    \t\t}\n    \t}\n    }\n\n    //动态筛选-确定-按钮-搜索\n    $scope.filterOk = function () {\n\t\t$('.operation-mask').css('display','none')\n\t\tif($scope.markCheck && $scope.priorityCheck &&$scope.typeCheck){\n\t\t\tisCheck()\n\t\t}else{\n\t\t\tisNotCheck()\n\t\t}\n        $scope.isCollapsed = false;\n        $('.overlay').css('display','none');\n    \tvar groups = [];\n    \tvar type601Selected = [];\n    \tvar type602Selected = [];\n    \tvar type603Selected = [];\n\t\tfor(var i=0;i<oldSelsectType.length;i++) {\t// 确定时 新值覆盖旧值-协作类型\n\t\t\tvar oldName = oldSelsectType[i].name;\n\t\t\tfor(var j=0;j<queryTypeSelected.length;j++) {\n\t\t\t\tvar newName = queryTypeSelected[j].name;\n\t\t\t\tif(oldName == newName) {\n\t\t\t\t\toldSelsectType[i].flag = true;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\toldSelsectType[i].flag = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<oldPriority.length;i++) {\t// 确定时 新值覆盖旧值-优先级\n\t\t\tvar oldName = oldPriority[i].name;\n\t\t\tfor(var j=0;j<queryPriorityselected.length;j++) {\n\t\t\t\tvar newName = queryPriorityselected[j].name;\n\t\t\t\tif(oldName == newName) {\n\t\t\t\t\toldPriority[i].flag = true;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\toldPriority[i].flag = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfor(var i=0;i<oldMark.length;i++) {\t// 确定时 新值覆盖旧值-标识\n\t\t\tvar oldName = oldMark[i].name;\n\t\t\tfor(var j=0;j<queryMarkSelected.length;j++) {\n\t\t\t\tvar newName = queryMarkSelected[j].name;\n\t\t\t\tif(oldName == newName) {\n\t\t\t\t\toldMark[i].flag = true;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\toldMark[i].flag = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n    \tangular.forEach(queryTypeSelected,function (value, key) {\n\t\t\tvar unit = {};\n\t\t\tunit.type= 601;\n\t\t\tunit.value = {key:value.key};\n\t\t\ttype601Selected.push(unit);\n    \t});\n    \tangular.forEach(queryPriorityselected,function (value, key) {\n\t\t\tvar unit = {};\n\t\t\tunit.type= 602;\n\t\t\tunit.value = {key:value.key};\n\t\t\ttype602Selected.push(unit);\n    \t});\n    \tangular.forEach(queryMarkSelected,function (value, key) {\n    \t\tvar unit = {};\n    \t\tunit.type= 603;\n    \t\tunit.value = {key:value.key};\n    \t\ttype603Selected.push(unit);\n    \t});\n    \tgroups = groups.concat(type601Selected,type602Selected,type603Selected);\n    \tif(groups!=null&&groups.length>0){\n    \t\tqueryData.groups = groups;\n        \tqueryData.modifyTime = 0;\n        \tCooperation.getCollaborationList(queryData).then(function (data) {\n       \t\t\t$scope.cooperationList = data;\n       \t\t});\n    \t}else{\n    \t\t$scope.cooperationList = [];\n    \t}\n    \t\n    }\n\n    $scope.filterCancel = function () {\n\t\t$('.operation-mask').css('display','none')\n        $scope.isCollapsed = false;\n        $('.overlay').css('display','none');\n        \n\t\tvar typeLength = 0;\n\t\tfor(var i=0;i<oldSelsectType.length;i++) {\t// 取消时 旧值覆盖新值-协作类型(背景图片调整)\n\t\t\tif(oldSelsectType[i].flag){\t// 选中\n\t\t\t\t$('.bg' + i).removeClass('bg' + i).addClass('bgs' + i);\n\t\t\t\ttypeLength++;\n\t\t\t} else {\t// 没选中\n\t\t\t\t$('.bgs' + i).removeClass('bgs' + i).addClass('bg' + i);\n\t\t\t}\n\t\t\tfor(var j=0; j < $scope.checkboxSelsectType.length; j++) {\n\t\t\t\tif($scope.checkboxSelsectType[j] != undefined && i == j) {\n\t\t\t\t\t// 实际的checkbox选中状态\n\t\t\t\t\t$('.bg' + i  +' input, .bgs' + i  +' input' ).prop(\"checked\",oldSelsectType[i].flag);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 全选按钮样式\n\t\tif(oldSelsectType.length == typeLength){\n\t\t\t$('#allTypeId').prop('checked',true);\n\t\t} else {\n\t\t\t$('#allTypeId').prop('checked',false);\n\t\t}\n\t\t\n\t\tvar priorityLength = 0;\n\t\tfor(var i=0;i<oldPriority.length;i++) {\t// 取消时 旧值覆盖新值-优先级(背景调整)\n\t\t\tif(oldPriority[i].flag){\t// 选中\n\t\t\t\t$('.priority_' + i).attr(\"background\", \"#979ba8\");\n\t\t\t\tpriorityLength++;\n\t\t\t} else {\t// 没选中\n\t\t\t\t$('.priority_' + i).attr(\"background\", \"#fff\");\n\t\t\t}\n\t\t\tfor(var j=0; j < $scope.checkboxPriority.length; j++) {\n\t\t\t\tif($scope.checkboxPriority[j] != undefined && i == j) {\n\t\t\t\t\t// 实际的checkbox选中状态\n\t\t\t\t\t$('.checkbox_priority_' + i ).prop(\"checked\",oldPriority[i].flag);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 全选按钮样式\n\t\tif(oldPriority.length == priorityLength){\n\t\t\t$('#allPriorityId').prop('checked',true);\n\t\t} else {\n\t\t\t$('#allPriorityId').prop('checked',false);\n\t\t}\n\t\t\n\t\tvar markLength = 0;\n\t\tfor(var i=0;i<oldMark.length;i++) {\t// 取消时 旧值覆盖新值-标识(背景调整)\n\t\t\tif(oldMark[i].flag){\t// 选中\n\t\t\t\t$('.mark_' + i).attr(\"background\", \"#979ba8\");\n\t\t\t\tmarkLength++;\n\t\t\t} else {\t// 没选中\n\t\t\t\t$('.mark_' + i).attr(\"background\", \"#fff\");\n\t\t\t}\n\t\t\tfor(var j=0; j < $scope.checkboxMark.length; j++) {\n\t\t\t\tif($scope.checkboxMark[j] != undefined && i == j) {\n\t\t\t\t\t// 实际的checkbox选中状态\n\t\t\t\t\t$('.checkbox_mark_' + i ).prop(\"checked\",oldMark[i].flag);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 全选按钮样式\n\t\tif(oldMark.length == markLength){\n\t\t\t$('#allMarkId').prop('checked',true);\n\t\t} else {\n\t\t\t$('#allMarkId').prop('checked',false);\n\t\t}\n    }\n   \t//根据属性筛选\n   \t$scope.changeAttr = function () {\n   \t\tqueryData.searchType = parseInt($scope.coopattr);\n   \t\tqueryData.modifyTime = 0;\n   \t\tCooperation.getCollaborationList(queryData).then(function (data) {\n   \t\t\t$scope.cooperationList = data;\n   \t\t});\n   \t}\n\n   \t//根据搜索框搜索\n\t$scope.getCollaborationListFun = function(){\n\t\tqueryData.searchKey = $scope.searchkey;\n\t\tqueryData.modifyTime = 0;\n\t\tCooperation.getCollaborationList(queryData).then(function (data) {\n\t\t\t$scope.cooperationList = data;\n\t\t});\n\t}\n   \t$scope.inputSearch = function () {\n\t\tif(searId ==0){\n\t\t\tqueryData.deptId=0;\n\t\t\t$scope.getCollaborationListFun();\n\t\t}else if(searId ==-1){\n\t\t\tqueryData.deptId=-1;\n\t\t\t$scope.getCollaborationListFun();\n\t\t}else{\n\t\t\tif(queryData.deptId==\"\"){\n\t\t\t\tqueryData.deptId = firstdeptid;\n\t\t\t}\n\t\t\t$scope.getCollaborationListFun();\n\t\t}\n   \t}\n\t//\t按enter键进行筛选\n\t\t$scope.searchEnter = function(e){\n\t\t\tvar keyCode = e.keyCode|| e.which;\n\t\t\tif($('#exampleInputName1').val()!='' && keyCode==13){\n\t\t\t\t$scope.inputSearch();\n\t\t\t}else if($('#exampleInputName1').val()==''){\n\t\t\t\t$scope.cooperationList=[];\n\t\t\t\tif(searId==0){\n\t\t\t\t\tqueryData.deptId=searId;\n\t\t\t\t\t$scope.getCollaborationListFun()\n\t\t\t\t}else{\n\t\t\t\t\tif(queryData.deptId==\"\"){\n\t\t\t\t\t\tqueryData.deptId = firstdeptid;\n\t\t\t\t\t}\n\t\t\t\t\t$scope.getCollaborationListFun();\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t}\n\n\t$scope.getCoCountInfo=[];\n\tvar arr = [];\n\t$scope.arrString=[];\n\tvar priorityArr = [];\n\tvar arrCount =0;\n\n\tvar deadline = [];\n\t$scope.deadlineStr = [];\n\tvar timeLim =[];\n\tvar deadlineCount = 0;\n\n\tvar maker =[];\n\t$scope.makerStatStr = [];\n\tvar blankId = [];\n\tvar makerCount =0;\n\n\tvar typeStatNub = [];\n\t$scope.typeStatStr=[];\n\tvar coTypeObj = [];\n\tvar typeCount =0;\n\t\t$('.draft-box').css('display','none');\n\t//统计页面\n\tvar comboxCount = $(\"#comboBox_count\");\n\t$scope.comboxCount = function(){\n\t\t$(\".basic-project\").hide();\n\t\t$('.draft-box').hide();\n\t\t$(\" .data_count\").show();\n\t\t$scope.getCoTotal();\n\t}\n\t//$(\".data_back\").click(function(){\n\t////\talert(123)\n\t//\t$('.data_count').hide();\n\t//\t$('.draft-box').css('display','none');\n\t//})\n\t$scope.getCoTotal = function(){\n\t\t//图标内容大小自适应\n\n\n\t\tpriorityArr = [];\n\t\ttimeLim =[];\n\t\tblankId = [];\n\t\tcoTypeObj = [];\n\t\t$scope.arrString =[];\n\t\t$scope.deadlineStr =[];\n\t\t$scope.makerStatStr=[];\n\t\t$scope.typeStatStr=[];\n\t\t//$(\".data_count\").children().hide();\n\t\tif(!queryData.ppid){\n\t\t\tqueryData.ppid ='';\n\t\t}\n\t\tCooperation.getCoStatisticsInfo({deptId :queryData.deptId,ppid:queryData.ppid}).then(function(data){\n\t\t\t$scope.getCoCountInfo =data.data;\n\t\t\t//优先级\n\t\t\t$scope.priorityStat = data.data.priorityStat;\n\t\t\t//期限\n\t\t\t$scope.deadLineStat = data.data.deadLineStat;\n\t\t\t//标识\n\t\t\t$scope.makerStat = data.data.makerStat;\n\t\t\t//协作类型\n\t\t\t$scope.typeStat = data.data.typeStat;\n\t\t\t//判断返回的数据类型是空或者是NaN,如果是把对应的div给移除掉\n\t\t\t//判断返回数据是否为空\n\t\t\tfunction isEmpty(obj){\n\t\t\t\tfor(var key in obj){\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t}\n\t\t\t//判断数组的值是否为空\n\t\t\tfunction isEmptyArr(array){\n\t\t\t\tvar count = 0;\n\t\t\t\tfor(var i = 0;i<array.length;i++){\n\t\t\t\t\treturn  count +=array[i]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar isPriorityStat = isEmpty($scope.priorityStat);\n\t\t\tvar isDeadLineStat = isEmpty($scope.deadLineStat);\n\t\t\tvar isMakerStat = isEmpty($scope.makerStat);\n\t\t\tvar istypeStat = isEmpty($scope.typeStat);\n\t\t\tif(isPriorityStat){\n\t\t\t\t$(\"#data_graph\").parent().hide();\n\t\t\t}else{\n\t\t\t\t$(\"#data_graph\").parent().show();\n\t\t\t}\n\t\t\tif(isDeadLineStat){\n\t\t\t\t$(\"#data_graph2\").parent().hide();\n\t\t\t}else{\n\t\t\t\t$(\"#data_graph2\").parent().show();\n\t\t\t}\n\t\t\tif(isMakerStat){\n\t\t\t\t$(\"#data_graph3\").parent().hide();\n\t\t\t}else{\n\t\t\t\t$(\"#data_graph3\").parent().show();\n\t\t\t}\n\t\t\tif(istypeStat){\n\t\t\t\t$(\"#data_graph4\").parent().hide();\n\t\t\t}else{\n\t\t\t\t$(\"#data_graph4\").parent().show();\n\t\t\t}\n\t\t\t\t/*#E6D055  黄 III\n\t\t\t\t\t#5887FD 蓝 I\n\t\t\t\t\t#73CC6C 绿 II\n\t\t\t\t*/\n\t\t\t\tvar colorStyle1= [\"#5887FD\",\"#73CC6C\",\"#E6D055\"];\n\t\t\t\t// 数据清零\n\t\t\t\tarr = [];\n\t\t\t\tarrCount = 0;\n\t\t\t\t//优先级别\n\t\t\t\tvar statIndex = 0;\n\t\t\t\tangular.forEach( $scope.priorityStat, function (value, key) {\n\t\t\t\t\tarr.push(value);\n\t\t\t\t\t//页面优先级展示数据\n\t\t\t\t\tif((statIndex == 1) && key === \"III\") {\n\t\t\t\t\t\t$scope.arrString.push(\"II\");\n\t\t\t\t\t} else if((statIndex == 2) && key === \"II\") {\n\t\t\t\t\t\t$scope.arrString.push(\"III\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.arrString.push(key);\n\t\t\t\t\t}\n\t\t\t\t\tstatIndex++;\n\t\t\t\t})\n\n\t\t\t\tfor(var n in arr){\n\t\t\t\t\tarrCount += arr[n];\n\t\t\t\t}\n\t\t\t\tangular.forEach( $scope.priorityStat, function (value, key) {\n\t\t\t\t\tvar unit = {\n\t\t\t\t\t\tvalue:'',\n\t\t\t\t\t\tname:'',\n\t\t\t\t\t\titemStyle:{\n\t\t\t\t\t\t\tnormal:{\n\t\t\t\t\t\t\t\tcolor:''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tunit.value = value;\n\t\t\t\t\tif(isEmptyArr(arr)==0){\n\t\t\t\t\t\t//unit.name=value.toString();\n\t\t\t\t\t\t$(\"#data_graph\").parent().hide();\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$(\"#data_graph\").parent().show();\n//\t\t\t\t\t\tunit.name = parsePercent(value/arrCount);\n//\t\t\t\t\t\tunit.name = parseInt((value/arrCount)*100)+\"%\";\n\t\t\t\t\t\tunit.name = value;\n\t\t\t\t\t}\n\t\t\t\t\tunit.itemStyle.normal.color = '';\n\t\t\t\t\tpriorityArr.push(unit);\n\t\t\t\t});\n\t\t\t\t//循环数组给他添加颜色属性--优先级\n\t\t\t\tfor(var t= 0;t<priorityArr.length;t++){\n\t\t\t\t\tpriorityArr[t].itemStyle.normal.color  = colorStyle1[t];\n\t\t\t\t}\n\n\t\t\t\t// 数据清零\n\t\t\t\tdeadline = [];\n\t\t\t\tdeadlineCount = 0;\n\t\t\t\t//期限\n\t\t\t\tangular.forEach($scope.deadLineStat,function(val,key){\n\t\t\t\t\tdeadline.push(val);\n\t\t\t\t\t$scope.deadlineStr.push(key);\n\t\t\t\t})\n\t\t\t\tfor(var m in deadline){\n\t\t\t\t\tdeadlineCount += deadline[m];\n\t\t\t\t}\n\t\t\t\tangular.forEach($scope.deadLineStat,function(val,key){\n\t\t\t\t\tvar dataTime = {\n\t\t\t\t\t\tvalue:\"\",\n\t\t\t\t\t\tname:\"\",\n\t\t\t\t\t\titemStyle:{\n\t\t\t\t\t\t\tnormal:{\n\t\t\t\t\t\t\t\tcolor:\"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tdataTime.value= val;\n\t\t\t\t\tif(isEmptyArr(deadline)==0){\n\t\t\t\t\t\t //dataTime.name =val.toString()\n\t\t\t\t\t\t$(\"#data_graph2\").parent().hide();\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$(\"#data_graph2\").parent().show();\n//\t\t\t\t\t\tdataTime.name = parsePercent(val/deadlineCount);\n//\t\t\t\t\t\tdataTime.name=parseInt((val/deadlineCount)*100)+\"%\";\n\t\t\t\t\t\tdataTime.name=val;\n\t\t\t\t\t}\n\t\t\t\t\ttimeLim.push(dataTime);\n\t\t\t\t});\n\t\t\t\tfor(var a = 0;a<timeLim.length;a++){\n\t\t\t\t\ttimeLim[a].itemStyle.normal.color= colorStyle1[a]\n\t\t\t\t}\n\t\t\t\t// 数据清零\n\t\t\t\tmaker = [];\n\t\t\t\tmakerCount = 0;\n\n\t\t\t\t//标识\n\t\t\t\tangular.forEach($scope.makerStat,function(obj,key){\n\t\t\t\t\tmaker.push(obj.count);\n\t\t\t\t\tvar makerObj ={\n\t\t\t\t\t\t\tname:\"\",\n\t\t\t\t\t\t\tcolor:\"\"\n\t\t\t\t\t\t};\n\t\t\t\t\tmakerObj.name = key;\n\t\t\t\t\tmakerObj.color = obj.color;\n\t\t\t\t\t$scope.makerStatStr.push(makerObj);\n\n\t\t\t\t})\n\t\t\t\tfor(var i in maker){\n\t\t\t\t\tmakerCount += maker[i];\n\t\t\t\t}\n\t\t\t\tangular.forEach($scope.makerStat,function(obj,key){\n\t\t\t\t\tvar blank = {\n\t\t\t\t\t\tvalue:\"\",\n\t\t\t\t\t\tname:\"\",\n\t\t\t\t\t\titemStyle:{\n\t\t\t\t\t\t\tnormal:{\n\t\t\t\t\t\t\t\tcolor:\"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tblank.value =obj.count;\n\t\t\t\t\tblank.itemStyle.normal.color = obj.color;\n\t\t\t\t\tif(isEmptyArr(maker)==0){\n\t\t\t\t\t\t//blank.name = val.toString();\n\t\t\t\t\t\t$(\"#data_graph3\").parent().hide();\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$(\"#data_graph3\").parent().show();\n//\t\t\t\t\t\tblank.name = parsePercent(val/makerCount);\n//\t\t\t\t\t\tblank.name =parseInt((val/makerCount)*100)+\"%\";\n\t\t\t\t\t\tblank.name = obj.count;\n\t\t\t\t\t}\n\n\t\t\t\t\tblankId.push(blank);\n\t\t\t\t})\n\t\t\t\t/*for(var b = 0;b<blankId.length;b++){\n\t\t\t\t\tblankId[b].itemStyle.normal.color = colorStyle2[b];\n\n\t\t\t\t}*/\n\t\t\t\t// 数据清零\n\t\t\t\ttypeStatNub = [];\n\t\t\t\ttypeCount = 0;\n\t\t\t\t//协作类型\n\t\t\t\tangular.forEach($scope.typeStat,function(obj,key){\n\t\t\t\t\ttypeStatNub.push(obj.count);\n\t\t\t\t\tvar statObj ={\n\t\t\t\t\t\tname:\"\",\n\t\t\t\t\t\tcolor:\"\"\n\t\t\t\t\t};\n\t\t\t\t\tstatObj.name = key;\n\t\t\t\t\tstatObj.color = obj.color;\n\t\t\t\t\t$scope.typeStatStr.push(statObj);\n\t\t\t\t});\n\t\t\t\tfor(var k in typeStatNub){\n\t\t\t\t\ttypeCount += typeStatNub[k]\n\n\t\t\t\t}\n\t\t\t\tangular.forEach($scope.typeStat,function(obj,key){\n\t\t\t\t\tvar coType ={\n\t\t\t\t\t\tvalue:\"\",\n\t\t\t\t\t\tname:\"\",\n\t\t\t\t\t\titemStyle:{\n\t\t\t\t\t\t\tnormal:{\n\t\t\t\t\t\t\t\tcolor:\"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tcoType.value = obj.count;\n\t\t\t\t\tcoType.itemStyle.normal.color = obj.color;\n\t\t\t\t\tif(isEmptyArr(typeStatNub)==0){\n\t\t\t\t\t\t//coType.name =val.toString();\n\t\t\t\t\t\t$(\"#data_graph4\").parent().hide()\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$(\"#data_graph4\").parent().show();\n//\t\t\t\t\t\tcoType.name = parsePercent(val/typeCount);\n//\t\t\t\t\t\tcoType.name = parseInt((val/typeCount)*100)+\"%\";\n\t\t\t\t\t\tcoType.name = obj.count;\n\n\t\t\t\t\t}\n\t\t\t\t\tcoTypeObj.push(coType);\n\n\t\t\t\t});\n\t\t\t\t/*for(var c= 0;c<coTypeObj.length;c++){\n\t\t\t\t\tcoTypeObj[c].itemStyle.normal.color = colorStyle2[c];\n\t\t\t\t}*/\n\t\t\tvar myChart1 = echarts.init(document.getElementById('data_graph'));\n\t\t\t\t//标识统计\n\t\t\tvar option1 = {\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\tlabelLine: {\n\t\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\tradius: ['40%', '60%'],\n\t\t\t\t\t\tdata:priorityArr\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\t\tmyChart1.setOption(option1);\n\n\t\t\t\t//\t第二部分\n\t\t\tvar myChart2 = echarts.init(document.getElementById('data_graph2'));\n\t\t\tvar option2 = {\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\tlabelLine: {\n\t\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\tradius: ['40%', '60%'],\n\t\t\t\t\t\tdata:timeLim\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\t\t\t// 使用刚指定的配置项和数据显示图表。\n\t\t\t\tmyChart2.setOption(option2);\n\t\t\t//图标内容大小自适应\n\t\t\t//window.onresize = myChart2.resize;\n\t\t\t\t//图形绘制\n\t\t\tvar myChart3 = echarts.init(document.getElementById('data_graph3'));\n\t\t\t\t// 指定图表的配置项和数据\n\t\t\t\t//\t\t\tapp.title = '环形图';\n\t\t\tvar option3 = {\n\t\t\t\tseries: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\tlabelLine: {\n\t\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\tradius: ['40%', '60%'],\n\t\t\t\t\t\tdata:blankId\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\t\t// 使用刚指定的配置项和数据显示图表。\n\t\t\t\tmyChart3.setOption(option3);\n\t\t\t//图标内容大小自适应\n\t\t\t//\twindow.onresize = myChart3.resize;\n\t\t\t\t//图形绘制\n\t\t\t\tvar myChart4 = echarts.init(document.getElementById('data_graph4'));\n\t\t\t\tvar option4 = {\n\t\t\t\t\tseries: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\t\tlabelLine: {\n\t\t\t\t\t\t\t\tnormal: {\n\t\t\t\t\t\t\t\t\tshow: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype:'pie',\n\t\t\t\t\t\t\tradius: ['40%', '60%'],\n\t\t\t\t\t\t\tdata:coTypeObj\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t\t// 使用刚指定的配置项和数据显示图表。\n\t\t\t\tmyChart4.setOption(option4);\n\t\t\t//图标内容大小自适应\n\t\t\t//window.onresize = myChart4.resize;\n\t\t\twindow.onresize = function(){\n\t\t\t\t//alert(1)\n\t\t\t\tmyChart1.resize();\n\t\t\t\tmyChart2.resize();\n\t\t\t\tmyChart3.resize();\n\t\t\t\tmyChart4.resize();\n\t\t\t}\n\t\t\t})\n\n\t\t}\n\n    //跳转详情\n    $scope.transCoDetail = function(currentItem) {\n         $state.go('coopdetail',{'coid':currentItem.coid},{ location:'replace'});\n    }\n\n    //判断是否是从be过来的发起协作\n    if(urlParams.newcoop == 'frombe'){\n      $timeout(function() {\n                    $('.new_cooper').click();\n                });\n      \n    }\n\t\t//服务器时间\n\t\t$scope.currentTime= function(){\n\t\t\tCooperation.getTrendsSystem({sysTime:\"\",sysWeek:\"\"}).then(function(data){\n\t\t\t\t$scope.serviceTime = data.data;\n\t\t\t})\n\t\t}\n\t\t$scope.currentTime();\n\t\tif($stateParams.transignal == 'be') {\n\t    \t$scope.openNew();\n\t\t}\n\n\t\t//编辑协作跳转\n\t   \t $scope.allowEditTrans = function (item) {\n//\t   \t \tif($scope.allowEdit) {\n\t   \t \t\tCooperation.checkOut(item.coid).then(function(data) {\t\n\t   \t \t\t});\n\t   \t \t\t/*Cooperation.getCollaboration(item.coid).then(function (data) {\n\t   \t \t\t\t$scope.collaList = data;\n\t   \t \t\t});*/\n\t   \t \t\t//跳转主页面需要定位到当前工程（延后再说）\n//\t   \t \t\t$state.go('cooperation', {coid: item.coid});\n//\t   \t \t\t$state.go('cooperation',{'deptId':0,'status':'草稿箱'},{ location: 'replace'});\n//\t   \t \t} else {\n//\t   \t \t\tvar r=confirm(\"当前协作已结束，不允许再操作\");\n//\t   \t \t}\n\n\t   \t }\n\t\t//分公司列表\n\t\t$scope.branchType = function(){\n\t\t\t$scope.branchList = false;\n\t\t}\n\t\t\n\t\t$scope.$on(\"ngRepeatFinished\",function(ngRepeatFinishedEvent){\n\t\t\t// 页面渲染完成后 设置左侧sidebar的高度\n\t\t\t$(\".sidebar\").css(\"height\", document.documentElement.clientHeight-$(\"header\").height()-2);\n\t    })\n\t}]);\n\n$(window).resize(function () {          //当浏览器大小变化时\n\t// 设置左侧sidebar的高度\n\t$(\".sidebar\").css(\"height\", document.documentElement.clientHeight-$(\"header\").height()-2);\n});\n/**\n * 拼接百分数 结果： xx.xx%\n * @param number\n * @returns {String}\n */\nfunction parsePercent(number) {\n\tvar persent = number*10000;\n\tvar strName = parseInt(persent)+\"\";\n\tvar length = strName.length;\n\tvar integer = strName.substr(0,length - 2);\n\tvar decimal = strName.substr(length - 2, length);\n\tif(integer === \"\") {\n\t\tinteger = \"0\";\n\t}\n\tif(decimal === \"\") {\n\t\treturn integer+\"%\";\n\t}\n\treturn integer+\".\"+decimal+\"%\";\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/cooperation.ctrl.js\n ** module id = 25\n ** module chunks = 1\n **/","'use strict';\n/**\n * 新建协作\n */\nangular.module('cooperation').controller('newcoopreationCtrl', ['$scope', '$http', '$uibModal','$httpParamSerializer','FileUploader','Cooperation','$state','$stateParams','Common','Manage','$sce','alertService','headerService',\n    function ($scope, $http, $uibModal, $httpParamSerializer,FileUploader,Cooperation,$state,$stateParams,Common,Manage,$sce,alertService,headerService) {\n    //默认值\n    console.log($stateParams,'$stateParams');\n\t$scope.typeName = $stateParams.typename;\n\t\t//console.log($stateParams.typename,'$stateParams.typeid')\n    $scope.isDoc = false; //是否是doc\n    $scope.priority = '1'; //优先级\n    $scope.flag = {};\n    $scope.linkOpenSignal = true; \n    $scope.linkProject1 =false;\n    $scope.linkComponent1 = false;\n    $scope.linkCategoty1 =false;\n    $scope.data = {};\n    $scope.link = {};\n    $scope.desc = '';\n\t$scope.isClick = true;//启用编辑按钮是否被按下\n\t$scope.responsiblePerson = {};//重组负责人\n\t$scope.createUser = {};\n\t\n//    console.log($stateParams.typeid);\n   \t//获取当前用户信息\n   \t//$.ajax({\n\t //   type: \"get\",\n\t //   url: basePath+'rs/co/currentUser',\n\t //   contentType:'application/json',\n\t //   success: function(data){\n\t //   \t$scope.responsiblePerson = data;\n\t //   }\n    //});\n    if($stateParams.deptId!=-1&&$stateParams.deptId!=0){\n    \tvar currentdeptId = $stateParams.deptId?$stateParams.deptId:'';\n    \tvar currentppid  = $stateParams.ppid?$stateParams.ppid:'';\n    }\n\n\theaderService.currentUserInfo().then(function(data){\n\t\t$scope.responsiblePerson.username = data.userName;\n\t\t$scope.responsiblePerson.avatar = data.avatarUrl;\n\t\t$scope.createUser = $scope.responsiblePerson;\n\t\tvar relateUser = {};\n\t\trelateUser.username = data.userName;\n\t\trelateUser.avatar = data.avatarUrl;\n\t\trelateUser.mustExist = true;\n\t\trelateUser.canSign = true;\n\t\t$scope.related.noSign[0]=relateUser;\n\t})\n\t\n\t\n\tArray.prototype.del=function(n) {\n\t\tif(n<0)\n\t\t\treturn this;\n\t\telse\n\t\t\treturn this.slice(0,n).concat(this.slice(n+1,this.length));\n};\n\t\n    //选择负责人\n    $scope.selectResponsible = function () {\n    \t//alert('111');\n    \tvar modalInstance = $uibModal.open({\n\t\t\twindowClass: 'select-person-responsible-modal',\n    \t\tbackdrop : 'static',\n    \t\ttemplateUrl: 'template/cooperation/select_person_responsible.html',\n    \t\tcontroller:'selectpersonCtrl',\n    \t\tresolve:{\n    \t\t\titems: function () {\n    \t\t\t\treturn [];\n    \t\t\t}\n    \t\t}\n    \t});\n    \tmodalInstance.result.then(function (selectedItem) {\n    \t\tvar responsiblePersonName = $scope.responsiblePerson.username;\n    \t\t//如果选择的用户和负责人一样，什么都不做\n    \t\tif(responsiblePersonName == selectedItem.username) {\n    \t\t\treturn;\n    \t\t}\n    \t\t//查询原先负责人在相关人中的位置\n    \t\tvar signIndex = null;\n    \t\tvar noSignIndex = null;\n    \t\tfor(var i = 0;i < $scope.related.sign.length;i++) {\t\n    \t\t\tif($scope.related.sign[i].username == responsiblePersonName){\n    \t\t\t\tsignIndex = i;\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\tfor(var i = 0;i < $scope.related.noSign.length;i++) {\t\n    \t\t\tif($scope.related.noSign[i].username == responsiblePersonName){\n    \t\t\t\tnoSignIndex = i;\n    \t\t\t\tbreak;\n    \t\t\t}\n    \t\t}\n    \t\t\n\t\t\t//如果相关人里面有选择的用户，需要把原先的负责人删除\n    \t\tfor(var i = 0;i < $scope.related.sign.length;i++) {\t// TODO\n\t\t\t\tif($scope.related.sign[i].username == selectedItem.username){\n\t\t    \t\tif((signIndex != null) && (responsiblePersonName != $scope.createUser.username)){\n\t\t    \t\t\t$scope.related.sign = $scope.related.sign.del(signIndex);\n\t\t    \t\t}\n\t\t    \t\tif(noSignIndex != null && (responsiblePersonName != $scope.createUser.username)){\n\t\t    \t\t\t$scope.related.noSign = $scope.related.noSign.del(noSignIndex);\n\t\t    \t\t}\n\t\t\t\t\t$scope.responsiblePerson = selectedItem;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0;i < $scope.related.noSign.length;i++) {\n\t\t\t\tif($scope.related.noSign[i].username == selectedItem.username){\n\t\t\t\t\tif(signIndex != null){\n\t\t\t\t\t\t$scope.related.sign = $scope.related.sign.del(signIndex);\n\t\t    \t\t}\n\t\t    \t\tif(noSignIndex != null){\n\t\t    \t\t\t$scope.related.noSign = $scope.related.noSign.del(noSignIndex);\n\t\t    \t\t}\n\t\t\t\t\t$scope.responsiblePerson = selectedItem;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n    \t\t\n\t\t\tfor(var i = 0;i < $scope.related.sign.length;i++) {\t// TODO\n\t\t\t\tif(($scope.related.sign[i].username == responsiblePersonName)&&(responsiblePersonName != $scope.createUser.username)){\n\t\t\t\t\t$scope.related.sign[i] = selectedItem;\n\t\t\t\t\t$scope.responsiblePerson = selectedItem;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0;i < $scope.related.noSign.length;i++) {\n\t\t\t\tif(($scope.related.noSign[i].username == responsiblePersonName)&&(responsiblePersonName != $scope.createUser.username)){\n\t\t\t\t\t$scope.related.noSign[i] = selectedItem;\n\t\t\t\t\t$scope.responsiblePerson = selectedItem;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t$scope.related.noSign[$scope.related.noSign.length] = selectedItem;\n\t\t\t$scope.responsiblePerson = selectedItem;\n    \t});\n    }\n    //选择相关人\n    $scope.related = {\n    \tsign:[],\n\t\tnoSign:[]\n    };\n\tvar num;\n    var contracts = [];\n    $scope.selectRelated = function () {\n    \tvar modalInstance = $uibModal.open({\n\t\t\twindowClass: 'select-person-related-modal',\n    \t\tbackdrop : 'static',\n\t\t\tsize:'lg',\n    \t\ttemplateUrl: 'template/cooperation/select_person_related.html',\n    \t\tcontroller:'selectpersonCtrl',\n    \t\tresolve:{\n    \t\t\titems: function () {\n    \t\t\t\tfor(var i=0;i<$scope.related.sign.length;i++){\n    \t\t\t\t\tif($scope.related.sign[i].username == $scope.responsiblePerson.username){\n    \t\t\t\t\t\t$scope.related.sign[i].mustExist = true;\n    \t\t\t\t\t}\n    \t\t\t\t\t$scope.related.sign[i].canSign = true;\n    \t\t\t\t}\n    \t\t\t\tfor(var i=0;i<$scope.related.noSign.length;i++){\n    \t\t\t\t\tif($scope.related.noSign[i].username == $scope.responsiblePerson.username){\n    \t\t\t\t\t\t$scope.related.noSign[i].mustExist = true;\n    \t\t\t\t\t}\n    \t\t\t\t\t$scope.related.noSign[i].canSign = true;\n    \t\t\t\t}\n    \t\t\t\treturn $scope.related;\n    \t\t\t}\n    \t\t}\n    \t});\n    \tmodalInstance.result.then(function (selectedItem) {\n    \t\t$scope.related.noSign = selectedItem.noSign;\n    \t\t$scope.related.sign = selectedItem.sign;\n    \t\tangular.forEach(selectedItem.noSign, function (value ,key) {\n    \t\t\tvar needSign = false;\n    \t\t\tvar a = {}\n    \t\t\ta.needSign = needSign;\n    \t\t\ta.username = value.username;\n    \t\t\tcontracts.push(a);\n    \t\t});\n    \t\tangular.forEach(selectedItem.sign, function (value ,key) {\n    \t\t\tvar needSign = true;\n    \t\t\tvar a = {}\n    \t\t\ta.needSign = needSign;\n    \t\t\ta.username = value.username;\n    \t\t\tcontracts.push(a);\n    \t\t});\n    \t});\n    }\n\t\tif(!$scope.responsiblePerson){\n\t\t\t$scope.responsiblePerson='创建人';\n\t\t}\n\n //    $scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n //    \tdebugger;\n //    \t    $('.identify').addClass('selectpicker');\n\t// \t\t$('.selectpicker').selectpicker({\n\t// \t\t  \tstyle: 'btn-default',\n\t// \t\t  \tsize: 'auto'\n\t// \t\t});\n\t// });\n\n    //获取标识\n    Cooperation.getMarkerList().then(function (data) {\n    \t$scope.markerList = data;\n//    \tconsole.log($scope.markerList);\n    \t$scope.mark = $scope.markerList[0].markerId+'';\n    });\n\n    $scope.switchMark = function() {\n    \tconsole.log($scope.mark);\n    }\n\n    //与工程关联\n    $scope.data.bindType = 0;\n    var deptId;\n\tvar modalInstance;\n\t\tfunction isDelete(num){\n\t\t\tif($scope.linkProject1 ||$scope.linkComponent1 ||$scope.linkCategoty1){\n\t\t\t\tlayer.confirm('您已关联的模型,是否重新关联？', {\n\t\t\t\t\tbtn: ['是','否'] //按钮\n\t\t\t\t}, function(){\n\t\t\t\t\tlayer.closeAll();\n\t\t\t\t\tif($scope.linkProject1 ){\n\t\t\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\t\t\twindowClass: 'link-project-modal',\n\t\t\t\t\t\t\tbackdrop : 'static',\n\t\t\t\t\t\t\ttemplateUrl: 'template/cooperation/link_project.html',\n\t\t\t\t\t\t\tcontroller:'linkprojectCtrl'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalInstance.result.then(function (dataList) {\n\t\t\t\t\t\t\t//关联工程页面显示的值\n\t\t\t\t\t\t\t$scope.link.linkProjectName = dataList.linkProjectSelected.name;\n\t\t\t\t\t\t\t$scope.link.linkProjectDptName = dataList.parentNode.name;\n\t\t\t\t\t\t\tif($scope.link.linkProjectDptName ){\n\t\t\t\t\t\t\t\t$(\".new-del\").show();\n\t\t\t\t\t\t\t\t$scope.data.bindType = 1;\n\t\t\t\t\t\t\t\t$scope.linkProject1 = true;\n\t\t\t\t\t\t\t\t$scope.linkComponent1 = false;\n\t\t\t\t\t\t\t\t$scope.linkCategoty1 =false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//传给服务器的两个值\n\t\t\t\t\t\t\t$scope.data.assembleLps = dataList.assembleLps;\n\t\t\t\t\t\t\t$scope.data.ppid = dataList.assembleLps[0].ppid;\n\t\t\t\t\t\t\t$scope.data.deptId = dataList.parentNode.value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else if($scope.linkComponent1 ){\n\t\t\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\t\t\twindowClass:'link-component-modal',\n\t\t\t\t\t\t\tbackdrop : 'static',\n\t\t\t\t\t\t\ttemplateUrl: 'template/cooperation/link_component.html',\n\t\t\t\t\t\t\tcontroller:'linkcomponentCtrl'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalInstance.result.then(function (dataList) {\n\t\t\t\t\t\t\t//面显示的值\n\t\t\t\t\t\t\t$scope.link.linkProjectDptName = dataList.parentNode.name;\n\t\t\t\t\t\t\t$scope.link.linkProjectName = dataList.linkProjectSelected.name;\n\t\t\t\t\t\t\t//传给服务器的两个值\n\t\t\t\t\t\t\t$scope.data.assembleLps = dataList.assembleLps;\n\t\t\t\t\t\t\t$scope.data.deptId = dataList.parentNode.value;\n\t\t\t\t\t\t\t$scope.data.ppid = dataList.assembleLps[0].ppid;\n\t\t\t\t\t\t\tif($scope.link.linkProjectDptName ){\n\t\t\t\t\t\t\t\t$(\".new-del\").show();\n\t\t\t\t\t\t\t\t$scope.data.bindType = 2;\n\t\t\t\t\t\t\t\t$scope.linkProject1 = false;\n\t\t\t\t\t\t\t\t$scope.linkComponent1 = true;\n\t\t\t\t\t\t\t\t$scope.linkCategoty1 =false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}else if($scope.linkCategoty1){\n\t\t\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\t\t\twindowClass:'link-categoty-modal',\n\t\t\t\t\t\t\tbackdrop : 'static',\n\t\t\t\t\t\t\ttemplateUrl: 'template/cooperation/link_component_category.html',\n\t\t\t\t\t\t\tcontroller:'linkprojectCtrl'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalInstance.result.then(function (dataList) {\n\t\t\t\t\t\t\t//关联工程页面显示的值\n\t\t\t\t\t\t\t$scope.link.linkProjectName = dataList.linkProjectSelected.name;\n\t\t\t\t\t\t\t$scope.link.linkProjectDptName = dataList.parentNode.name;\n\t\t\t\t\t\t\t$scope.linkProjectSelected = dataList.selectedCategory;\n\t\t\t\t\t\t\t//传给服务器的两个值\n\t\t\t\t\t\t\t$scope.data.assembleLps = dataList.assembleLps;\n\t\t\t\t\t\t\t$scope.data.deptId = dataList.parentNode.value;\n\t\t\t\t\t\t\t$scope.data.ppid = dataList.assembleLps[0].ppid;\n\t\t\t\t\t\t\tconsole.log('ppid',dataList.assembleLps.ppid);\n\t\t\t\t\t\t\tif($scope.link.linkProjectDptName ){\n\t\t\t\t\t\t\t\t$scope.data.bindType = 3;\n\t\t\t\t\t\t\t\t$(\".new-del\").show();\n\t\t\t\t\t\t\t\t$scope.linkProject1 = false;\n\t\t\t\t\t\t\t\t$scope.linkComponent1 = false;\n\t\t\t\t\t\t\t\t$scope.linkCategoty1 =true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},function(){\n\t\t\t\t\treturn;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tif(num==1){\n\t\t\t\t\tlayer.closeAll();\n\t\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\t\twindowClass: 'link-project-modal',\n\t\t\t\t\t\tbackdrop : 'static',\n\t\t\t\t\t\ttemplateUrl: 'template/cooperation/link_project.html',\n\t\t\t\t\t\tcontroller:'linkprojectCtrl',\n\t\t\t\t\t});\n\t\t\t\t\tmodalInstance.result.then(function (dataList) {\n\t\t\t\t\t\t//关联工程页面显示的值\n\t\t\t\t\t\t$scope.link.linkProjectName = dataList.linkProjectSelected.name;\n\t\t\t\t\t\t$scope.link.linkProjectDptName = dataList.parentNode.name;\n\t\t\t\t\t\tif($scope.link.linkProjectDptName ){\n\t\t\t\t\t\t\t$(\".new-del\").show();\n\t\t\t\t\t\t\t$scope.data.bindType = 1;\n\t\t\t\t\t\t\t$scope.linkProject1 = true;\n\t\t\t\t\t\t\t$scope.linkComponent1 = false;\n\t\t\t\t\t\t\t$scope.linkCategoty1 =false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//传给服务器的两个值\n\t\t\t\t\t\t$scope.data.assembleLps = dataList.assembleLps;\n\t\t\t\t\t\t$scope.data.ppid = dataList.assembleLps[0].ppid;\n\t\t\t\t\t\t$scope.data.deptId = dataList.parentNode.value;\n\t\t\t\t\t});\n\t\t\t\t}else if(num ==2){\n\t\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\t\twindowClass:'link-component-modal',\n\t\t\t\t\t\tbackdrop : 'static',\n\t\t\t\t\t\ttemplateUrl: 'template/cooperation/link_component.html',\n\t\t\t\t\t\tcontroller:'linkcomponentCtrl'\n\t\t\t\t\t});\n\t\t\t\t\tmodalInstance.result.then(function (dataList) {\n\t\t\t\t\t\t//面显示的值\n\t\t\t\t\t\t$scope.link.linkProjectDptName = dataList.parentNode.name;\n\t\t\t\t\t\t$scope.link.linkProjectName = dataList.linkProjectSelected.name;\n\t\t\t\t\t\t//传给服务器的两个值\n\t\t\t\t\t\t$scope.data.assembleLps = dataList.assembleLps;\n\t\t\t\t\t\t$scope.data.deptId = dataList.parentNode.value;\n\t\t\t\t\t\t$scope.data.ppid = dataList.assembleLps[0].ppid;\n\t\t\t\t\t\tif($scope.link.linkProjectDptName ){\n\t\t\t\t\t\t\t$(\".new-del\").show();\n\t\t\t\t\t\t\t$scope.data.bindType = 2;\n\t\t\t\t\t\t\t$scope.linkProject1 = false;\n\t\t\t\t\t\t\t$scope.linkComponent1 = true;\n\t\t\t\t\t\t\t$scope.linkCategoty1 =false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}else if(num ==3){\n\t\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\t\twindowClass:'link-categoty-modal',\n\t\t\t\t\t\t\tbackdrop : 'static',\n\t\t\t\t\t\t\ttemplateUrl: 'template/cooperation/link_component_category.html',\n\t\t\t\t\t\t\tcontroller:'linkprojectCtrl'\n\t\t\t\t\t\t});\n\t\t\t\t\tmodalInstance.result.then(function (dataList) {\n\t\t\t\t\t\t//关联工程页面显示的值\n\t\t\t\t\t\t$scope.link.linkProjectName = dataList.linkProjectSelected.name;\n\t\t\t\t\t\t$scope.link.linkProjectDptName = dataList.parentNode.name;\n\t\t\t\t\t\t$scope.linkProjectSelected = dataList.selectedCategory;\n\t\t\t\t\t\t//传给服务器的两个值\n\t\t\t\t\t\t//debugger\n\t\t\t\t\t\t$scope.data.assembleLps = dataList.assembleLps;\n\t\t\t\t\t\t$scope.data.deptId = dataList.parentNode.value;\n\t\t\t\t\t\t$scope.data.ppid = dataList.assembleLps[0].ppid;\n\t\t\t\t\t\tconsole.log('ppid',dataList.assembleLps.ppid);\n\t\t\t\t\t\tif($scope.link.linkProjectDptName ){\n\t\t\t\t\t\t\t$scope.data.bindType = 3;\n\t\t\t\t\t\t\t$(\".new-del\").show();\n\t\t\t\t\t\t\t$scope.linkProject1 = false;\n\t\t\t\t\t\t\t$scope.linkComponent1 = false;\n\t\t\t\t\t\t\t$scope.linkCategoty1 =true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    $scope.linkProject = function () {\n\t\tisDelete(1);\n    }\n    //与图上构件关联\n    $scope.linkComponent = function () {\n\t\tisDelete(2);\n    }\n    //与图上构件类别关联\n    $scope.linkCategoty = function () {\n\t\tisDelete(3);\n    }\n    //删除关联\n    $scope.removeLink = function () {\n\t\tif($scope.link.linkProjectName) {\n\t\t\tlayer.confirm('您已关联了模型，是否删除关联？', {\n\t\t\t\tbtn: ['是','否'] //按钮\n\t\t\t}, function(){\n\t\t\t\t$scope.linkProject1 = false;\n\t\t\t\t$scope.linkComponent1 = false;\n\t\t\t\t$scope.linkCategoty1 =false;\n\t\t\t\t$scope.data = {};\n\t\t\t\t$scope.data.bindType = 0;\n\t\t\t\tlayer.closeAll();\n\t\t\t\t$scope.$apply();\n\t\t\t});\n\t\t}\n    }\n\n\t$scope.docSelectedList =[];\n\t$scope.formSelectedList = [];\n\tvar typeArr = ['txt','doc','pdf','ppt','docx','xlsx','xls','pptx','jpeg','bmp','PNG','GIF','JPG','png','jpg','gif','dwg','rar','zip','avi','mp4','mov','flv','swf','wmv','mpeg','mpg','mp3'];\n\t//引用BE资料\n\t$scope.linkBe = function () {\n\t\t$scope.beSourceType = 1;\n\t\t$scope.flag.isleast = false;\n\t\tvar modalInstance = $uibModal.open({\n\t\t\twindowClass: 'link-be-modal',\n\t\t\tbackdrop : 'static',\n    \t\ttemplateUrl: 'template/cooperation/linkbe.html',\n    \t\tcontroller:'linkbeCtrl',\n    \t\tresolve: {\n    \t\t\titems: function() {\n    \t\t\t\treturn $scope.docSelectedList;\n    \t\t\t}\n    \t\t}\n\t\t});\n\t\tmodalInstance.result.then(function (selectedItem1) {\n    \t\tvar imgsrc = \"imgs/pro-icon/icon-\";\n    \t\tvar unit = '';\n    \t\tangular.forEach(selectedItem1,function(value,key){\n    \t\t\tif(typeArr.indexOf(value.fileType)!=-1){\n    \t\t\t\tunit = value.fileType;\n    \t\t\t} else {\n    \t\t\t\tunit = 'other';\n    \t\t\t}\n    \t\t\tselectedItem1[key].imgSrc= imgsrc + unit + \".png\";\n    \t\t})\n    \t\t$scope.docSelectedList = selectedItem1;\n\t\t\t//console.info('养你一辈子你要和果汁',$scope.docSelectedList)\n\t\t\tconsole.info('$scope.docSelectedList',$scope.docSelectedList.length)\n    \t});\n\t}\n\t//选择表单\n\t$scope.linkForm = function () {\n\t\t$scope.formSourceType = 2;\n\t\t$scope.flag.isleast = false;\n\t\tvar modalInstance = $uibModal.open({\n\t\t\twindowClass: 'link-form-modal',\n\t\t\tbackdrop : 'static',\n    \t\ttemplateUrl: 'template/cooperation/linkform.html',\n    \t\tcontroller:'linkformCtrl',\n    \t\tresolve: {\n    \t\t\titems: function () {\n    \t\t\t\tvar trans = {\n    \t\t\t\t\ttypeid:$stateParams.typeid,\n    \t\t\t\t\tformSelectedList:$scope.formSelectedList\n    \t\t\t\t}\n    \t\t\t\treturn trans;\n    \t\t\t}\n    \t\t}\n\t\t});\n\t\tmodalInstance.result.then(function (selectedItem2) {\n    \t\t$scope.formSelectedList = selectedItem2;\n    \t\tconsole.log(\"$scope.formSelectedList\",$scope.formSelectedList.length);\n    \t});\n\t}\n\t//选择表单勾选之后需要签字的文件\n\t// var formNeedSignList = [];\n\t// var updateSelected = function(action,id,name){\n //        if(action == 'add' && formNeedSignList.indexOf(id) == -1){\n //           formNeedSignList.push(id);\n //       \t}\n //         if(action == 'remove' && formNeedSignList.indexOf(id)!=-1){\n //            var idx = formNeedSignList.indexOf(id);\n //            formNeedSignList.splice(idx,1);\n //         }\n //     }\n\n //    $scope.updateSelection = function($event, id){\n //        var checkbox = $event.target;\n //        var action = (checkbox.checked?'add':'remove');\n //        updateSelected(action,id,checkbox.name);\n //        angular.forEach($scope.formSelectedList, function (value, key) {\n\t// \t\tangular.forEach(formNeedSignList, function (value1, key1) {\n\t// \t\t\tif(value == value1) {\n\t// \t\t\t\tvalue.needSign = true;\n\t// \t\t\t\t$scope.formSelectedList.splice(key,1,value);\n\t// \t\t\t}\n\t// \t\t})\n\t// \t});\n\t// \tconsole.log($scope.formSelectedList);\n //    }\n\t//\t删除be照片\n\t\t$scope.removePhoto = function(item){\n\t\t\t_.pull($scope.uploader.queue,item);\n\t\t}\n\t//删除be资料\n\t$scope.removeDoc = function (items) {\n\t\t//lodash删除数组中对象\n\t\t_.pull($scope.docSelectedList,items);\n\t}\n\t//删除表单资料\n\t$scope.removeForm = function (items) {\n\t\t//lodash删除数组中对象\n\t\t_.pull($scope.formSelectedList,items);\n\t}\n\t//上传照片\n    var uploader = $scope.uploader = new FileUploader({\n            url: '/bimco/fileupload/upload.do'\n   \t\t\t// queueLimit: 30\n\t});\n    // FILTERS\n    var picturesUploadList = [];\n    var docsUploadList = [];\n    $scope.flag.docsRepeatMind = false; //图片上传超过30个防止多次提醒\n    $scope.flag.pictrueRepeatMind = false;//资料上传超过30个防止多次提醒\n    uploader.filters.push({\n        name: 'imageFilter',\n        fn: function(item /*{File|FileLikeObject}*/, options) {\n            var type = '|' + item.type.slice(item.type.lastIndexOf('/') + 1) + '|';\n            picturesUploadList.push(item);\n            if(picturesUploadList.length > 30){\n            \t// alertService.add('time-bottom',\"上传照片不能多于30个！\");\n            \tif(!$scope.flag.pictrueRepeatMind){\n            \t\t// alert(\"上传资料不能多于30个！\")\n            \t\t// alertService.add('time-bottom','上传照片不能多于30个！')\n            \t\tlayer.alert('上传照片不能多于30个！', {\n            \t\t  \ttitle:'提示',\n\t\t\t\t\t  \tcloseBtn: 0\n\t\t\t\t\t});\n            \t}\n            \t$scope.flag.pictrueRepeatMind = true;\n            \treturn '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1 && this.queue.length < 30;\n            }\n            return '|jpg|png|jpeg|bmp|gif|'.indexOf(type) !== -1 && this.queue.length < 30;\n        }\n    });\n    //上传资料\n    var uploader1 = $scope.uploader1 = new FileUploader({\n    \t\turl: '/bimco/fileupload/upload.do'\n    \t\t// queueLimit:30\n    });\n    //FILTERS\n    uploader1.filters.push({\n    \tname: 'customFilter',\n        fn: function(item /*{File|FileLikeObject}*/, options) {\n            docsUploadList.push(item);\n            if(docsUploadList.length > 30){\n            \tif(!$scope.flag.docsRepeatMind){\n            \t\t// alert(\"上传资料不能多于30个！\")\n            \t\t// alertService.add('time-bottom','上传资料不能多于30个！')\n            \t\tlayer.alert('上传资料不能多于30个！', {\n\t\t\t\t\t   \tcloseBtn: 0\n\t\t\t\t\t});\n            \t}\n            \t$scope.flag.docsRepeatMind = true;\n            \treturn this.queue.length < 30;\n            }\n            \treturn this.queue.length < 30;\n        }\n    });\n    //点击上传照片按钮\n    $scope.fileUpload = function () {\n    \t$scope.flag.pictrueRepeatMind = false;\n    \t$scope.flag.isleast = false;\n    \t$('.upload-img').attr('uploader', 'uploader');\n    \t$('.upload-img').attr('nv-file-select', '');\n    \t$('.upload-img').click();\n    }\n    //点击上传资料按钮\n    $scope.docsUpload = function () {\n    \t$scope.uploadSourceType = 3;\n    \t$scope.flag.isleast = false;\n    \t$scope.flag.docsRepeatMind = false;\n    \t$('.upload-docs').attr('uploader', 'uploader1');\n    \t$('.upload-docs').attr('nv-file-select', '');\n    \t$('.upload-docs').click();\n    }\n    //设置日期相关\n    $scope.dateOptions = {\n\t    formatYear: 'yy',\n\t    maxDate: new Date(2020, 5, 22),\n\t    startingDay: 1,\n\t    showWeeks: false,\n\t\tminDate: new Date()\n\t};\n\t$scope.open2 = function() {\n\t    $scope.popup2.opened = true;\n\t\t$scope.isDeadlineNull = false;\n\t};\n\n\t$scope.popup2 = {\n\t    opened: false\n\t};\n\t$scope.checksignal = false;\n\t//根据复选框来判断是否显示日期控件\n\t$scope.isChecked = function () {\n\t\t$scope.checksignal = !$scope.checksignal;\n\t\tif(!$scope.checksignal){\n\t\t\t$scope.dt = null;\n\t\t}\n\t}\n\t//弹出框\n\t$scope.dynamicPopover = {\n\t\ttemplateUrl: 'template/cooperation/mypopovertemplate.html'\n\t}\n\t//\t监听新建文本框的状态\n\t$scope.changeTopic = function(){\n\t\t// 名称字符控制\n\t\t$scope.flag.nameToLong = false;\n\t}\n\t//监听描述的状态\n\t$scope.changeDesc = function(){\n\t\t// 描述字符控制\n\t\t$scope.flag.descToLong = false;\n\t}\n\n\tvar docsList = []; //组合doclist\n\tvar uploadPictureList = []; //上传照片list\n\tvar uploadDocList = [];\t\t//上传资料list\n\tvar onCompleteAllSignal = false; //是否上传成功signal\n\n\t$scope.test = function() {\n\t\tbackJson = \"{\\\"99E53F0D1ECC4CA1AEDCB64BA416D640\\\":{\\\"PdfModify\\\":[{\\\"contents\\\":\\\"测试的字符\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"modifyTime\\\":22229721,\\\"page\\\":2,\\\"type\\\":2,\\\"xAxis\\\":167.99998474121094,\\\"yAxis\\\":163.90008544921875},{\\\"contents\\\":\\\"没问题\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"modifyTime\\\":22229721,\\\"page\\\":2,\\\"type\\\":2,\\\"xAxis\\\":377.24996948242188,\\\"yAxis\\\":234.40008544921875}]}}\";\n        backJson = JSON.parse(backJson);\n        alert(backJson.length);\n        var  a  ={\n        \tmodifys:[]\n        }; \n        if(backJson){\n\t\t\t\t\tif(backJson){\n\t\t\t\t\t\tangular.forEach(backJson,function(value1, key1){\n\t\t\t\t\t\t\tif(!value1){\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t        \t\t\t\ta.modifys.push(value1.PdfModify);\n\t\t        \t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(a);\n\t        \t\t\n\t        \t}\n\t}\n\n\t\n\t//协作保存\n\t/**\n\t * @param  {[status]} 0-草稿箱 1 提交\n\t */\n\t$scope.save = function (status) {\n\t\t// if($scope.flag.beginCreate){\n\t\t// \treturn;\n\t\t// }\n\t\t// debugger\n//\t\tconsole.log('data.linkProjectDptName',$scope.link.linkProjectDptName);\n\t\t$scope.flag.beginCreate = true;\n\t\t//主题为空\n\t\tif(status==1){\n\t\t\tif(!$scope.coopname){\n\t\t\t\t$scope.flag.isTopicNull= true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif($scope.coopname.length > 50){\t//协作主题不能超过50个字符\n\t\t\t\t$scope.flag.nameToLong = true;\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\t$scope.flag.nameToLong = false;\n\t\t\t}\n\t\t\tif($scope.desc.length > 250){\t//协作描述不能超过250个字符\n\t\t\t\t$scope.flag.descToLong = true;\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\t$scope.flag.descToLong = false;\n\t\t\t}\n\t\t\t//当主题不为空，资料照片为空\n\t\t\tif($scope.coopname && !uploader.queue.length && !uploader1.queue.length && !$scope.docSelectedList.length && !$scope.formSelectedList.length) {\n\t\t\t\t$scope.flag.isTopicNull = false;\n\t\t\t\t$scope.flag.isleast = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar createindex = layer.load(1, {\n\t\t\tshade: [0.1,'#000'] //0.1透明度的黑色背景\n\t\t});\n\t\t\n\t\tif(uploader.queue.length && uploader1.queue.length) {\n\t\t\t//上传全部图片\n   \t\t\tvar uploadResult = uploader.uploadAll();\n\t   \t\t//每个上传成功之后的回调函数\n\t   \t\tuploader.onSuccessItem = function(fileItem, response, status, headers) {\n\t\t            console.info('onSuccessItem', fileItem, response, status, headers);\n\t\t            var unit = {};\n\t\t            unit.name = response[0].result.fileName;\n\t\t            unit.md5 = response[0].result.fileMd5;\n\t\t            unit.size = response[0].result.fileSize;\n\t\t            unit.uuid = response[0].result.uuid;\n\t\t            uploadPictureList.push(unit);\n\t\t            console.log('uploadPictureList',uploadPictureList);\n\t\t\t};\n\t\t\t//全部成功的回调函数\n\t\t\tuploader.onCompleteAll = function() {\n\t\t\t\t//上传全部\n\t\t   \t \tuploader1.uploadAll();\n\t\t   \t\t//每个上传成功之后的回调函数\n\t\t   \t\tuploader1.onSuccessItem = function(fileItem, response, status, headers) {\n\t\t\t            console.info('onSuccessItem', fileItem, response, status, headers);\n\t\t\t            var unit = {};\n\t\t\t            unit.name = response[0].result.fileName;\n\t\t\t            unit.md5 = response[0].result.fileMd5;\n\t\t\t            unit.size = response[0].result.fileSize;\n\t\t\t            unit.uuid = response[0].result.uuid;\n\t\t\t\t\t\tunit.sourceType = 3;\n\t\t\t            uploadDocList.push(unit);\n\t\t\t            console.log('uploadDocList',uploadDocList);\n\t\t\t\t};\n\t\t\t\t//全部成功的回调函数\n\t\t\t\tuploader1.onCompleteAll = function() {\n\t\t            onCompleteAllSignal = true;\n\t\t        };\n\t        };\n\t    }\n\n\t    if( uploader.queue.length && !uploader1.queue.length) {\n   \t\t\tvar uploadResult = uploader.uploadAll();\n   \t\t\n\t   \t\t//每个上传成功之后的回调函数\n\t   \t\tuploader.onSuccessItem = function(fileItem, response, status, headers) {\n//\t\t            console.info('onSuccessItem', fileItem, response, status, headers);\n\t\t   \t\t\tif(response[0].type != \"error\") {\n\t\t   \t\t\t\tvar unit = {};\n\t\t\t            unit.name = response[0].result.fileName;\n\t\t\t            unit.md5 = response[0].result.fileMd5;\n\t\t\t            unit.size = response[0].result.fileSize;\n\t\t\t            unit.uuid = response[0].result.uuid;\n\t\t\t            uploadPictureList.push(unit);\n\t\t   \t\t\t} else {\t// 提交失败 弹框提示\n\t\t   \t\t\t\tlayer.open({\n\t\t                    type: 1,\n\t\t                    title: false,\n\t\t                    closeBtn: 0,\n\t\t                    shadeClose: true,\n\t\t                    skin: 'yourclass',\n\t\t                    content: '<div class=\"tips\">'+response[0].info+'</div><div class=\"tips_ok\" onclick=\"layer.closeAll();\">好</div>'\n\t\t                  });\n\t\t       \t\t\treturn;\n\t\t   \t\t\t}\n\t\t\t};\n\t\t\t//全部成功的回调函数\n\t\t\tuploader.onCompleteAll = function() {\n\t            onCompleteAllSignal = true;\n\t        };\n\n\t    }\n\n\t     if( !uploader.queue.length && uploader1.queue.length) {\n   \t\t\tvar uploadResult = uploader1.uploadAll();\n   \t\t\n\t   \t\t//每个上传成功之后的回调函数\n\t   \t\tuploader1.onSuccessItem = function(fileItem, response, status, headers) {\n//\t\t            console.info('onSuccessItem', fileItem, response, status, headers);\n\t   \t\t\tif(response[0].type != \"error\") {\n\t   \t\t\t\tvar unit = {};\n\t   \t\t\t\tunit.name = response[0].result.fileName;\n\t   \t\t\t\tunit.md5 = response[0].result.fileMd5;\n\t   \t\t\t\tunit.size = response[0].result.fileSize;\n\t   \t\t\t\tunit.uuid = response[0].result.uuid;\n\t   \t\t\t\tunit.sourceType = 3;\n\t   \t\t\t\tuploadDocList.push(unit);\n\t   \t\t\t} else {\t// 提交失败 弹框提示\n\t   \t\t\t\t// TODO 弹框提示错误信息 (上传文件size=0时会报错)\n\t   \t\t\t\tcondole.log(response.info);\n\t   \t\t\t\tlayer.open({\n\t                    type: 1,\n\t                    title: false,\n\t                    closeBtn: 0,\n\t                    shadeClose: true,\n\t                    skin: 'yourclass',\n\t                    content: '<div class=\"tips\">'+response[0].info+'</div><div class=\"tips_ok\"onclick=\"layer.closeAll();\">好</div>'\n\t                  });\n\t       \t\t\treturn;\n\t   \t\t\t}\n\t\t\t};\n\t\t\t//全部成功的回调函数\n\t\t\tuploader1.onCompleteAll = function() {\n\t            onCompleteAllSignal = true;\n\t        };\n\t    }\n\t    if( !uploader.queue.length && !uploader1.queue.length) {\n   \t\t\tsaveCooperation();\n\t    }\n\t    //轮询是否上传成功\n\t    var checkUploadInterval = setInterval(function() {\n\t    \tif(onCompleteAllSignal == true){\n\t    \t\tclearUploadInterval();\n\t    \t\t//alert('onCompleteAllSignal',onCompleteAllSignal);\n\t    \t\tsaveCooperation();\n\t    \t}\n\t    },100);\n\t    //清除轮询\n\t    function clearUploadInterval() {\n\t    \tclearInterval(checkUploadInterval);\n\t    }\n        function saveCooperation () {\n        \t\n        \t// var backJson = BimCo.SubmitAll();\n        \t// backJson = \"{\\\"99E53F0D1ECC4CA1AEDCB64BA416D640\\\":{\\\"PdfModify\\\":[{\\\"contents\\\":\\\"测试的字符\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"modifyTime\\\":22229721,\\\"page\\\":2,\\\"type\\\":2,\\\"xAxis\\\":167.99998474121094,\\\"yAxis\\\":163.90008544921875},{\\\"contents\\\":\\\"没问题\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"modifyTime\\\":22229721,\\\"page\\\":2,\\\"type\\\":2,\\\"xAxis\\\":377.24996948242188,\\\"yAxis\\\":234.40008544921875}]}}\";\n       \t\n        \tif(backJson){\n        \t\t backJson = JSON.parse(backJson);\n        \t}\n        \tif($scope.dt) {\n        \t\t// console.log($scope.dt);\n\t\t\t\tvar dt = Common.dateFormat($scope.dt);\n\t\t\t} else {\n\t\t\t\tdt = '';\n\t\t\t}\n\t\t\t//拼接资料数组\n\t\t\tvar docSelectedList1 = [];\n\t\t\tvar formSelectedList1 = [];\n\t\t\tangular.forEach($scope.docSelectedList, function(value, key){\n\t\t\t\tvar a = {};\n\t\t\t\tif(backJson){\n\t\t\t\t\t\tangular.forEach(backJson,function(value1, key1){\n\t\t\t\t\t\t\tif(!value1){\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t        \t\t\tif(key == value.uuid){\n\t\t        \t\t\t\ta.modifys.push(value1.PdfModify);\n\t\t        \t\t\t}\n\t\t        \t\t});\n\t        \t}\n\t\t\t\ta.md5 = value.filemd5;\n\t\t\t\ta.name = value.docName;\n\t\t\t\ta.needSign = false;\n\t\t\t\ta.uuid = value.uuid;\n\t\t\t\ta.size = value.filesize;\n\t\t\t\ta.sourceType = $scope.beSourceType;\n\t\t\t\tdocSelectedList1.push(a);\n\t\t\t});\n\t\t\tangular.forEach($scope.formSelectedList, function(value, key){\n\t\t\t\tvar a = {};\n\t\t\t\tif(backJson){\n\t\t\t\t\tbackJson = JSON.parse(backJson);\n\t\t\t\t\tif(backJson){\n\t\t\t\t\t\tangular.forEach(backJson,function(value1, key1){\n\t\t\t\t\t\t\tif(!value1){\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t        \t\t\tif(key == value.uuid){\n\t\t        \t\t\t\ta.modifys.push(value1.PdfModify);\n\t\t        \t\t\t}\n\t\t        \t\t});\n\t\t\t\t\t}\n\t        \t\t\n\t        \t}\n\t\t\t\ta.md5 = value.md5;\n\t\t\t\ta.name = value.name +'.'+value.suffix;\n\t\t\t\ta.needSign = true;\n\t\t\t\ta.uuid = value.uuid;\n\t\t\t\ta.size = value.size;\n\t\t\t\ta.sourceType = $scope.formSourceType;\n\t\t\t\tformSelectedList1.push(a);\n\t\t\t});\n\t\t\tdocsList = docSelectedList1.concat(formSelectedList1, uploadDocList);\n\n\n\t\t\tvar binds = [];//bind的工程\n\t\t\tif($scope.data.bindType == 2) {\n\t\t\t\tbinds = [];\n\t\t\t} else {\n\t\t\t\t//debugger\n\t\t\t\tbinds = $scope.data.assembleLps?$scope.data.assembleLps:[];\n\t\t\t}\n\t\t\t$scope.data = {\n\t\t    \tbinds:binds,\n\t\t    \tbindType: $scope.data.bindType,\n\t\t    \tcollaborator: $scope.responsiblePerson.username,\n\t\t    \tcontracts: contracts,\n\t\t    \tdeadline: dt,\n\t\t    \tdeptId: $scope.data.deptId,\n\t\t    \tdesc: $scope.desc,\n\t\t    \tdocs: docsList,\n\t\t    \tmarkerid: $scope.mark,\n\t\t    \tname: $scope.coopname,\n\t\t    \tpictures: uploadPictureList,\n\t\t    \tppid: $scope.data.ppid,\n\t\t    \tpriority: $scope.priority,\n\t\t    \tstatus:status,\n\t\t    \ttypeId:$stateParams.typeid\n\t\t    };\n\t\t    console.log(JSON.stringify($scope.data));\n\t\t    console.log($scope.data);\n\t\t\tvar obj = JSON.stringify($scope.data);\n\n\t\t\tCooperation.createCollaboration(obj).then(function (data) {\n\t\t\t\t//debugger\n\t\t\t\tlayer.close(createindex);\n\t\t\t\tvar coid = data;\n\t\t\t\tif(status==0){\n\t\t\t\t\t$scope.data.deptId = 0;\n\t\t\t\t\talert('协作存入草稿箱成功！')\n\t\t\t\t}else if(status==1){\n\t\t\t\t\tif(!binds.length){\n\t\t\t\t\t\t$scope.data.deptId = -1;\n\t\t\t\t\t}\t\n\t\t\t\t\talert('创建协作成功');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$state.go('cooperation',{'deptId':$scope.data.deptId, 'ppid':$scope.data.ppid},{ location: 'replace'});\n\t\t\t\t// $state.go('cooperation',{'transignal':$scope.data.deptId},{ location: 'replace'});\n\t\t\t\t//上传之后将coid传给客户端\n\t\t\t\tif($scope.data.bindType == 2){\n\t\t\t\t\t//debugger\n\t\t\t\t\tBimCo.UpLoadComponent(coid);\n\t\t\t\t}\n\t\t\t\t//创建成功一条协作，通知客户端\n\t\t\t\tBimCo.CreateCoSucceed();\n\t\t\t},function(data) {\n\t\t\t\tlayer.close(createindex);\n\t\t\t\t$scope.flag.beginCreate = false;\n\t\t\t\tobj =  JSON.parse(data);\n\t\t\t\t//if(status==1) {\n\t\t\t\t//\talert(obj.message)\n\t\t\t\t//}\n\t\t\t});\n        }\n\n\t}\n    // var currentEditOfficeUuid = '8C08CC5F55F74A9CB04261750BC60EF6';\n    var currentDocSource = '';\n    var currentDocIndex = 0;\n    var currentEditOfficeUuid = '';\n    var currentSuffix = '';\n    var currentDocname = '';\n    var currentReact = '60,80,1200,720';\n    var backJson = '';\n    var handle = '';\n    var coid = \"\";\n\t$scope.isTypePdf = false;;//判断是不是PDF格式的文件\n\t$scope.preView = function (uuid,docName,fileType,index,docSource) {\n\t\t\t//可编辑表单当前index & uuid\n\t\t\tcurrentEditOfficeUuid = uuid;\n\t\t\tcurrentDocname = docName;\n\t\t\tcurrentDocSource = docSource;\n\t\t\tcurrentDocIndex = index;\n            if(fileType=='pdf'){\n            \t//pdf签署（客户端）\n        \t\t$scope.flag.isPreview = true;\n            \t$scope.flag.isPdfsign = true;\n            \t$scope.flag.isGeneral = false;\n\t\t\t\t$scope.isTypePdf = true;\n            \tvar editResult = BimCo.PdfSign(currentEditOfficeUuid,currentSuffix,currentReact,coid);\n\t\t        //编辑失败返回预览界面\n\t\t        if(!editResult){\n\t\t        \talert('下载文档失败');\n\t\t        \t$scope.flag.isPreview = true;\n\t\t        }\n            } else {\n            \t//普通预览（除去pdf以外的文件）\n\t\t\t\t$scope.isTypePdf = false;\n            \tvar data ={fileName:docName,uuid:uuid};\n\t        \tManage.getTrendsFileViewUrl(data).then(function (result) {\n\t        \t\tconsole.log(typeof result)\n\t        \t\t$scope.flag.isPreview = true;\n\t        \t\t$scope.flag.isGeneral = true;\n\t        \t\t$scope.flag.isPdfsign = false;\n\t        \t\t$scope.previewUrl = $sce.trustAsResourceUrl(result);\n\t            },function (data) {\n\t            \t$scope.flag.isPreview = false;\n\t\t\t\t\tif($scope.flag.isPreview == false){\n\t\t\t\t\t\talert('该文件暂不支持预览');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$scope.previewUrl ='';\n\t\t\t\t\t\tvar obj = JSON.parse(data);\n\t\t\t\t\t\tconsole.log(obj);\n\t\t\t\t\t\talert(obj.message);\n\t\t\t\t\t}\n\t            });\n            }\n    }\n\n    //启用编辑\n    $scope.CommentSign = function () {\n\t\tif($scope.isClick){\n\t\t\t$('.edit-material').css('color','#c5c5c5');\n\t\t\t$scope.isClick = false;\n\t\t\tBimCo.CommentSign(currentEditOfficeUuid,currentSuffix);\n\t\t}\n    }\n    //保存编辑\n    $scope.saveOffice = function () {\n\t\t// layer.confirm('是否保存当前文档？', {\n\t\t// \tshadeClose: true,\n\t\t// \tzIndex: layer.zIndex, //重点1\n\t\t// \tbtn: ['是','否'] //按钮\n\t\t// }, function(layero){\n\t\t// \t//layer.zIndex();\n\t\t// \tlayer.setTop(layero);\n\t\t// \tvar isSuccess =  BimCo.SignSubmit(coid);\n\t\t// \tif(isSuccess){\n\t\t// \t\t$scope.flag.isPreview = false;\n\t\t// \t} else {\n\t\t// \t\t$scope.flag.isPreview = false;\n\t\t// \t\talert('保存失败！');\n\t\t// \t}\n\t\t// \t//layer.closeAll();\n\t\t// })\n\t\t\n\t\t\n     //    var re = confirm('是否保存当前文档？');\n    \t// if(re){\n    \t// \tvar isSuccess =  BimCo.SignSubmit(coid);\n\t    //    \tif(isSuccess){\n\t    //    \t\t$scope.flag.isPreview = false;\n\t    //    \t} else {\n\t    //    \t\t$scope.flag.isPreview = false;\n\t    //    \t\talert('保存失败！');\n\t    //    \t}\n    \t// }\n\n    \tvar rtn = BimCo.MessageBox(\"提示\" ,\"是否保存当前文档？\", 0x31);\n    \t//确定1取消2\n    \tif(rtn==1){\n    \t\tvar isSuccess =  BimCo.SignSubmit(coid);\n\t       \tif(isSuccess){\n\t       \t\t$scope.flag.isPreview = false;\n\t       \t} else {\n\t       \t\t$scope.flag.isPreview = false;\n\t       \t\talert('保存失败！');\n\t       \t}\n    \t}\n\n    }\n\n    $scope.cancelEditOffice = function () {\n\t\t// layer.confirm('是否取消编辑当前文档？', {\n\t\t// \tbtn: ['是','否'] //按钮\n\t\t// }, function(){\n\t\t// \tlayer.closeAll();\n\t\t// \tBimCo.SignCancel(currentEditOfficeUuid,currentSuffix);\n\t\t// },function(){\n\t\t// \treturn;\n\t\t// });\n\t\t// \n\t\t\n\t\t// var re = confirm('是否取消编辑当前文档？');\n  //   \tif(re){\n  //   \t\t$scope.flag.isPreview = false;\n  //   \t\tBimCo.SignCancel();\n\t //    }\n\n\t    var rtn = BimCo.MessageBox(\"提示\" ,\"是否取消编辑当前文档\", 0x31);\n\t    //确定1取消2\n\t    if(rtn==1){\n    \t\t$scope.flag.isPreview = false;\n    \t\tBimCo.SignCancel();\n\t    }\n    \t\n    }\n\n    $scope.backDetail = function () {\n    \t$scope.flag.isPreview = false;\n    \tBimCo.SignCancel();\n    \tBimCo.CancelSubmitAll();\n    }\n\n    //最大化、最小化、还原、关闭\n    //SC_MAXIMIZE、SC_MINIMIZE、SC_RESTORE、SC_CLOSE  \n    //窗口缩小\n    $scope.minimize = function () {\n        BimCo.SysCommand('SC_MINIMIZE');\n    }\n\n    //窗口放大还原\n    var num=0; \n    $scope.max = true;\n    $scope.maxRestore = function ($event) {\n        if(num++ %2 == 0){ \n            console.log('max');\n            $scope.max = false;\n            $scope.restore = true;\n            //对接pc\n            BimCo.SysCommand('SC_MAXIMIZE');\n\n        } else { \n            console.log('restore');\n            $scope.max = true;\n            $scope.restore = false;\n            //对接pc\n            BimCo.SysCommand('SC_RESTORE');\n        }\n    }\n    \n\n    //窗口关闭\n    $scope.close = function () {\n        BimCo.SysCommand('SC_CLOSE');\n    }\n\n    //取消创建\n    $scope.cancelCreate = function () {\n\t\t//询问框\n\t\t layer.confirm('是否取消？', {\n\t\t   btn: ['是','否'] //按钮\n\t\t }, function(){\n\t\t\tlayer.closeAll();\n\t\t\tBimCo.CancelSubmitAll();\n\t\t\t$state.go('cooperation',{'deptId':currentdeptId, 'ppid':currentppid},{ location: 'replace'});\n\n\t\t  });\n    }\n\n    //详情页面跳转回homepage(cooperation)\n   \t$scope.backCooperation = function (){\n   \t\t$state.go('cooperation',{'deptId':currentdeptId, 'ppid':currentppid},{ location: 'replace'});\n   \t}\n\n   \t//反查formbe,跳转详情页面\n   \tvar currentPage = 'create';\n   \t$scope.checkFromBe = function() {\n   \t\tvar coid = $('#checkformbe').val();\n   \t\tif(currentPage == 'create'){\n   \t\t\tvar r = confirm('当前正在创建中，是否跳转？');\n   \t\t\tif(r){\n   \t\t\t\t$state.go('coopdetail',{'coid':coid})\n   \t\t\t}\n   \t\t}\n   \t\t\n   \t}\n\n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/newcooperation.ctrl.js\n ** module id = 26\n ** module chunks = 1\n **/","'use strict';\n/**\n * 选择负责人/联系人\n */\nangular.module('cooperation').controller('selectpersonCtrl',['$scope', '$http', '$uibModalInstance','Cooperation','items',\n\tfunction ($scope, $http, $uibModalInstance,Cooperation,items) {\n\t\t//选择负责人,联系人\n\t\t//设置默认值\n\t\tvar flag = {\n\t\t\tforbidAll:false //防止多次全部选中\n\t\t};\n\t\tvar defaultDeptId = 1; \t//默认第一个项目部（值）\n\t\t$scope.selectedOption = {}; //默认中第一个项目部（页面展示对象）\n\t\t$scope.deptInfo = {\n\t\t\tavailableOptions:[]\n\t\t};\n\t\t$scope.userList = [];  //联系人列表\n\t\t$scope.responsiblePerson = ''; //当前负责人\n\t\t$scope.trans_selected = {\n        \tnoSign: [], //不需要签字的相关人\n        \tsign: items.sign //需要签字的相关人\n        };\n//\t\t$scope.trans_selected.sign = items.sign;\n\t\t//保存联系人的值\n//\t\t$scope.avatar = [];\n//\t\t$scope.downUrl = [];\n\t\t//查询值\n\t\tvar queryData = {\n\t\t\tdeptId:defaultDeptId,\n\t\t\tsearchText:$scope.queryForm\n\t\t};\n\t\t//获取项目部\n\t\tCooperation.getDeptList().then(function (data) {\n\t\t\t$scope.deptInfo.availableOptions = data;\n\t\t\t$scope.selectedOption = data[0].deptId + '';\n\t\t\tdefaultDeptId = data[0].deptId;\n\t\t\tqueryData = {\n\t\t\t\tdeptId:defaultDeptId,\n\t\t\t\tsearchText:$scope.queryForm\n\t\t\t};\n\t\t\t//默认联系人列表\n\t\t\tCooperation.getUserList(queryData).then(function (data) {\n\t\t\t\t// var imgSrc = './imgs/icon/defalut.png';\n\t\t\t\t// console.log('start',Date.parse(new Date()));\n//\t\t\t\t angular.forEach(data,function(value,key){\n//\t\t\t\t\tvar avater = {\n//\t\t\t\t\t\tkey:key,//对应的key值\n//\t\t\t\t\t\tavater:[]//保存的头像地址信息\n//\t\t\t\t\t};\n//\t\t\t\t \tangular.forEach(value.users,function(value1,key1) {\n//\t\t\t\t \t\tvar urls = {\n//\t\t\t\t \t\t\tuuid:value1.uuid,\n//\t\t\t\t \t\t\turl:value1.avatar\n//\t\t\t\t \t\t};\n//\t\t\t\t \t\tavater.avater.push(urls);\n//\t\t\t\t \t})\n//\t\t\t\t \t$scope.avatar.push(avater);\n//\t\t\t\t });\n\t\t\t\t// console.log('start',Date.parse(new Date()));\n\t\t\t\t$scope.userList = data.slice(0,8);\n\t\t\t\t//console.log(data)\n\t\t\t});\n\t\t});\n\n\t\t//获取指定角色目录下的所有用户的头像\n//\t\t$scope.getUserAvaterUrl = function(index){\n//\t\t\tindex = parseInt(index);\n//\t\t\t//获取指定的数据\n//\t\t\tvar avater = $scope.avatar[index];\n////\t\t\t$scope.$apply(function(){\n////\t\t\t\t$(\"#uib_\"+index).attr(\"uib-collapse\",false);\n////\t\t\t});\n//\t\t\tif(avater.key != index){\n//\t\t\t\treturn;\n//\t\t\t}\n//\t\t\tvar urls = avater.avater;\n//\t\t\t//获取所有的UUID，根据UUID区获取下载地址\n//\t\t\tvar uuids = [];\n//\t\t\tangular.forEach(urls,function(value,key){\n//\t\t\t\tif(value.uuid){\n//\t\t\t\t\tvar url = $scope.getDownUrl(value.uuid)\n//\t\t\t\t\tif(url == null){\n//\t\t\t\t\t\tuuids.push(value.uuid);\n//\t\t\t\t\t}\n//\t\t\t\t}\n//\t\t\t});\n//\t\t\t//获取UUID地址,\n//\t\t\tvar mapUrl = '';\n//\t\t\tif(uuids.length > 0){\n//\t\t\t\tuuids = JSON.stringify(uuids)\n////\t\t\t\tCooperation.getDownFileUrl(uuids).then(function (data) {\n////\t\t\t\t\tmapUrl = data.data;\n////\t\t\t\t});\n//\t\t\t\t$.ajax({\n//\t\t              type: \"post\",\n//\t\t              url: basePath+'rs/co/downFileUrl',\n//\t\t              data:uuids,\n//\t\t              async:false,\n//\t\t              contentType:'application/json',\n//\t\t              success: function(data){\n//\t\t            \t  mapUrl = data;\n//\t\t              }\n//\t\t        });\n//\t\t\t}\n//\t\t\tangular.forEach(urls,function(value,key){\n//\t\t\t\tvar url = \"default\";\n//\t\t\t\tvar down = \"./imgs/icon/defalut.png\";\n//\t\t\t\tvar uuid = value.uuid;\n//\t\t\t\tif(uuid){\n//\t\t\t\t\t  angular.forEach(mapUrl,function(value,key){\n//\t\t\t\t\t\t  if(key == uuid){\n//\t\t\t\t\t\t\t  url = uuid;\n//\t\t\t\t\t\t\t  down = value;\n//\t\t\t\t\t\t\t  var downUrl = {\n//\t\t\t\t\t\t\t\t  uuid:key,\n//\t\t\t\t\t\t\t\t  url:value\n//\t\t\t\t\t\t\t  };\n//\t\t\t\t\t\t\t  $scope.downUrl.push(downUrl);\n//\t\t\t\t\t\t  }\n//\t\t\t\t\t  })\n//\t\t\t\t}\n//\t\t\t\t$(\"#\"+index+\"_\"+url+\"_\"+key).attr(\"src\",down);\n//\t\t\t});\n//\t\t}\n\t\t\n\t\t//获取指定的url\n//\t\t$scope.getDownUrl =function (uuid){\n//\t\t\tvar url = null;\n//\t\t\t angular.forEach($scope.downUrl,function(value,key){\n//\t\t\t\t if(value.uuid == uuid){\n//\t\t\t\t\t url = value.url;\n//\t\t\t\t }\n//\t\t\t });\n//\t\t\t return url;\n//\t\t}\n\t\t\n\t\t//切换项目部切换联系人\n\t\t$scope.switchUsers = function (params) {\n\t\t\tqueryData = {\n\t\t\t\t\tdeptId: params,\n\t\t\t\t\tsearchText: $scope.queryForm\n\t\t\t};\n\t\t\tCooperation.getUserList(queryData).then(function (data) {\n\t\t\t\t$scope.userList = data.slice(0,6);\n\t\t\t});\n\t\t\t$scope.isCollapsed = false;\n\t\t}\n\n\t\t//选择负责人--搜索功能\n\t\t$scope.responsibleSearch = function () {\n\t\t\tif($scope.queryForm) {\n\t\t\t\t$scope.isCollapsed = true;\n\t\t\t\tqueryData = {\n\t\t\t\t\tdeptId:$scope.selectedOption,\n\t\t\t\t\tsearchText:$scope.queryForm\n\t\t\t\t};\n\t\t\t\tCooperation.getUserList(queryData).then(function (data) {\n\t\t\t\t\t$scope.userList = data.slice(0,6);\n\t\t\t\t});\n\t\t\t} else if (!$scope.queryForm) {\n\t\t\t\tqueryData = {\n\t\t\t\t\tdeptId:$scope.selectedOption,\n\t\t\t\t\tsearchText:$scope.queryForm\n\t\t\t\t};\n\t\t\t\tCooperation.getUserList(queryData).then(function (data) {\n\t\t\t\t\t$scope.userList = data.slice(0,6);\n\t\t\t\t});\n\t\t\t\t$scope.isCollapsed = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//负责人只能单选\n\t\t$scope.changeStaus = function (id, pid, user) {\n\t\t\tangular.forEach($scope.userList, function(value,key) {\n\t\t\t\t\tfor(var i = 0; i< value.users.length;i++){\n\t\t\t\t\t\tif(key == pid && i == id){\n\t\t\t\t\t\t\tvalue.users[i].add = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalue.users[i].add = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t});\n\t\t\t$scope.responsiblePerson = user;\n\n\t\t}\n\n\t\t//选中的相关人\n\t\tvar temp = _.cloneDeep(items);\n\t\tif(temp.sign){\n\t\t\tvar a = temp.sign.concat(temp.noSign);\n\t\t}\n\t\t$scope.relatedSelected = a ? a : [];\n\n\t\t$scope.addRelated = function (current) {\n//\t\t\tvar url = $scope.getDownUrl(current.uuid);\n//\t\t\tif(url){\n//\t\t\t\tcurrent.avatar = url;\n//\t\t\t}\n\t\t\tvar currentUser = {avatar:\tcurrent.avatar,\n\t\t\t\t\tavatarUuid:current.uuid,\n\t\t\t\t\tisPassed\t:false,\n\t\t\t\t\tisReaded:false,\n\t\t\t\t\tisRejected\t:false,\n\t\t\t\t\tisSigned:false,\n\t\t\t\t\tneedSign:false,\n\t\t\t\t\tusername:current.username,\n\t\t\t\t\tmustExist:false,\n\t\t\t\t\tcanSign:true};\n\t\t\t$scope.relatedSelected.push(currentUser);\n\t\t\t//数组去重\n\t\t\tvar unique = _.uniqBy($scope.relatedSelected, 'username');\n\t\t\t$scope.relatedSelected = unique;\n\t\t}\n\t\t\n\t\t$scope.removeRelated = function (current) {\n\t\t\tvar removeRelated = _.filter($scope.relatedSelected, function (o) {\n\t\t\t\treturn o.username != current.username;\n\t\t\t})\n\t\t\t$scope.relatedSelected = removeRelated;\n\t\t\tvar idx = signSelected.indexOf(current);\n\t\t\tif(idx != -1) {\n\t\t\t\tsignSelected.splice(idx,1);\n\t\t\t}\n\t\t}\n\n\t\t//选择需要签字的相关人\n\t\tvar signSelected = temp.sign ? temp.sign : [];\n\t\t\n\t\tvar nosignSelected = temp.noSign ? temp.noSign :[];\n        var updateSelected = function(action,id){\n            if(action == 'add' && signSelected.indexOf(id) == -1){\n               id.needSign = true;\n               signSelected.push(id);\n               $scope.trans_selected.sign =signSelected;\n           \t}\n            if(action == 'remove' && signSelected.indexOf(id)!=-1){\n            \tid.needSign = false;\n               var idx = signSelected.indexOf(id);\n               signSelected.splice(idx,1);\n               $scope.trans_selected.sign =signSelected;\n            }\n         }\n \n        $scope.updateSelection = function($event, id){\n            var checkbox = $event.target;\n            var action = (checkbox.checked?'add':'remove');\n            updateSelected(action,id);\n        }\n \n        $scope.isSelected = function(id){\n        \t//console.log('signSelected.indexOf(id)',signSelected.indexOf(id))\n            return signSelected.indexOf(id)>=0;\n        }\n\n        //选择不需要签字的相关人\n        var noSign = function () {\n        \tif(signSelected.length) {\n        \t\tnosignSelected = [];\n\t\t        nosignSelected =  _.difference($scope.relatedSelected, signSelected);\n        \t} else {\n        \t\tnosignSelected = $scope.relatedSelected;\n        \t}\n        }\n\n        //选择负责人-确定按钮\n\t\t$scope.ok = function () {\n//\t\t\tconsole.log('relatedSelected', $scope.responsiblePerson);\n\t\t\tif($scope.responsiblePerson != '') {\n\t\t\t\t$uibModalInstance.close($scope.responsiblePerson);\n\t\t\t} else {\n\t\t\t\talert('请选择负责人');\n\t\t\t}\n\t\t}\n\n\t\t//选择相关人-确定按钮\n\t\t$scope.ok1 = function () {\n\t\t\tnoSign();\n\t\t\t$scope.trans_selected.noSign = nosignSelected;\n\t\t\t$uibModalInstance.close($scope.trans_selected);\t// 关闭弹框\n\t\t}\n\n\t\t//全选\n\t\t$scope.allSelected = function () {\n\t\t\t$scope.flag.forbidAll = true;\n\t\t\tangular.forEach($scope.userList,function (value, key) {\n\t\t\t\tangular.forEach(value.users, function (value1,key) {\n\t\t\t\t\tvar currentUser = {avatar:\tvalue1.avatar,\n\t\t\t\t\t\t\tavatarUuid:value1.uuid,\n\t\t\t\t\t\t\tisPassed\t:false,\n\t\t\t\t\t\t\tisReaded:false,\n\t\t\t\t\t\t\tisRejected\t:false,\n\t\t\t\t\t\t\tisSigned:false,\n\t\t\t\t\t\t\tneedSign:false,\n\t\t\t\t\t\t\tusername:value1.username,\n\t\t\t\t\t\t\tmustExist:false,\n\t\t\t\t\t\t\tcanSign:true};\n\t\t\t\t\t$scope.relatedSelected.push(currentUser);\n\t\t\t\t})\n\t\t\t});\n\t\t\t$scope.relatedSelected = _.uniqBy($scope.relatedSelected, 'username');\n\t\t\t/*\n\t\t\t//$scope.isSelected = true;\n\t\t\t$scope.relatedSelected = [];\t// 无论全选与否，值先清掉\n\t\t\tif($scope.flag.allSelected && !$scope.flag.forbidAll){\n\t\t\t\t$scope.flag.forbidAll = true;\n\t\t\t\tangular.forEach($scope.userList,function (value, key) {\n\t\t\t\t\tangular.forEach(value.users, function (value1,key) {\n\t\t\t\t\t\t$scope.relatedSelected.push(value1);\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$scope.flag.forbidAll = false;\n\t\t\t\t$scope.trans_selected.sign = [];\n\t\t\t\tsignSelected = [];\n\t\t\t}*/\n\t\t}\n\t\t$scope.delAll = function(){\n\t\t\tvar noDelete = [];\n\t\t\tvar needSign = [];\n\t\t\tfor(var i=0; i < $scope.relatedSelected.length; i++) {\n\t\t\t\tif($scope.relatedSelected[i].mustExist) {\t\t// 如果该相关人之前已经存在，不让删\n\t\t\t\t\tnoDelete.push($scope.relatedSelected[i]);\n\t\t\t\t\tif($scope.relatedSelected[i].needSign) {\t\n\t\t\t\t\t\tneedSign.push($scope.relatedSelected[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t$scope.relatedSelected =noDelete;\n\t\t\t$scope.trans_selected.sign = needSign;\n\t\t\tsignSelected = needSign;\n//\t\t\t$scope.flag.forbidAll = false;\n\t\t}\n\n\t\t$scope.cancel = function () {\n\t\t\t$uibModalInstance.dismiss('cancel');\n\t\t}\n\n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/selectperson.ctrl.js\n ** module id = 27\n ** module chunks = 1\n **/","'use strict';\n/**\n * coopdetailCtrl\n */\nangular.module('cooperation').controller('coopdetailCtrl', ['$scope', '$http', '$uibModal','$httpParamSerializer','FileUploader','Cooperation','$state','$stateParams','Manage','$sce',\n    function ($scope, $http, $uibModal, $httpParamSerializer,FileUploader,Cooperation,$state,$stateParams,Manage,$sce) {\n\t\tvar clickSpeechMap = new jMap();\n//\t\tconsole.log('detail',$stateParams);\n\t\tvar currentEditOfficeUuid = '';\n\t    var currentSuffix = '';\n\t    var currentReact = '45,100,1080,720';\n\t\tvar signature = '';\n\t\t$scope.link = false;\n\t\t$scope.speachShow = false;\n\t\t$scope.device = false;\n\t\t$scope.allowEdit = true;\n\t\t$scope.isPreview = false;\n\t\t$scope.flag = {};\n\t\t//页面按钮显示标志\n\t\t$scope.bjshow = true;\n\t\t$scope.tjshow = true;\n\t\t$scope.tgshow = true;\n\t\t$scope.jjueshow = true;\n\t\t$scope.jsshow = true;\n\t\t$scope.dchushow = true;\n\t\t$scope.isTypePdf = true;//判断文件类型是否是pdf格式\n\n\t\t//判断pc or bv\n\t\tif(client.system.winMobile||client.system.wii||client.system.ps||client.system.android || client.system.ios||client.system.iphone||client.system.ipod||client.system.ipad||client.system.nokiaN) {\n\t\t\t$scope.device = true;\n\t\t}\n\n\t\t//bv播放按钮显示不同颜色\n\t\tif($scope.device) {\n\t\t\t$('.palys').addClass('play-bv');\n\t\t} else {\n\t\t\t$('.palys').addClass('play-pc');\n\t\t}\n\t\t//根据ui-sref路由拿到对应的coid\n\t   \tvar coid = $stateParams.coid;\n\t   \tvar ppid = 0;\n\t   \tvar coTypeVo = 0;\n\t   \tvar status = \"\";\n\t   \tvar currentTimestamp = Date.parse(new Date());\n\t   \tvar allRelevants = [];\n\t   \tvar sliceRlevants = [];\n\t   \t$scope.transcoid = coid;\n\t   \t//获取coid对应的协同详情列表\n\t   \tCooperation.getCollaboration(coid).then(function (data) {\n\t   \t\t$scope.collaList = data;\n\t\t\t//console.info('需不需要签字',$scope.collaList.relevants)\n\t\t\t//console.info('collaList.docs',$scope.collaList.docs)\n\t   \t\tif($scope.device){\n\t   \t\t\tallRelevants = data.relevants;\n\t\t   \t\tsliceRlevants = data.relevants.slice(0,8);\n\t\t   \t\tif(data.relevants.length>8){\n\t\t   \t\t\t$scope.collaList.relevants =sliceRlevants;\n\t\t   \t\t\t$scope.isRevlentMore = true;\n\t\t   \t\t}\n\t   \t\t}\n\t\t\tif(data.coTypeVo) {\n\t\t\t\tcoTypeVo = data.coTypeVo.type;\n\t\t\t}\n\t\t\t\n\t\t\tstatus = data.status;\n\t\t\tif(data.bindType !== 0 && data.binds.length) {\n//\t\t\t\tconsole.info('关联模型',data.bindType)\n\t\t\t\t$scope.link = true;\n\t\t\t\tppid = data.binds[0].ppid;\n\t\t\t}\n\t\t\t\n\t\t\tif(data.speach) {\n\t\t\t\t$scope.speachShow = true;\n\t\t\t\t// alert(\"塞值:\"+data.speach.speechUrl);\n\t\t\t\t$scope.speachUrl = data.speach.speechUrl\n\t\t\t}\n\t\t\t\n\t\t\tif( data.deadline && data.isDeadline==3){\n\t\t\t\t$scope.deadlineStyle = 'red';\n\t\t\t}\n\t\t\t//console.info(\"明天的日期\",(new Date().date(\"Y-m-d\",strtotime(\"+1 day\"))).getData())\n\n\t\t\tif(data.deadline == null) {\n\t\t\t\t$scope.collaList.deadline = '不限期';\n\t\t\t}\n\n\t\t\tif(data.isSign == -1){\n\t\t\t\t$scope.flag.noNeedSign = true;\n\t\t\t}\n\t\t\t//详情描述\n            if(data.desc ==null || data.desc==''){\n                $('.mobile-job-descrition,.pc-job-descrition').css(\"display\",'none')\n            }else{\n                $('.mobile-job-descrition,.pc-job-descrition').css(\"display\",'block')\n            }\n            //详情联系人\n            if(data.relevants.length==0){\n                $(\".mobile-relate,.pc-relate\").css('display','none')\n            }else{\n                $(\".mobile-relate,.pc-relate\").css('display','block')\n            }\n            //详情照片\n            if(data.pictures.length==0){\n                $(\".mobile-photo,.pc-photo\").css('display','none')\n            }else{\n                $(\".mobile-photo,.pc-photo\").css('display','block')\n            }\n            //详情资料\n            if(data.docs.length==0){\n                $(\".mobile-means,.pc-means\").css('display','none')\n            }else{\n                $(\".mobile-means,.pc-means\").css('display','block')\n            }\n            //详情回复\n            if(data.comments.length==0){\n                $(\".mobile-reply,.pc-reply\").css('display','none')\n            }else{\n                $(\".mobile-reply,.pc-reply\").css('display','block')\n            }\n\t\t\t\n\t\t\t//2.2.2\t当当前用户为负责人但是不需要签字时\n\t\t\tif(data.isCollaborator && data.isSign == -1) {\n\t\t\t\t$scope.bjshow = true;\n\t\t\t\t$scope.tjshow = true;\n\t\t\t\t$scope.tgshow = false;\n\t\t\t\t$scope.jjueshow = false;\n\t\t\t\t$scope.jsshow = true;\n\t\t\t\t$scope.dchushow = true; \n\t\t\t}\n\t\t\t//2.2.3\t当当前用户不是负责人但是需要签字时\n\t\t\tif(!data.isCollaborator && data.isSign ==0) {\n\t\t\t\t$scope.bjshow = false;\n\t\t\t\t$scope.tjshow = true;\n\t\t\t\t$scope.tgshow = true;\n\t\t\t\t$scope.jjueshow = true;\n\t\t\t\t$scope.jsshow = false;\n\t\t\t\t$scope.dchushow = true;\n\t\t\t}\n\t\t\t//2.2.4\t当当前用户既不是负责人也不需要签字时\n\t\t\tif(!data.isCollaborator && data.isSign == -1) {\n\t\t\t\t$scope.bjshow = false;\n\t\t\t\t$scope.tjshow = true;\n\t\t\t\t$scope.tgshow = false;\n\t\t\t\t$scope.jjueshow = false;\n\t\t\t\t$scope.jsshow = false;\n\t\t\t\t$scope.dchushow = true;\n\t\t\t}\n\n\t\t\t//是否编辑协作\n\t\t\tvar statusReject = ['已结束','未通过','已通过','已拒绝'];\n\t\t\tif (statusReject.indexOf(data.status) != -1) {\n\t\t\t\t$scope.allowEdit = false;\n\t   \t\t\t$scope.bjshow = false;\n\t\t\t\t$scope.tgshow = false;\n\t\t\t\t$scope.jjueshow = false;\n\t\t\t\t$scope.jsshow = false;\n\t\t\t\t$scope.flag.noNeedSign = true;\n\t\t\t}\n\n\t\t\t//判断当前用户已经点过通过/拒绝按钮\n\t\t\tif(data.isSign == 1){\n\t\t\t\t$scope.tgshow = false;\n\t\t\t\t$scope.jjueshow = false;\n\t\t\t}\n\t\t\t//当前用户是负责人\n\t\t\tif(data.isSign == 1 && data.isCollaborator){\n\t\t\t\t$scope.jsshow = false;\n\t\t\t\t$scope.bjshow = false;\n\t\t\t}\n\n\t\t\tvar typeArr = ['txt','doc','pdf','ppt','docx','xlsx','xls','pptx','jpeg','bmp','PNG','GIF','JPG','png','jpg','gif','dwg','rar','zip','avi','mp4','mov','flv','swf','wmv','mpeg','mpg','mp3'];\n\t\t\tangular.forEach($scope.collaList.pictures, function(value,key) {\n\t\t\t\t var imgsrc = \"imgs/pro-icon/icon-\";\n\t\t\t\t//如果存在后缀名\n                if(value.name && value.name.indexOf('.') !== -1){\n                    var unit = value.name.split('.')[value.name.split('.').length - 1];\n                    unit = unit.toLowerCase();\n\t\t\t\t\tif(typeArr.indexOf(unit) == -1 || unit == null || unit == \"\" || unit == \"undefined\") {\n\t\t\t\t\t\tunit = 'other';\n\t\t\t\t\t}else if(unit == \"docx\"){\n\t\t\t\t\t\tunit = 'doc'\n\t\t\t\t\t}\n\t\t\t\t\timgsrc = imgsrc+unit+\".png\";\n                    //1.获取后缀 把后缀你push到数组\n                    $scope.collaList.pictures[key].imgsrc = imgsrc;\n                }else{\n                \tunit = 'other';\n                \timgsrc = imgsrc+unit+\".png\";\n                \t$scope.collaList.pictures[key].imgsrc = imgsrc;\n                }\n\n\t\t\t});\n\t\t\tangular.forEach($scope.collaList.docs, function(value, key) {\n                var imgsrc = \"imgs/pro-icon/icon-\";\n\t\t\t\t//如果存在后缀名\n                if(value.name && value.name.indexOf('.') !== -1){\n                    var unit = value.name.split('.')[value.name.split('.').length - 1];\n                    unit = unit.toLowerCase();\n\t\t\t\t\tif(typeArr.indexOf(unit) == -1 || unit == null || unit == \"\" || unit == \"undefined\") {\n\t\t\t\t\t\tunit = 'other';\n\t\t\t\t\t}else if(unit == \"docx\"){\n\t\t\t\t\t\tunit = 'doc'\n\t\t\t\t\t}\n\t\t\t\t\timgsrc = imgsrc+unit+\".png\";\n                    //1.获取后缀 把后缀你push到数组\n                    $scope.collaList.docs[key].imgsrc = imgsrc;\n                }else{\n                \tunit = 'other';\n                \timgsrc = imgsrc+unit+\".png\";\n                \t$scope.collaList.docs[key].imgsrc = imgsrc;\n                }\n            });\n\n\t\t\tangular.forEach($scope.collaList.comments, function(value, key) {\n\t\t\t\t//如果存在后缀名\n\t\t\t\tif(value.docs) {\n\t\t\t\t\tangular.forEach(value.docs, function(value1, key1) {\n\t\t\t\t\t\tvar imgsrc = \"imgs/pro-icon/icon-\";\n\t\t\t\t\t\tvar unit = value1.suffix;\n\t\t\t\t\t\tunit = unit.toLowerCase();\n\t\t\t\t\t\tif(typeArr.indexOf(unit) == -1 || unit == null || unit == \"\" ||  unit == \"undefined\" ) {\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].suffix = 'other';\n\t\t\t\t\t\t\timgsrc = imgsrc+\"other.png\";\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].imgsrc = imgsrc;\n\t\t\t\t\t\t}else if(unit == \"docx\"){\n\t\t\t\t\t\t\timgsrc = imgsrc+\"doc.png\";\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].imgsrc = imgsrc;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\timgsrc = imgsrc+unit+\".png\";\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].imgsrc = imgsrc;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t if(value1.thumbnailUrl){\n                        \t$scope.collaList.comments[key].docs[key1].imgsrc = value1.thumbnailUrl;\n                        }\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//判断两个按钮是否都存在，如果存在显示两个，否则显示全屏\n\t\t\tif($scope.link && !$scope.speachShow){\n\t\t\t\t$(\".mobile-devices .paly-model\").css({\"width\":'100%'})\n\t\t\t}else if(!$scope.link && $scope.speachShow){\n\t\t\t\t$(\".mobile-devices .play-audio\").css({\"width\":'100%'})\n\t\t\t}\n\t\t\t\n\t\t\t//录音初始化\n\t\t\t// $(\"#jquery_jplayer_1\").jPlayer({\n\t\t\t// \tready: function () {\n\t\t\t// \t$(this).jPlayer(\"setMedia\", {\n\t\t\t// \t\tmp3:\"\"\n\t\t\t// \t});\n\t\t\t// \t},\n\t\t\t// \tsolution: \"html,falsh\",\n\t\t\t// \tsupplied: \"mp3\",\n\t\t\t// \twmode: \"window\",\n\t\t\t// \tuseStateClassSkin: true,\n\t\t\t// \tautoBlur: false,\n\t\t\t// \tsmoothPlayBar: true,\n\t\t\t// \tkeyEnabled: true,\n\t\t\t// \tremainingDuration: true,\n\t\t\t// \tpreload:\"auto\",\n\t\t\t// });\n\t   \t});\n\n\t\tvar id = \"#jquery_jplayer_1\";\n\n\t\tvar flashHtml = '';\n\t\tif($scope.device) {\n\t\t\tflashHtml = 'html,falsh'; \n\t\t} else {\n\t\t\tflashHtml = 'html,falsh'; \n\t\t}\n\t\t\n\t\tvar bubble = {\n\t\t\t\ttitle:\"Bubble\",\n\t\t\t\tmp3:''\n\t\t\t};\n\t\t\t\n\t\tvar options = {\n\t\t\tsolution: flashHtml,\n\t\t\tswfPath: \"./lib/audio1\",\n\t\t\tsupplied: \"mp3\",\n\t\t\twmode: \"window\",\n\t\t\tuseStateClassSkin: true,\n\t\t\tautoBlur: false,\n\t\t\tsmoothPlayBar: true,\n\t\t\tkeyEnabled: true,\n\t\t\tremainingDuration: true,\n\t\t\tpreload:\"auto\",\n\t\t\tended:function(){\n\t\t\t\t$(\".detail-voice\").hide();\n\t\t\t}\n\t\t};\n\n\t\tvar myAndroidFix = new jPlayerAndroidFix(id, bubble, options);\n\n\t\t$scope.play = function(speechUrl){\n\t\t\tvar datamp3url;\n\t\t\t$(\".detail-voice\").css('display','block');\n\t\t\t$(\".detail-close\").css(\"display\",'block');\n\t\t\tif(clickSpeechMap.get(speechUrl) == null){\n\t\t\t\t$.ajax({\n\t\t              type: \"POST\",\n\t\t              url: basePath+'rs/co/getMP3URL',\n\t\t              data:speechUrl,\n\t\t              async:false,\n\t\t              contentType:'text/HTML',\n\t\t              success: function(mp3url,status,XMLHttpRequest){\n\t\t            \t   if(mp3url.indexOf('<!DOCTYPE html>')!=-1){\n\t\t            \t \t\tdocument.location = 'co_detail.jsp?coid='+ coid;\n\t\t            \t   \t}\n\t\t            \t  \tdatamp3url = mp3url;\n\t\t              }\n\t\t        });\n\t\t\t\tclickSpeechMap.put(speechUrl, datamp3url);\n\t\t\t}\n\n\t\t\tbubble.mp3 = clickSpeechMap.get(speechUrl);\n\t\t\tmyAndroidFix.setMedia(bubble).play();\n\t\t\t\t\n\t\t\t\n\t\t}\n\t\t\n\t\tfunction jMap(){\n\t\t\t//私有变量\n\t\t\tvar arr = {};\n\t\t\t//增加\n\t\t\tthis.put = function(key,value){\n\t\t\t\tarr[key] = value;\n\t\t\t}\n\t\t\t//查询\n\t\t\tthis.get = function(key){\n\t\t\t\tif(arr[key]){\n\t\t\t\t\treturn arr[key]\n\t\t\t\t}else{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//删除\n\t\t\tthis.remove = function(key){\n\t\t\t\t//delete 是javascript中关键字 作用是删除类中的一些属性\n\t\t\t\tdelete arr[key]\n\t\t\t}\n\t\t\t//遍历\n\t\t\tthis.eachMap = function(fn){\n\t\t\t\tfor(var key in arr){\n\t\t\t\t\tfn(key,arr[key])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t\t\n\n\t\t//play-audio(播放声音的显示播放窗口事件)\n\t\t$scope.audioClose = function () {\n\t\t\t$(\"#jquery_jplayer_1\").jPlayer(\"stop\");\n\t\t\t$(\".detail-voice\").hide();\n\t\t\t$(\".detail-close\").hide();\n\t\t}\n\n\t   \t//编辑协作跳转\n\t   \t $scope.allowEditTrans = function () {\n\t   \t \tif($scope.allowEdit && !$scope.collaList.isLock) {\n\t   \t \t\tCooperation.checkOut(coid).then(function(data) {\t\n\t   \t \t\t});\n\t   \t \t\t$state.go('editdetail', {coid: coid});\n\t   \t \t} else {\n\t   \t \t\tlayer.alert('当前协作已被“'+$scope.collaList.operationName+'”签出，请稍后重试！', {\n        \t\t  \ttitle:'提示',\n\t\t\t\t  \tcloseBtn: 0\n\t\t\t\t});\n\t   \t \t}\n\t   \t }\n\n\t   \t//pc端交互\n\t   \t$scope.checkModelpc = function () {\n\t   \t\tBimCo.LocateComponent(ppid,coid);\n\t   \t}\n\n\t   \t//移动端交互\n\t   \t$scope.checkModel = function () {\n\t   \t\tsendCommand(1,coid);\n\t   \t}\n\n\t   \t$scope.zoom = function (uuid) {\n\t   \t\tsendCommand(6,coid,uuid);\n\t   \t}\n\n\t   \t$scope.previewComment = function (index,uuid){\n\t   \t\tsendCommand(7,index,uuid);\n\t   \t}\n\t   \t\n\t   \t$scope.docsOpen = function (uuid) {\n\t   \t\tsendCommand(5,coid,uuid);\n\t   \t}\n\n\t   \t$scope.previewDocs = function (uuid) {\n\t   \t\tsendCommand(2,coid,uuid);\n\t   \t}\n\n\t   \t$scope.downDocs = function (uuid) {\n\t   \t\tsendCommand(3,coid,uuid);\n\t   \t}\n\n\t \t//     function sendCommand(optType,id){\n\t\t//     var param = \"{\"+ \"\\\"optType\\\":\"+optType+\",\\\"id\\\":\\\"\"+id + \"\\\"}\";\n\t\t//     //document.location = \"http://bv.local?param=\" + param;\n\t\t//     var a  = \"http://bv.local?param=\" + param;\n\t\t//     alert(a);\n\t\t// }\n\n\t\tfunction sendCommand(optType,id,uuid){\n\n\t\t    var param = '{\"optType\":'+optType+',\"coid\":\"'+id+'\"}';\n\t\t    if(optType==2||optType==3||optType==5||optType==6){\n\t\t\t\tparam = '{\"optType\":'+optType+',\"coid\":\"'+id+'\",\"fileUUID\":\"'+ uuid +'\",\"isPreview\":true'+'}';\n\t\t    }\n\t\t    if(optType==7){\n\t\t    \tparam = '{\"optType\":'+optType+',\"index\":\"'+id+'\",\"fileUUID\":\"'+ uuid +'\",\"isPreview\":true'+'}';\n\t\t    }\n\t\t    if(optType==8){\n\t\t    \tparam = '{\"title\":'+title+'}'\n\t\t    }\n\t\t    //document.location = \"http://bv.local?param=\" + param;\n\t\t    //var a  = \"http://bv.local?param=\" + param;\n\t\t    //document.location.href = a;\n\t\t    //alert(document.location.href);\n\t\t    document.location = 'http://localhost:8080/bv/?param='+param;\n\t\t}\n\n\t\t//侧边栏获取动态列表\n\t\tvar trendflag = true;\n\t\t$scope.getOperationList = function() {\n\t\t\tif(trendflag){\n\t\t\t\tCooperation.getOperationList(coid).then(function (data) {\n                \t$scope.operationList = data;\n          \t\t});\n\t\t\t}\n\t\t\ttrendflag = false;\n\t\t}\n\t\t\n\t\t//更新评论\n\n        $scope.updateComment = function () {\n            var trans = {};\n            trans.coid = coid;\n            trans.coTypeVo = coTypeVo; \n            trans.status = status;\n            var modalInstance = $uibModal.open({\n\t\t\t\twindowClass:'update-comment',\n            \tsize: 'lg',\n                backdrop : 'static',\n                templateUrl: 'template/cooperation/updatecomment.html',\n                controller:'updatecommentCtrl',\n                resolve:{\n                    items: function () {\n                        return trans;\n                    }\n                }\n            });\n            modalInstance.result.then(function (data) {\n            \tCooperation.commentToCollaboration(data).then(function (data) {\n\t\t\t\t\t$state.go($state.current, {}, {reload: true});\n    \t\t\t},function(data) {\n\t\t\t\t\talert(data.message);\n\t\t\t\t});\n\n            });\n        }\n\n\t\t//手机端页面侧边栏划出效果\n\t\t$scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n\t\t\t//    详情页面图片资料悬浮出现下载区域\n\t\t\t$(\".action .picInfo .data-list .deta-down \").hover(function () {\n\t\t\t\t$(this).find(\".show-icon\").stop().animate({\"bottom\":\"-1px\"})\n\t\t\t},function(){\n\t\t\t\t$(this).find(\".show-icon\").stop().animate({\"bottom\":\"-38px\"})\n\t\t\t});\n\t\t    //\t详情页面的照片悬浮出现预览功能\n\t\t\t$(\".detail-sear\").hover(function(){\n\t\t\t\t$(this).find(\".detail-search\").stop().animate({\"bottom\":\"-1px\"})\n\t\t\t},function(){\n\t\t\t\t$(this).find(\".detail-search\").stop().animate({\"bottom\":\"-38px\"})\n\t\t\t});\n\n\t\t////\t手机端照片搜索按钮的显示\n\t\t//\t$(\".means-down\").click(function(){\n\t\t//\t\tconsole.info(123)\n\t\t//\t\t//$(this).find(\".means-address\").slideUp()\n\t\t//\t})\n\t\t//\t\n\t\t//\n\n\n\t\t});\n\t\t\n\t\t//协作操作 PC/BV 签署／签名／通过／拒绝／结束 PC/BV\n\t\t$scope.doCollaboration = function (statusCode) {\n\t\t\tvar params = {\n\t\t\t\tcoid:coid,\n\t\t\t\tdocs:[],\n\t\t\t\toperationType:statusCode\n\t\t\t}\n\t\t\tif(!$scope.collaList.isLock){\n\t\t\t\tswitch (statusCode) {\n\t\t\t\t\tcase 6:\n\t\t\t\t\tvar re = confirm('提交后您将不能再修改，若确认通过,请点击确定!');\n\t\t\t\t\tif(re){\n\t\t\t\t\t\tdoCollaboration();\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 7:\n\t\t\t\t\tvar re = confirm('拒绝后将不能再修改，若确认拒绝,请点击确定！');\n\t\t\t\t\tif(re){\n\t\t\t\t\t\tdoCollaboration();\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase 8:\n\t\t\t\t\tvar re = confirm('结束后您将不能再修改，是否结束？');\n\t\t\t\t\tif(re){\n\t\t\t\t\t\tdoCollaboration();\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tdoCollaboration();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlayer.alert('当前协作已被“'+$scope.collaList.operationName+'”签出，请稍后重试！', {\n        \t\t  \ttitle:'提示',\n\t\t\t\t  \tcloseBtn: 0\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tfunction doCollaboration (){\n\t\t\t\tCooperation.doCollaboration(params).then(function (data) {\n\t\t\t\t\t$state.go('cooperation');\n\t\t\t\t},function (data) {\n\t\t\t\t\talert(data.data.message);\n\t\t\t\t});\n\t\t\t}\n\t\t}\t\n\t\t//pc对接\n\t\t//进入页面\n\t\t$scope.previewSign = function (uuid,docName,isPdfsign) {\n            var suffix = '';\n            if(docName.indexOf('.')!=-1){\n            \t//获取电子签名uuid\n            \tsuffix = docName.split('.')[docName.split('.').length-1];\n            \tif(suffix=='pdf' && isPdfsign == 1){\n            \t\t//pdf签署（客户端）\n            \t\t$scope.flag.isPreview = true;\n\t            \t$scope.flag.isApprove = true;\n\t            \t$scope.flag.isGeneral = false;\n\t            \t$scope.flag.isPdfsign = false;\n\t            \tvar pdfSign = BimCo.PdfSign(uuid,suffix,currentReact,coid);\n\t\t\t\t\tif(!pdfSign) {\n\t\t\t\t\t\talert('下载文件失败！');\n\t\t\t\t\t}\n\t            } else {\n\t            \t//普通预览（除去pdf以外的文件）\n\t            \tvar data ={fileName:docName,uuid:uuid};\n\t\t        \tManage.getTrendsFileViewUrl(data).then(function (result) {\n\t\t        \t\tconsole.log(typeof result)\n\t\t        \t\t$scope.flag.isPreview = true;\n\t\t        \t\t$scope.flag.isGeneral = true;\n\t\t        \t\t$scope.flag.isPdfsign = false;\n\t\t        \t\t$scope.flag.isApprove = false;\n\t\t        \t\t$scope.previewUrl = $sce.trustAsResourceUrl(result);\n\t\t            },function (data) {\n\t\t            \t$scope.flag.isPreview = false;\n\t\t            \t$scope.previewUrl ='';\n\t\t                var obj = JSON.parse(data);\n\t\t                console.log(obj);\n\t\t                alert(obj.message);\n\t\t            });\n\t            }\n            }\n    \t}\n\n    \t//添加审批意见\n    \t$scope.addApprove = function() {\n    \t\t// alert('$scope.collaList.isSign='+$scope.collaList.isSign);\n    \t\tif($scope.collaList.isSign == 1){\n    \t\t\tBimCo.MessageBox(\"提示\" ,\"您已通过（拒绝）该协作，不能进行二次审批！\", 0);\n    \t\t\treturn;\n    \t\t}\n    \t\tif($scope.collaList.status=='已结束'){\n    \t\t\tBimCo.MessageBox(\"提示\" ,\"当前协作已结束，不能再进行操作!\", 0);\n    \t\t\treturn;\n    \t\t}\n    \t\t//添加审批意见时签出\n    \t\tCooperation.checkOut(coid).then(function(data){\n\t\t\t\t$scope.flag.isPdfsign = true;\n    \t\t},function(data){\n    \t\t\t//弹框提示用户当前被签出\n    \t\t\tBimCo.MessageBox(\"提示\" ,data.message, 0);\n    \t\t\treturn;\n    \t\t});\n    \t}\n\n\t\t//签署意见\n\t\t$scope.signComment = function () {\n\t\t\t\t$scope.isSign = true;\n\t        \tBimCo.CommentSign(currentEditOfficeUuid,currentSuffix);\n\t    }\n\t    //电子签名\n\t    $scope.signElectronic = function () {\n\t    \t//获取电子签名\n\t    \tCooperation.getSignature().then(function (data) {\n\t\t\t\tsignature = data.uuid;\n\t\t\t});\n\t    \t$scope.isEleSign = true;\n\t       \tBimCo.ElectronicSign(signature);\n\n\t    }\n\t    //提交\n\t    $scope.SubmitAll = function () {\n\t    \tvar rtn = BimCo.MessageBox(\"提示\" ,\"提交后将不能再修改，若确认无无误请点击确认！\", 0x31);\n\t    \tvar isSignSubmit;\n\t    \tvar backJson;\n\t    \t// backJson = \"{\\\"99E53F0D1ECC4CA1AEDCB64BA416D640\\\":{\\\"PdfModify\\\":[{\\\"contents\\\":\\\"测试的字符\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"modifyTime\\\":22229721,\\\"page\\\":2,\\\"type\\\":2,\\\"xAxis\\\":167.99998474121094,\\\"yAxis\\\":163.90008544921875},{\\\"contents\\\":\\\"没问题\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"modifyTime\\\":22229721,\\\"page\\\":2,\\\"type\\\":2,\\\"xAxis\\\":377.24996948242188,\\\"yAxis\\\":234.40008544921875}]}}\";\n\t    \t//backJson = \"{\\\"6330EB632087445B98DB6D6B677B136A\\\":{\\\"PdfModify\\\":[{\\\"contents\\\":\\\"asdfasdfaf\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"page\\\":1,\\\"type\\\":2,\\\"xAxis\\\":477.74996948242188,\\\"yAxis\\\":786.75}]},\\\"99E53F0D1ECC4CA1AEDCB64BA416D640\\\":{\\\"PdfModify\\\":[{\\\"contents\\\":\\\"我好\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"page\\\":1,\\\"type\\\":2,\\\"xAxis\\\":427.49996948242188,\\\"yAxis\\\":759.4000244140625}]},\\\"C053AFCBAE3742E1907C711AEEE49FB1\\\":{\\\"PdfModify\\\":[{\\\"contents\\\":\\\"asfasfasfa\\\",\\\"font\\\":\\\"宋体\\\",\\\"fontSize\\\":15,\\\"page\\\":1,\\\"type\\\":2,\\\"xAxis\\\":390.74996948242188,\\\"yAxis\\\":749.75}]}}\"\n\t    \tvar modifyDocs=[];\n\t    \tif(rtn==1){\n\t    \t\t//客户端临时缓存\n\t    \t\tBimCo.SignSubmit();\n\t    \t\t//客户端正式提交\n\t    \t\tbackJson = BimCo.SubmitAll();\n            \n\t    \t\tif(backJson){\n\t\t    \t\tbackJson = JSON.parse(backJson);\n\t\t    \t}\n\t\t    \tif(backJson){\n\t\t\t\t\tangular.forEach(backJson,function(value, key){\n\t\t\t\t\t\tif(!value){\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar unit = {};\n\t\t\t\t\t\t\tunit.uuid = key;\n\t\t\t\t\t\t\tunit.modifys = value.PdfModify;\n\t\t\t\t\t\t\tmodifyDocs.push(unit);\n\t\t\t\t\t\t}\n\t        \t\t});\n\t\t    \t}\n\t\t    \tvar params = {\n\t\t\t\t\tcoid:coid,\n\t\t\t\t\tdocs:modifyDocs,\n\t\t\t\t\toperationType:4\n\t\t\t\t}\n\t\t    \tCooperation.doCollaboration(params).then(function (data) {\n\t\t\t\t\t$scope.flag.isPreview = false;\n\t\t\t\t},function (data) {\n\t\t\t\t\t//提交不成功签入协作，跳转回详情界面\n\t\t\t\t\tCooperation.checkIn(coid).then(function(data) {\n\t   \t \t\t\t});\n\t\t\t\t\t$scope.flag.isPreview = false;\n\t\t\t\t\tBimCo.MessageBox(\"提示\",data.message,0);\n\t\t\t\t});\n\t\t    \t}\n\t    }\n\n\t    //取消\n\t    $scope.signCancel = function () {\n\t    \tvar rtn = BimCo.MessageBox(\"提示\" ,\"放弃编辑？\", 0x31);\n\t    \tif(rtn==1) {\n\t    \t\t//取消调用签入\n\t    \t\tCooperation.checkIn(coid).then(function(data){\n\t    \t\t});\n\t    \t\tBimCo.SignCancel();\n\t    \t\tBimCo.CancelSubmitAll();\n\t    \t\t$scope.flag.isPreview = false;\n\t    \t}\n\t    }\n\n\t    //清空\n\t    $scope.signEmpty = function () {\n\t    \tBimCo.SignEmpty();\n\t    }\n\n\t\t//最大化、最小化、还原、关闭\n\t    //SC_MAXIMIZE、SC_MINIMIZE、SC_RESTORE、SC_CLOSE  \n\t    //窗口缩小\n\t    $scope.minimize = function () {\n\t        BimCo.SysCommand('SC_MINIMIZE');\n\t    }\n\n\t    //窗口放大还原\n\t    var num=0; \n\t    $scope.max = true;\n\t    $scope.maxRestore = function ($event) {\n\t        if(num++ %2 == 0){ \n\t            console.log('max');\n\t            $scope.max = false;\n\t            $scope.restore = true;\n\t            //对接pc\n\t            BimCo.SysCommand('SC_MAXIMIZE');\n\n\t        } else { \n\t            console.log('restore');\n\t            $scope.max = true;\n\t            $scope.restore = false;\n\t            //对接pc\n\t            BimCo.SysCommand('SC_RESTORE');\n\t        }\n\t    }\n\t    //窗口关闭\n\t    $scope.close = function () {\n\t        BimCo.SysCommand('SC_CLOSE');\n\t    }\n\t    //显示更多相关人\n\t    $scope.showMore = false;\n\t    $scope.showMorePerson = function() {\n\t    \tif(!$scope.showMore){\n\t    \t\t$scope.collaList.relevants = allRelevants;\n\t    \t\t$scope.showMore = true;\n\t    \t} else {\n\t    \t\t$scope.collaList.relevants = sliceRlevants;\n\t    \t\t$scope.showMore = false;\n\t    \t}\n\t    }\n\n\t    //预览界面跳转回详情\n\t    $scope.backDetail = function () {\n\t    \tif($scope.flag.isPreview && $scope.flag.isApprove){\n\t    \t\tBimCo.SignCancel();\n\t    \t\tBimCo.CancelSubmitAll(); \n\t    \t\t//签署页面返回调用签入\n\t    \t\tCooperation.checkIn(coid).then(function(data){\n\t    \t\t});\n\t    \t}\n\t    \t$scope.flag.isPreview = false;\n\t    \t$scope.flag.isPdfsign = false;\n\t    }\n\t    \n\t    //详情页面跳转回homepage(cooperation)\n\t   \t$scope.backCooperation = function (){\n\t   \t\tif($scope.collaList.status=='草稿箱'){\n\t   \t\t\t//草稿箱\n\t   \t\t\t$scope.collaList.deptId = 0;\n\t   \t\t} else if(!$scope.collaList.binds || $scope.collaList.binds.length==0){\n\t   \t\t\t//未关联\n\t   \t\t\t$scope.collaList.deptId = -1;\n\t   \t\t}\n\t   \t\t$state.go('cooperation',{'deptId':$scope.collaList.deptId, 'ppid':$scope.collaList.ppid,'status':$scope.collaList.statusId},{ location: 'replace'});\n\t   \t}\n\n\t   \t//反查formbe,跳转详情页面\n\t   \tvar currentPage = 'pdfSign';\n\t   \t$scope.checkFromBe = function() {\n\t   \t\tvar coid = $('#checkformbe').val();\n\t   \t\t//当前正在签署\n\t   \t\tif(currentPage == 'pdfSign' && $scope.flag.isPdfsign){\n\t   \t\t\tvar r = confirm('当前正在签署中，是否跳转？');\n\t   \t\t\tif(r){\n\t   \t\t\t\tBimCo.SignCancel();\n\t    \t\t\tBimCo.CancelSubmitAll(); \n\t   \t\t\t\t$state.go('coopdetail',{'coid':coid});\n\t   \t\t\t}\n\t   \t\t} else {\n\t   \t\t\t//非签署状态\n\t   \t\t\t$state.go('coopdetail',{'coid':coid})\n\t   \t\t}\n\t   \t\t\n\t   \t}\n\t \n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/coopdetail.ctrl.js\n ** module id = 28\n ** module chunks = 1\n **/","'use strict';\n/**\n * updatecommentCtrl\n */\nangular.module('cooperation').controller('updatecommentCtrl',['$rootScope','$scope', '$http', '$uibModalInstance','Cooperation','items','Common','FileUploader','$timeout',\n    function ($rootScope,$scope, $http, $uibModalInstance,Cooperation,items,Common,FileUploader,$timeout) {\n    \tvar onCompleteAllSignal = false;\n    \t$scope.uploadBegin = false;\n    \t$scope.zhenggai = false;\n    \t$scope.status = items.status;\n\t\t$scope.isUpdataOK = false;\n\n\t\tswitch ($scope.status) {\n\t\t\tcase '空':\n\t\t\t\t$scope.status = '11';\n\t\t\t\tbreak;\n\t\t\tcase '已整改':\n\t\t\t\t$scope.status ='1' ;\n\t\t\t\tbreak;\n\t\t\tcase '整改中':\n\t\t\t\t$scope.status = '2';\n\t\t\t\tbreak;\n\t\t\tcase '不整改':\n\t\t\t\t$scope.status = '3';\n\t\t\t\tbreak;\n\t\t\tcase '待整改':\n\t\t\t\t$scope.status = '4';\n\t\t\t\tbreak;\n\t\t\tcase '未整改':\n\t\t\t\t$scope.status = '5';\n\t\t\t\tbreak;\n\t\t}\n\t\t//如果是问题整改则显示状态\n\t\tvar isShowArr = [\"已结束\",\"已通过\",\"已通过\",\"进行中\"];\n\t\t//debugger\n\t\tif(isShowArr.indexOf($scope.status) == -1) {\n\t\t\t$scope.zhenggai = true;\n\t\t\t$(\".detail-state\").show();\n\t\t} else if( coTypeVo === 1) {\n\t\t\t$scope.zhenggai = true;\n\t\t\t$(\".detail-state\").show();\n\t\t}else{\n\t\t\t$(\".detail-state\").hide();\n\t\t}\n\t\t//switch($scope.status){\n\t\t//\tcase \"已结束\":\n\t\t//\t\t$scope.zhenggai = false;\n\t\t//\t\tbreak;\n\t\t//\tcase \"已通过\":\n\t\t//\t\t$scope.zhenggai = false;\n\t\t//\t\tbreak;\n\t\t//\tcase \"已拒绝\":\n\t\t//\t\t$scope.zhenggai = false;\n\t\t//\t\tbreak;\n\t\t//}\n    \t//详情展示页添加更新\n    \tvar coTypeVo = items.coTypeVo;\n    \tvar date = Common.dateFormat1(new Date());\n    \tvar uploadList = [];\n\n\n\n    \t//上传资料\n\t    var uploader1 = $scope.uploader1 = new FileUploader({\n\t    \t\turl: '/bimco/fileupload/upload.do'\n\t    });\n\n\t    //FILTERS\n\t    uploader1.filters.push({\n\t    \tname: 'customFilter',\n\t        fn: function(item /*{File|FileLikeObject}*/, options) {\n\t            return this.queue.length < 31;\n\t        }\n\t    });\n\n\t    //点击上传资料按钮\n\t    $scope.docsUpload = function () {\n\t    \t$('.upload-docs').attr('uploader', 'uploader1');\n\t    \t$('.upload-docs').attr('nv-file-select', '');\n\t    \t$('.upload-docs').click();\n\t    }\n\n       \t$scope.ok = function() {\n\t\t\tif(!$scope.comment){\n\t\t\t\t$scope.isUpdataOK = true;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$scope.status = parseInt($scope.status);\n       \t\tvar data = {\n    \t \tcoid: items.coid,\n    \t \tcomment: {\n    \t \t\tcomment: $scope.comment, /*内容*/\n    \t \t\tcommentator:'', /*评论人后端接口没给*/\n    \t \t\tcommentTime:date,\t/*评论时间*/\n    \t \t\tdocs: [],\t/*文件列表*/\n    \t \t\t// coSpeech:'' /*整改录音*/\n\t    \t \t},\n\t    \t \tstatus: $scope.status\n\t    \t}\n\t    \t//0.全部上传\n\t    \t//1.上传回调给uploadList赋值\n\t    \t//2.每次上传回调给赋值\n\t    \t//点击确定保存图片和评论文字，去主页面调用更新评论reload详情页面\n\n\t\tif(uploader1.queue.length) {\n\t\t\t$scope.uploadBegin = true;\n   \t\t\tuploader1.uploadAll();\n   \t\t} else {\n   \t\t\t$uibModalInstance.close(data);\n   \t\t}\n   \t\t//每个上传成功之后的回调函数\n   \t\tuploader1.onSuccessItem = function(fileItem, response, status, headers) {\n\t            console.info('onSuccessItem', fileItem, response, status, headers);\n\t            var unit = {};\n\t            unit.name = response[0].result.fileName;\n\t            unit.md5 = response[0].result.fileMd5;\n\t            unit.size = response[0].result.fileSize;\n\t            unit.uuid = response[0].result.uuid;\n\t            unit.suffix = response[0].result.suffix;\n\t            uploadList.push(unit);\n\t\t};\n\t\t\t\t//全部成功的回调函数\n\t\t\t\tuploader1.onCompleteAll = function() {\n\t\t\t\t\tonCompleteAllSignal = true;\n\t\t\t\t\tdata.comment.docs = uploadList;\n\t\t\t\t\tif(uploader1.progress == 100) {\n\t\t\t\t\t\t$uibModalInstance.close(data);\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\n\n    }\n\n    $scope.cancel = function () {\n        $uibModalInstance.dismiss('cancel');\n    }\n\t//$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){\n\t//\t$(\".update-comment .updata-up li:odd\").css({'margin-right':'0','float':'right'})\n\t//})\n\n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/updatecomment.ctrl.js\n ** module id = 29\n ** module chunks = 1\n **/","/**\n * Created by sdergt on 2016/8/16.\n */\nangular.module('cooperation').controller('editdetailCtrl', ['$scope', '$http', '$uibModal', '$httpParamSerializer', 'FileUploader', 'Cooperation', '$state', '$stateParams', 'Common','Manage','$timeout','headerService',\n\n    function ($scope, $http, $uibModal, $httpParamSerializer, FileUploader, Cooperation, $state, $stateParams, Common, Manage,$timeout,headerService) {\n        $scope.device = false;\n        //判断pc or bv\n        if(client.system.winMobile||client.system.wii||client.system.ps||client.system.android || client.system.ios||client.system.iphone||client.system.ipod||client.system.ipad||client.system.nokiaN) {\n            $scope.device = true;\n        }\n        var coid = $stateParams.coid;\n        $scope.transcoid = $stateParams.coid;\n        $scope.zhenggai = false;\n        $scope.responsiblePerson = {}//选择相关人\n        var contracts = [];\n        //设置日期相关\n        $scope.dateOptions = {\n            formatYear: 'yy',\n            maxDate: new Date(2020, 5, 22),\n            startingDay: 1,\n            showWeeks: false,\n            minDate: new Date()\n        };\n\n        $scope.open2 = function () {\n            //console.info(123123131)\n            $scope.popup2.opened = true;\n            $scope.isDeadlineNull = false;\n\n        };\n\n        $scope.popup2 = {\n            opened: false\n        };\n\n        $scope.checksignal = false;\n        //协作详情数据\n        var coid = $stateParams.coid;\n        var allRelevants = [];\n        var sliceRlevants = [];\n        var pcAllRelevants = [];\n        $scope.related = {\n                sign:[],\n                noSign:[],\n            };\n        Cooperation.getCollaboration(coid).then(function (data) {\n        \t\n        \tangular.forEach(data.relevants,function(value,key){\n        \t\tvalue.mustExist = true;\n        \t\tvalue.canSign = false;\n        \t\tif(value.needSign){\n        \t\t\t$scope.related.sign.push(value);\n        \t\t}else{\n        \t\t\t$scope.related.noSign.push(value);\n        \t\t}\n        \t});\n        \tconsole.log($scope.related);\n            var currentMarkInfo = data.markerInfo.id;\n//            console.info('标识Id',currentMarkInfo)\n            $scope.collaList = data;\n            $scope.priority =  data.priority;\n            if($scope.device){\n            \t  allRelevants = _.cloneDeep(data.relevants);\n            \t  sliceRlevants = _.cloneDeep(data.relevants.slice(0,8));\n            \t if(data.relevants.length>8){\n\t                $scope.collaList.relevants =sliceRlevants;\n\t                $scope.isRevlentMore = true;\n\t            }\n            \t angular.forEach(allRelevants, function (value, key) {\n                     var unit = {};\n                     unit.username = value.username;\n                     unit.needSign = value.needSign;\n                     contracts.push(unit);\n                 });\n            } else {\n            \tpcAllRelevants = data.relevants;\n            \tangular.forEach(pcAllRelevants, function (value, key) {\n                    var unit = {};\n                    unit.username = value.username;\n                    unit.needSign = value.needSign;\n                    contracts.push(unit);\n                });\n            }\n           \n            if(data.priority == \"I\") {\n                $scope.priority = \"1\";\n            } else if (data.priority == \"II\") {\n                $scope.priority = \"2\";\n            } else if (data.priority == \"III\") {\n                $scope.priority = \"3\";\n            }\n            $scope.dt = data.deadline;\n            $scope.desc = data.desc;\n\n            if(!data.deadline) {\n                $scope.isDeadlineNull = true;\n            }\n            if( data.deadline && data.isDeadline==3){\n                $scope.deadlineStyle = 'red';\n            }\n           \n            \n            if(data){\n                //获取标识\n                Cooperation.getMarkerList().then(function (data) {\n                    $scope.markerList1 = data;\n                    $scope.mark1 = currentMarkInfo + '';\n                     if(data[0].markerId){\n                        $timeout(function() {\n                            $('.selectpicker1').selectpicker({\n                                style: '',\n                                size: 'auto'\n                            });\n                        },0);\n                     }\n                });\n                //获取优先级\n                Cooperation.getPriorityList().then(function(data) {\n                    $scope.priorityList = data;\n                    if(data[0].code){\n                        $timeout(function() {\n                            $('.selectpicker').selectpicker({\n                                style: '',\n                                size: 'auto'\n                            });\n                        },0);\n                    }\n                   \n                });\n                //type = 0 问题整改\n                if(data.coTypeVo.type == 1) {\n                    $scope.zhenggai = true;\n                }\n            }\n            //详情联系人\n            if($scope.collaList.relevants.length==0){\n                $(\".mobile-relate,.pc-relate\").css('display','none')\n            }else{\n                $(\".mobile-relate,.pc-relate\").css('display','block')\n            }\n            //详情照片\n            if($scope.collaList.pictures.length==0){\n                $(\".mobile-photo,.pc-photo\").css('display','none')\n            }else{\n                $(\".mobile-photo,.pc-photo\").css('display','block')\n            }\n            //详情资料\n            if($scope.collaList.docs.length==0){\n                $(\".mobile-means,.pc-means\").css('display','none')\n            }else{\n                $(\".mobile-means,.pc-means\").css('display','block')\n            }\n            //详情回复\n            if($scope.collaList.comments.length==0){\n                $(\".mobile-reply,.pc-reply\").css('display','none')\n            }else{\n                $(\".mobile-reply,.pc-reply\").css('display','block')\n            }\n\n            //选择负责人\n            $scope.selectResponsible = function () {\n                var modalInstance = $uibModal.open({\n                    windowClass: 'select-person-responsible-modal',\n                    backdrop : 'static',\n                    templateUrl: 'template/cooperation/select_person_responsible.html',\n                    controller:'selectpersonCtrl',\n                    resolve:{\n                        items: function () {\n                            return [];\n                        }\n                    }\n                });\n                modalInstance.result.then(function (selectedItem) {\n                    $scope.responsiblePerson = selectedItem;\n                });\n            }\n            headerService.currentUserInfo().then(function(data){\n                $scope.responsiblePerson.username = data.userName;\n                $scope.responsiblePerson.avatar = data.avatarUrl;\n            })\n            var typeArr = ['txt','doc','pdf','ppt','docx','xlsx','xls','pptx','jpeg','bmp','PNG','GIF','JPG','png','jpg','gif','dwg','rar','zip','avi','mp4','mov','flv','swf','wmv','mpeg','mpg','mp3']; \n            angular.forEach($scope.collaList.docs, function(value, key) {\n                var imgsrc = \"imgs/pro-icon/icon-\";\n\t\t\t\t//如果存在后缀名\n                if(value.name.indexOf('.') !== -1){\n                    var unit = value.name.split('.')[value.name.split('.').length - 1];\n                    unit = unit.toLowerCase();\n\t\t\t\t\tif(typeArr.indexOf(unit) == -1 || unit == null || unit == \"\" || unit == \"undefined\") {\n\t\t\t\t\t\tunit = 'other';\n\t\t\t\t\t}else if(unit == \"docx\"){\n\t\t\t\t\t\tunit = 'doc'\n\t\t\t\t\t}\n\t\t\t\t\timgsrc = imgsrc+unit+\".png\";\n                    //1.获取后缀 把后缀你push到数组\n                    $scope.collaList.docs[key].imgsrc = imgsrc;\n                }else{\n                \tunit = 'other';\n                \timgsrc = imgsrc+unit+\".png\";\n                \t$scope.collaList.docs[key].imgsrc = imgsrc;\n                }\n            });\n\n            angular.forEach($scope.collaList.comments, function(value, key) {\n                if(value.docs) {\n                    angular.forEach(value.docs, function(value1, key1) {\n                    \tvar imgsrc = \"imgs/pro-icon/icon-\";\n                    \tvar unit = value1.suffix;\n                    \t    unit = unit.toLowerCase();\n                        if(typeArr.indexOf(unit) == -1 || unit == null || unit == \"\" || unit == \"undefined\") {\n                            $scope.collaList.comments[key].docs[key1].suffix = 'other';\n                            imgsrc = imgsrc+\"other.png\";\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].imgsrc = imgsrc;\n\t\t\t\t\t\t}else if(unit == \"docx\"){\n\t\t\t\t\t\t\timgsrc = imgsrc+\"doc.png\";\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].imgsrc = imgsrc;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\timgsrc = imgsrc+unit+\".png\";\n\t\t\t\t\t\t\t$scope.collaList.comments[key].docs[key1].imgsrc = imgsrc;\n\t\t\t\t\t\t}\n                        if(value1.thumbnailUrl){\n                        \t$scope.collaList.comments[key].docs[key1].imgsrc = value1.thumbnailUrl;\n                        }\n                    })\n                }\n            });\n\n\n        });\n        \n        //更改标识\n        $scope.switchMark = function (mark1) {\n            $scope.mark1 = mark1;\n        }\n\n        //更改优先级\n        $scope.switchPriority = function (priority) {\n            $scope.priority = priority;\n        }\n        \n        //移动端交互\n        $scope.checkModel = function () {\n            sendCommand(1,coid);\n        }\n\n        $scope.zoom = function (uuid) {\n            sendCommand(6,coid,uuid);\n        }\n\n        $scope.docsOpen = function (uuid) {\n            sendCommand(5,coid,uuid);\n        }\n\n        $scope.previewDocs = function (uuid) {\n            sendCommand(2,coid,uuid);\n        }\n\n        $scope.downDocs = function (uuid) {\n            sendCommand(3,coid,uuid);\n        }\n\n\n        function sendCommand(optType,id,uuid){\n\n            var param = '{\"optType\":'+optType+',\"coid\":\"'+id+'\"}';\n            if(optType==2||optType==3||optType==5||optType==6){\n                param = '{\"optType\":'+optType+',\"coid\":\"'+id+'\",\"fileUUID\":\"'+ uuid +'\",\"isPreview\":true'+'}';\n            }\n            //document.location = \"http://bv.local?param=\" + param;\n            //var a  = \"http://bv.local?param=\" + param;\n            //document.location.href = a;\n            //alert(document.location.href);\n            document.location = 'http://localhost:8080/bv/?param='+param;\n        }\n\n        $scope.ok = function () {\n            if(!$scope.collaList.name) {\n                var index = layer.open({\n                  type: 1,\n                  title: false,\n                  closeBtn: 0,\n                  shadeClose: true,\n                  skin: 'yourclass',\n                  content: '<div class=\"tips\">当前协作主题不能为空</div><div class=\"tips_ok\" onclick=\"layer.closeAll();\">好</div>'\n                });\n            }\n\n            if($scope.device){\n                $scope.dt = $('.date-value-bv').html();\n            } else {\n                $scope.dt = $('.data-value').html();\n            }\n            \n            if($scope.dt) {\n                $scope.dt =  $scope.dt;\n            } else {\n                $scope.dt = '';\n            }\n            var data = {\n                coid: coid,\n                contracts: contracts,\n                deadline: $scope.dt,\n                desc: $scope.collaList.desc,\n                markerid: parseInt($scope.mark1),\n                name: $scope.collaList.name,\n                priority: $scope.priority,\n                status: $scope.collaList.statusId\n            };\n\n            Cooperation.updateCollaboration(data).then(function (data,status) {\n                if($scope.device) {\n                    //bv成功\n                    if(data.indexOf('<!DOCTYPE html>')!=-1){\n                        var param = '{\"optType\":'+9+',\"isSuccess\":'+false+'}';\n                    } else {\n                        var param = '{\"optType\":'+9+',\"isSuccess\":'+true+'}';\n                    }\n                    document.location = 'http://localhost:8080/bv/?param='+param;\n                } else {\n                    document.location = 'co_detail.jsp?coid='+ coid;\n                }\n               \n            },function(data){\n               if($scope.device) {\n                    //bv失败\n                    var message = data.message;\n                    var param = '{\"optType\":'+9+',\"isSuccess\":'+false+',\"message\":\"'+message+'\"}';\n                    document.location = 'http://localhost:8080/bv/?param='+param;\n                } else {\n                    console.log(message);\n                }\n            });\n          \n        }\n\n\n        //获取标识\n        // Cooperation.getMarkerList().then(function (data) {\n        //     $scope.markerList1 = data;\n        //     console.log($scope.markerList1);\n        //     console.log($scope.collaList);\n        //      debugger;\n        //     $scope.mark1 = _.filter($scope.markerList1, function(o) {\n\n        //         return o.picMarker == $scope.collaList.markerInfo.name;\n        //     });\n        //     console.log('mark1', $scope.mark1);\n        // });\n        //\n        $scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n\n            //    详情页面图片资料悬浮出现下载区域\n            $(\".action .picInfo .data-list .deta-down \").hover(function () {\n                $(this).find(\".show-icon\").stop().animate({\"bottom\":\"-1px\"})\n            },function(){\n                $(this).find(\".show-icon\").stop().animate({\"bottom\":\"-38px\"})\n            });\n            //\t详情页面的照片悬浮出现预览功能\n            $(\".detail-sear\").hover(function(){\n                $(this).find(\".detail-search\").stop().animate({\"bottom\":\"-1px\"})\n            },function(){\n                $(this).find(\".detail-search\").stop().animate({\"bottom\":\"-38px\"})\n            })\n            ////\t手机端照片搜索按钮的显示\n            //\t$(\".means-down\").click(function(){\n            //\t\tconsole.info(123)\n            //\t\t//$(this).find(\".means-address\").slideUp()\n            })\n\n        //选择相关人\n        //选择相关人\n      \n        \n        $scope.selectRelated = function () {\n            var modalInstance = $uibModal.open({\n                windowClass:'edit-raltive-person',\n                size:'lg',\n                backdrop : 'static',\n                templateUrl: 'template/cooperation/select_person_related.html',\n                controller:'selectpersonCtrl',\n                resolve:{\n                    items: function () {\n                        return $scope.related;\n                    }\n                }\n            });\n            modalInstance.result.then(function (selectedItem) {\t// 向后台发送需要保存的数据\n                $scope.related.noSign = selectedItem.noSign;\n                $scope.related.sign = selectedItem.sign;\n                if(contracts.length){\n                \tcontracts = [];\n                }\n                angular.forEach(selectedItem.noSign, function (value ,key) {\t// 不需要签字\n                    var needSign = false;\n                    var a = {}\n                    a.needSign = needSign;\n                    a.username = value.username;\n                    contracts.push(a);\n                });\n                angular.forEach(selectedItem.sign, function (value ,key) {\t// 需要签字\n                    var needSign = true;\n                    var a = {}\n                    a.needSign = needSign;\n                    a.username = value.username;\n                    contracts.push(a);\n                });\n            });\n        }\n        //点击蒙层出现关闭按钮\n        $scope.onTurn = function(){\n            //console.info(\"小白兔\")\n        }\n\n        //预览功能\n        $scope.pcPreView = function (docName, uuid) {\n                var data = {fileName:docName,uuid:uuid};\n                Manage.getTrendsFileViewUrl(data).then(function (result) {\n                console.log(typeof result)\n                $scope.isPreview = true;\n                $scope.previewUrl =result;\n                layer.open({\n                        type: 2,\n                        //skin: 'layui-layer-lan',\n                        title: '预览',\n                        fix: false,\n                        shadeClose: true,\n                        maxmin: true,\n                        area: ['1000px', '500px'],\n                        content: $scope.previewUrl\n                    });\n            },function (data) {\n                var obj = JSON.parse(data);\n                console.log(obj);\n                alert(obj.message);\n            });\n            \n        }\n        // 返回上个页面\n        $scope.backDetail = function() {\n        \t$state.go('coopdetail', {'coid':coid});\n        }\n\n      //最大化、最小化、还原、关闭\n        //SC_MAXIMIZE、SC_MINIMIZE、SC_RESTORE、SC_CLOSE  \n        //窗口缩小\n        $scope.minimize = function () {\n            BimCo.SysCommand('SC_MINIMIZE');\n        }\n\n        //窗口放大还原\n        var num=0; \n        $scope.max = true;\n        $scope.maxRestore = function ($event) {\n            if(num++ %2 == 0){ \n                console.log('max');\n                $scope.max = false;\n                $scope.restore = true;\n                //对接pc\n                BimCo.SysCommand('SC_MAXIMIZE');\n\n            } else { \n                console.log('restore');\n                $scope.max = true;\n                $scope.restore = false;\n                //对接pc\n                BimCo.SysCommand('SC_RESTORE');\n            }\n        }\n        \n        //窗口关闭\n        $scope.close = function () {\n            BimCo.SysCommand('SC_CLOSE');\n        }\n\n        //显示更多相关人\n        $scope.showMore = false;\n        $scope.showMorePerson = function() {\n            if(!$scope.showMore){\n                $scope.collaList.relevants = allRelevants;\n                $scope.showMore = true;\n            } else {\n                $scope.collaList.relevants = sliceRlevants;\n                $scope.showMore = false;\n            }\n        }\n\n        //反查formbe,跳转详情页面\n        var currentPage = 'editdetail';\n        $scope.checkFromBe = function() {\n            var coid = $('#checkformbe').val();\n            if(currentPage == 'editdetail'){\n                var r = confirm('当前正在编辑协作，是否跳转？');\n                if(r){\n                    $state.go('coopdetail',{'coid':coid})\n                }\n            }\n            \n        }\n\n    \n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/coopeditdetail.ctrl.js\n ** module id = 30\n ** module chunks = 1\n **/","/**\n * linkprojectCtrl\n */\nvar level = 1;\t// 当前树状态树展开、折叠深度\nvar maxLevel = -1;\t\nvar levelCategory = 1;\t// 构建类别树状态树展开、折叠深度\nangular.module('cooperation').controller('linkprojectCtrl',['$scope', '$http', '$uibModalInstance','Cooperation',\n\tfunction ($scope, $http, $uibModalInstance,Cooperation) {\n\t\t$scope.openSignal = true;\n\t \t$scope.projtype = \"0\";\n\t\t$scope.functionOption = \"0\";\n\t\tvar nodelist=[];//树dataArray\n\t\tvar tjnodestore=[];\n\t\tvar gjnodestore=[];\n\t\tvar aznodestore=[];\n\t\tvar revitnodestore=[];\n\t\tvar teklanodestore=[];\n\t\tvar pdfppidstore=[];\n\t\tvar projTypeSearchPpid=[];//工程类型搜索出来的ppid\n\t\tvar TextSearchPpid=[];//文本搜索出来的ppid\n\t\tvar functionSearchPpid=[];//功能搜索出来的ppid\n\t\tvar initPpid=[];//初始化没有任何条件的ppid\n\t\tvar searchPpid=[];//最终合并ppid\n\t\tvar maxlevel=0;//最大层级\n\t\tvar dataList = {};\n\t\tvar ppid,projType,treeObj,floor,compClass,subClass,spec;\n\t\tvar selectedProject =  {};\n\t\tvar selectedNodes;\n\t\tvar setting = {\n\t\t\tview:{\n\t\t\t\tselectedMulti: false\n\t\t\t},\n\t\t\tcallback:{\n\t\t\t\tonClick: zTreeOnClick,\n\t\t\t\tonCollapse: function (event, treeId, treeNode) {\n\t\t\t\t    level=treeNode.level;\n\t\t\t\t    levelCategory=treeNode.level;\n\t\t\t\t},\n\t\t\t\tonExpand: function (event, treeId, treeNode) {\n\t\t\t\t    level=treeNode.level;\n\t\t\t\t    levelCategory=treeNode.level;\n\t\t\t\t}\n\t\t\t}\n         };\n\t\t$scope.projectTree = [];\n\t\t$scope.openSignal = true;\n\t\t//获取工程树\n\t\tCooperation.getProjectTree().then(function (data) {\n//\t\t\tconsole.log(data);\n\t\t\t$scope.projectTree = data;\n\t\t\ttreeObj = $.fn.zTree.init($(\"#tree\"), setting, $scope.projectTree);\n\t\t\t//全部打开\n\t\t\ttreeObj.expandAll(true);\n\t\t\tnodelist = treeObj.transformToArray(treeObj.getNodes());\n\t\t\t// 只打开一层\n//\t\t\ttreeObj.expandNode(nodelist[0], true, false, null, true);\n\t\t\t// 设置当前打开的层数\n\t\t\tfor(var i = 0 ; i<nodelist.length;i++){\n\t\t\t\tif(nodelist[i].level >= maxLevel){\n\t\t\t\t\tmaxLevel = nodelist[i].level;\n\t\t\t\t}\n\t\t\t\tif(nodelist[i].type==3){\n\t\t\t\t\tcategoryprojtype(nodelist[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevel = maxLevel;\n\t\t\tlevelCategory = maxLevel;\n\t\t});\n\n\n\t\t//工程分类处理\n\t\tfunction categoryprojtype(node){\n\t\t\tif(maxlevel<node.level){//获取最大层级\n\t\t\t\tmaxlevel = node.level;\n\t\t\t}\n\t\t\t\n\t\t\tvar str0 = node.value.split(\"-\")[0];\n\t\t\tvar str1 = node.value.split(\"-\")[1];\n\t\t\tvar str2 = node.value.split(\"-\")[2];\n\t\t\tinitPpid.push(str2);\n\t\t\tprojTypeSearchPpid.push(str2);\n\t\t    TextSearchPpid.push(str2);\n\t\t\tfunctionSearchPpid.push(str2);\n\t\t\tif(str1=='2'){\n\t\t\t\tpdfppidstore.push(str2);\n\t\t\t}else if(str0==\"1\"){\n\t\t\t\ttjnodestore.push(str2);\n\t\t\t}else if(str0==\"2\"){\n\t\t\t\tgjnodestore.push(str2);\n\t\t\t}else if(str0==\"3\"){\n\t\t\t\taznodestore.push(str2);\n\t\t\t}else if(str0==\"4\"){\n\t\t\t\trevitnodestore.push(str2);\n\t\t\t}else if(str0==\"5\"){\n\t\t\t\tteklanodestore.push(str2);\n\t\t\t}\n\t\t}\n\n\n\t\tfunction zTreeOnClick (event, treeId, treeNode) {\n\t\t\t//点击工程\n\t\t\tdataList.linkProjectSelected = treeNode;\n\t\t\tdataList.assembleLps = treeNode;\n\t\t\tppid = dataList.assembleLps.value.split('-')[2];\n\t\t\tprojType = dataList.assembleLps.value.split('-')[0];\n\t\t\tconsole.log('treeNode',treeNode);\n\t\t\tif((treeNode.name === 'PDS内网测试') || (treeNode.name === '临时')) {\n\t\t\t\t$('.confirm').attr('disabled', true);\n\t\t\t} else {\n\t\t\t\t$('.confirm').attr('disabled', false);\n\t\t\t}\n\t\t\ttreeObj = $.fn.zTree.getZTreeObj(\"tree\");\n\t\t\tvar sNodes = treeObj.getSelectedNodes();\n\t\t\tif (sNodes.length > 0) {\n\t\t\t\tvar node = sNodes[0].getParentNode();\n\t\t\t}\n\t\t\tdataList.parentNode = node;\n\t \t}\n\t \t\n\t \t$scope.ok = function () {\n\t \t\t//debugger;\n\t \t\tswitch (projType) {\n\t \t\t\tcase \"1\":\n\t \t\t\tprojType = '土建预算';\n\t \t\t\tbreak;\n\t \t\t\tcase \"2\":\n\t \t\t\tprojType = '钢筋预算';\n\t \t\t\tbreak;\n\t \t\t\tcase \"3\":\n\t \t\t\tprojType = '安装预算';\n\t \t\t\tbreak;\n\t \t\t\tcase \"4\":\n\t \t\t\tprojType = 'Revit';\n\t \t\t\tbreak;\n\t \t\t\tcase \"5\":\n\t \t\t\tprojType = 'Tekla';\n\t \t\t\tbreak;\n\t \t\t}\n\t \t\tdataList.assembleLps =[{ppid:ppid, projType:projType}];\n\t \t\t$uibModalInstance.close(dataList);\n\t \t}\n\n\t \t//点击确定按钮获取构件类别表单\n\t \t$scope.ok3 = function () {\n\t \t\t//点击确定按钮切换显示获取的构件类别openSignal\n\t \t\t$scope.openSignal = false;\n\t \t\t$scope.projectTree = [];\n\t \t\tvar obj = {ppid:ppid, projType:projType};\n\t \t\tvar params = JSON.stringify(obj);\n\t \t\tvar setting1 = {  \n\t\t\t\tview:{\n\t\t\t\t\tselectedMulti: false\n\t\t\t\t},\n\t\t\t\tcheck: {\n\t\t\t\t\tenable: true\n\t\t\t\t}\n\t\t\t\t// callback:{\n\t\t\t\t// \tonCheck: onCheck\n\t\t\t\t// }\n\t         };\n\t         dataList.assembleLps =obj;\n\t\t\t//获取构件类别树\n\t\t\tCooperation.getFloorCompClassList(params).then(function (data) {\n\t\t\t\t$scope.projectTree = data;\n\t\t\t\tvar treeObj = $.fn.zTree.init($(\"#tree1\"), setting1, $scope.projectTree);\n\t\t\t\t//全部打开\n\t\t\t\ttreeObj.expandAll(true);\n\t\t\t\t// 设置当前打开的层数\n\t\t\t\tvar treeNodes = treeObj.transformToArray(treeObj.getNodes());\n\t\t\t\tfor(var i = 0 ; i<treeNodes.length;i++){\n\t\t\t\t\tif(treeNodes[i].level >= maxLevel){\n\t\t\t\t\t\tmaxLevel = treeNodes[i].level;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlevel = maxLevel;\n\t\t\t\t// 只打开一层\n//\t\t\t\ttreeObj.expandNode(treeNodes[0], true, false, null, true);\n\t\t\t});\n\n\t\t\t//选中节点的组合数组(checkbox选中状态)\n\t\t\t// var selectedNodes = [];\n\t\t\t// var selectedNodesList = [];\n\t\t\t// var pNodeList = [];\n\t\t\t// function onCheck (event, treeId, treeNode) {\n\t\t\t// \tvar treeObj = $.fn.zTree.getZTreeObj(\"tree1\");\n\t\t\t// \tselectedNodes = treeObj.getCheckedNodes(true);\n\t\t\t// \t// if(treeNode.checked){\n\t\t\t// \t// \tvar signalSelected = getParentNodeList(treeNode).concat(treeNode);;\n\t\t\t// \t// }\n\t\t\n\t\t\t// \tvar lastNodeList = _.filter(selectedNodes,function(value,key){\n\t\t\t// \t\treturn value.type == 3;\n\t\t\t// \t});\n\t\t\t// \tangular.forEach(lastNodeList,function(value,key){\n\t\t\t// \t\t//遍历type=3的结合，递归获取父级的集合并且拼接上自己的集合\n\t\t\t// \t\tpNodeList = [];\n\t\t\t// \t\tvar signalSelected = getParentNodeList(value,pNodeList).concat(value);\n\t\t\t// \t\tselectedNodesList.push(signalSelected);\n\t\t\t// \t});\n\t\t\t// \tconsole.log('selectedNodesList',selectedNodesList);\n\n\t\t\t// \t//递归获取父节点的集合\n\t\t\t//  \tfunction getParentNodeList(treeObj){\n\t\t\t//  \t\tif(treeObj==null) return;\n\t\t\t//  \t\tvar pNode = treeObj.getParentNode();\n\t\t\t//  \t\tif(pNode!=null){\n\t\t\t//  \t\t\tpNodeList.push(pNode);\n\t\t\t//  \t\t\tpNode = getParentNodeList(pNode);\n\t\t\t//  \t\t}\n\t\t\t//  \t\treturn pNodeList;\n\t\t\t//  \t}\n\t\t // \t}\n\t\t\t\n\t\t \t\n\n\t \t}\n\n\t \t$scope.ok4 = function () {\n\t \t\t//debugger\n\t \t\t//选中节点的组合数组(checkbox选中状态)\n\t\t\tvar selectedNodes = [];\n\t\t\tvar selectedNodesList = [];\n\t\t\tvar pNodeList = [];\n\t \t\tvar treeObj = $.fn.zTree.getZTreeObj(\"tree1\");\n\t \t\t//当前选中的所有的节点\n\t\t\tselectedNodes = treeObj.getCheckedNodes(true);\n\t\t\t\n\t\t\tvar lastNodeList = _.filter(selectedNodes,function(value,key){\n\t\t\t\tif(projType!=5){\n\t\t\t\t\treturn value.type == 3;\n\t\t\t\t}\n\t\t\t\treturn value.type == 2;\n\t\t\t});\n\t\t\tangular.forEach(lastNodeList,function(value,key){\n\t\t\t\t//遍历type=3的结合，递归获取父级的集合并且拼接上自己的集合\n\t\t\t\tpNodeList = [];\n\t\t\t\tvar signalSelected = getParentNodeList(value,pNodeList).concat(value);\n\t\t\t\tselectedNodesList.push(signalSelected);\n\t\t\t});\n\t\t\tconsole.log('selectedNodesList',selectedNodesList);\n\n\t\t\t//递归获取父节点的集合\n\t\t \tfunction getParentNodeList(treeObj){\n\t\t \t\tif(treeObj==null) return;\n\t\t \t\tvar pNode = treeObj.getParentNode();\n\t\t \t\tif(pNode!=null){\n\t\t \t\t\tpNodeList.push(pNode);\n\t\t \t\t\tpNode = getParentNodeList(pNode);\n\t\t \t\t}\n\t\t \t\treturn pNodeList;\n\t\t \t}\n\t \t\t\n\t \t\tswitch (projType) {\n\t \t\t\tcase \"1\" :\n\t \t\t\tprojType = '土建预算';\n\t \t\t\tbreak;\n\t \t\t\tcase \"2\":\n\t \t\t\tprojType = '钢筋预算';\n\t \t\t\tbreak;\n\t \t\t\tcase \"3\":\n\t \t\t\tprojType = '安装预算';\n\t \t\t\tbreak;\n\t \t\t\tcase \"4\":\n\t \t\t\tprojType = 'Revit';\n\t \t\t\tbreak;\n\t \t\t\tcase \"5\":\n\t \t\t\tprojType = 'Tekla';\n\t \t\t\tbreak;\n\t \t\t}\n\n\t \t\t/**\n\t\t\t * 土建，钢筋，revit是楼层——大类——小类\n\t\t\t * 安装是楼层——专业——大类——小类\n\t\t\t * tekla是楼层——大类，tekla手机没有获取到小类\n\t\t\t * public static final Integer COMP_NODE_ALL = -1;//全部\n\t\t\t * public static final Integer COMP_NODE_FLOOR = 0;//楼层\n\t\t\t * public static final Integer COMP_NODE_PROF = 1;//专业\n\t\t\t * public static final Integer COMP_NODE_CLASS = 2;//大类\n\t\t\t * public static final Integer COMP_NODE_SUBCLASS = 3;//小类\n\t\t\t */ \n\t \t\tvar selectedCategory = []; //组合选中数据\n\t\t\tangular.forEach(selectedNodesList,function(value,key1){\n\t\t\t\tvar unit={};\n\t\t\t\tangular.forEach(value,function(value1,key1){\n\t\t\t\t\tif(value1.type === 0){\n\t\t\t\t\t\tunit.floor = value1.value;\n\t\t\t\t\t} else if(value1.type === 1){\n\t\t\t\t\t\tunit.spec = value1.value;\n\t\t\t\t\t}else if(value1.type ===2){\n\t\t\t\t\t\tunit.compClass = value1.value;\n\t\t\t\t\t} else if(value1.type ===3){\n\t\t\t\t\t\tunit.subClass = value1.value;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tunit.ppid = ppid;\n\t\t\t\tunit.projType= projType;\n\t\t\t\tselectedCategory.push(unit);\n\t\t\t});\n\t \t\tdataList.assembleLps = selectedCategory;\n\t \t\tconsole.log('dataList',dataList);\n\t \t\t$uibModalInstance.close(dataList);\n\t \t}\n\n\t \tfunction projTypeSwitch (n) {\n\t \t\tswitch(n)\n\t\t\t \t{\n\t\t\t \tcase 0:\n\t\t\t \t\treturn null;\n\t\t\t\tcase 1:\n\t\t\t\t  \treturn tjnodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t  \treturn gjnodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t  \treturn aznodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t  \treturn revitnodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t  \treturn teklanodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t  \treturn pdfppidstore;\n\t\t\t\t  \tbreak;\n\t\t\t\t}\n\t \t}\n\t \t\n\t \t//可以查询\n\t \tvar searchFlag;\n\t \tvar pollingFlag = true;\n\t \tvar checkSearchInterval;\n\t \t\n\t \t$scope.delayTreeSearch = function (type,status){\n\t \t\tsetSearchFlagFalse();\n\t \t\tif(pollingFlag){\n\t \t\t\tpollingFlag = false;\n\t \t\t\tcheckSearchInterval = setInterval(function() {checkCanSearch(type)},250);\n\t \t\t}\n\t \t\tsetTimeout(function() {setSearchFlagTrue()},500);\n\t \t\t//全部打开\n\t \t\tif(status == 1) {\t// 工程相关\n\t\t \t\tlevel = Cooperation.expandAll(\"tree\");\n\t \t\t} else if(status == 2) {\t// 构件类别\n\t \t\t\tlevelCategory = Cooperation.expandAll(\"tree\");\n\t \t\t}\n\t \t};\n\t \t\n\t \tvar setSearchFlagFalse = function(){\n\t \t\tsearchFlag = false;\n\t \t}\n\t\tvar setSearchFlagTrue = function(){\n\t\t\tsearchFlag = true;\n\t \t}\n\t \t\n\t\tvar checkCanSearch = function(type){\n\t\t\tif(searchFlag){\n\t\t\t\tclearInterval(checkSearchInterval);\n\t\t\t\t$scope.treeSearch(type);\n\t\t\t\tpollingFlag = true;\n\t\t\t}\n\t\t}\n\t \t\n\t \t$scope.treeSearch = function (type,status) {\n//\t \t\tconsole.log(new Date());\n\t\t\ttreeObj.showNodes(nodelist);\n\t\t\t//根据专业查询对应子节点\n\t\t\t//debugger;\n\t\t\tif(type==1){\n\t\t\t\tif($scope.projtype==0){\n\t\t\t\t\tprojTypeSearchPpid\t= initPpid;\n\t\t\t\t}else{\n\t\t\t\t\tprojTypeSearchPpid = projTypeSwitch(parseInt($scope.projtype));\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t//根据功能进行同步请求查询对应子节点\n\t\t\tif(type==2){\n\t\t\t\tif($scope.functionOption==0){\n\t\t\t\t\tfunctionSearchPpid = initPpid;\n\t\t\t\t}else{\n\t\t\t\t\tvar projTypeTextPpid = _.intersection(projTypeSearchPpid,TextSearchPpid);\n\t\t\t\t\tfunctionSearchPpid =[];\n\t\t\t\t\tfunctionFilter(projTypeTextPpid);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t//根据条件查询对应子节点\n\t\t\tif(type==3){\n\t\t\t\tif($scope.formText==\"\"||$scope.formText==null||$scope.formText==\"underfined\"){\n\t\t\t\t\tTextSearchPpid = initPpid;\n\t\t\t\t}else{\n\t\t\t\t\tTextSearchPpid = searchByText();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsearchPpid =  _.intersection(projTypeSearchPpid,functionSearchPpid,TextSearchPpid);\n\t\t\tvar showchildnodes = treeObj.getNodesByFilter(filterbyppid);\n\t\t\tvar hidenodes = treeObj.getNodesByFilter(filterhidechild);\n\t\t\ttreeObj.hideNodes(hidenodes);\n\t\t\ttreeObj.showNodes(showchildnodes);\n\t\t\thideparentnode();\n\t\t\t//全部打开\n\t \t\tif(status == 1) {\t// 图上构件\n\t\t \t\tlevel = Cooperation.expandAll(\"tree\");\n\t \t\t} else if(status == 2) {\t// 构件类别\n\t \t\t\tlevelCategory = Cooperation.expandAll(\"tree\");\n\t \t\t}\n\t\t}\n\n\t \tfunction filterchild(node) {\n\t\t\tvar searchname = $scope.formText;\n\t\t\treturn (node.type == 3 && node.name.indexOf(searchname)>-1);\n\t\t}\n\n\t\tfunction searchByText(){\n\t\t\t var shownodes = treeObj.getNodesByFilter(filterchild);\n\t\t\t var TextSearchPpid=[];\n\t\t\t for(var i=0;i<shownodes.length;i++){\n\t\t\t \tvar str2 = shownodes[i].value.split(\"-\")[2];\n\t\t\t \tTextSearchPpid.push(str2);\n\t\t\t }\n\t\t\t return TextSearchPpid;\n\t\t}\n\n\t\tfunction filterhidechild(node) {\n\t\t\treturn (node.type == 3);\n\t\t}\n\n\t\tfunction filterbyppid(node) {\n\t\t    return (node.type == 3 && searchPpid.indexOf(node.value.split(\"-\")[2])>-1);\n\t\t}\n\n\t\t//全部功能筛选树结构\n\t\tvar functionFilter = function (projTypeTextPpid) {\n\t\t\tvar ppids = [];\n\t\t\tvar data = {};\n\t\t\tvar infoType = parseInt('1200'+ $scope.functionOption);\n\t\t\tdata.infoType = infoType;\n\t\t\tdata.ppids = projTypeTextPpid;\n\t\t\tdata = JSON.stringify(data);\n\t\t\t$.ajax({\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\n\t\t\t\tdataType : 'json',\n\t\t\t\ttype: \"post\",\n\t\t\t\tdata:data,\n\t\t\t\turl: 'http://172.16.21.69:8080/bimco/rs/co/getProjTipInfo',\n\t\t\t    async : false,\n\t\t\t    success: function (data) {\n\t\t\t    \tfor(var i=0;i<data.length;i++){\n\t\t\t    \t\tvar ppid = data[i]+\"\";\n\t\t\t    \t\tfunctionSearchPpid.push(ppid);\n\t\t\t    \t}\n\t\t\t    },\n\t\t\t    error: function () {\n\t\t\t    }\n\t\t\t});\n\t\t}\n\t\t//隐藏空父节点\n\t\tvar selectlevel;\n\t\tfunction hideparentnode(){\n\t\t\tfor(var i=maxlevel-1;i>0;i--){\n\t\t\t\tselectlevel = i;\n\t\t\t\tvar parentnodes = treeObj.getNodesByFilter(filterbylevel);\n\t\t\t\tvar needhidenods = [];\n\t\t\t\tfor(var j=0;j<parentnodes.length;j++){\n\t\t\t\t\tvar childnodes = parentnodes[j].children;\n\t\t\t\t\tvar ishide = true;\n\t\t\t\t\tif(childnodes!=null){\n\t\t\t\t\t\tfor(var n=0;n<childnodes.length;n++){\n\t\t\t\t\t\t\tif(childnodes[n].isHidden){\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tishide=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tishide = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(ishide){\n\t\t\t\t\t\tneedhidenods.push(parentnodes[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttreeObj.hideNodes(needhidenods);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterbylevel(node) {\n\t\t    return (node.level==selectlevel&&node.type!=3);\n\t\t}\n\n\t \t$scope.cancel = function () {\n\t \t\t$uibModalInstance.dismiss('cancel');\n\t \t}\n\t \t\n\t \t// 展开树节点\n\t \t$scope.expand = function (status) {\n\t \t\tif(status == 1) {\t// 工程相关\n\t \t\t\tvar obj = {type:\"expand\",operObj:\"tree\", level: level};\n\t\t \t\tlevel = Cooperation.openOrClose(obj);\n\t\t \t\t$('#content-a11')[0].scrollTop=0;\n\t \t\t} else if(status == 2) {\t// 构件类别\n\t \t\t\tvar obj = {type:\"expand\",operObj:\"tree\", level: levelCategory};\n\t\t \t\tlevelCategory = Cooperation.openOrClose(obj);\n\t\t \t\t$('#content-a13')[0].scrollTop=0;\n\t \t\t}\n\t \t}\n\t \t\n\t \t// 收起树节点\n\t \t$scope.collapse = function (status) {\n\t \t\tif(status == 1) {\t// 工程相关\n\t \t\t\tvar obj = {type:\"collapse\",operObj:\"tree\", level: level};\n\t\t \t\tlevel = Cooperation.openOrClose(obj);\n\t\t \t\t$('#content-a11')[0].scrollTop=0;\n\t \t\t} else if(status == 2) {\t// 构件类别\n\t \t\t\tvar obj = {type:\"collapse\",operObj:\"tree\", level: levelCategory};\n\t\t \t\tlevelCategory = Cooperation.openOrClose(obj);\n\t\t \t\t$('#content-a13')[0].scrollTop=0;\n\t \t\t}\n\t \t}\n}]);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/linkproject.ctrl.js\n ** module id = 31\n ** module chunks = 1\n **/","/**\n * linkcomponentCtrl\n */\nvar level = 1;\t// 图上构建树状态树展开、折叠深度\nvar maxLevel = -1;\t\nangular.module('cooperation').controller('linkcomponentCtrl',['$scope', '$http', '$uibModalInstance','Cooperation',\n\t function ($scope, $http, $uibModalInstance,Cooperation) {\n\t \tvar refreshID;\n\t \t$scope.projtype = \"0\";\n\t\t$scope.functionOption = \"0\";\n\t\tvar nodelist=[];//树dataArray\n\t\tvar tjnodestore=[];\n\t\tvar gjnodestore=[];\n\t\tvar aznodestore=[];\n\t\tvar revitnodestore=[];\n\t\tvar teklanodestore=[];\n\t\tvar pdfppidstore=[];\n\t\tvar projTypeSearchPpid=[];//工程类型搜索出来的ppid\n\t\tvar TextSearchPpid=[];//文本搜索出来的ppid\n\t\tvar functionSearchPpid=[];//功能搜索出来的ppid\n\t\tvar initPpid=[];//初始化没有任何条件的ppid\n\t\tvar searchPpid=[];//最终合并ppid\n\t\tvar maxlevel=0;//最大层级\n\t\tvar dataList = {};\n\t\tvar ppid,projType,treeObj;\n\t\tvar setting = {  \n\t\t\tview:{\n\t\t\t\tselectedMulti: false\n\t\t\t},\n\t\t\tcallback:{\n\t\t\t\tonClick: zTreeOnClick,\n\t\t\t\tonCollapse: function (event, treeId, treeNode) {\n\t\t\t\t    level=treeNode.level\n\t\t\t\t},\n\t\t\t\tonExpand: function (event, treeId, treeNode) {\n\t\t\t\t    level=treeNode.level\n\t\t\t\t}\n\t\t\t}\n         };\n\t\t$scope.projectTree = [];\n\t\t//获取工程树\n\t\tCooperation.getProjectTree().then(function (data) {\n\t\t\tconsole.log(data);\n\t\t\t$scope.projectTree = data;\n\t\t\ttreeObj = $.fn.zTree.init($(\"#tree\"), setting, $scope.projectTree);\n\t\t\t//全部打开\n\t\t\ttreeObj.expandAll(true);\n\t\t\tnodelist = treeObj.transformToArray(treeObj.getNodes());\n\t\t\tfor(var i = 0 ; i<nodelist.length;i++){\n\t\t\t\tif(nodelist[i].level >= maxLevel){\t// 设置当前打开的层数\n\t\t\t\t\tmaxLevel = nodelist[i].level;\n\t\t\t\t}\n\t\t\t\tif(nodelist[i].type==3){\n\t\t\t\t\tcategoryprojtype(nodelist[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlevel = maxLevel;\n\t\t});\n\n\n\t\t//工程分类处理\n\t\tfunction categoryprojtype(node){\n\t\t\t//debugger;\n\t\t\tif(maxlevel<node.level){//获取最大层级\n\t\t\t\tmaxlevel = node.level;\n\t\t\t}\n\t\t\t\n\t\t\tvar str0 = node.value.split(\"-\")[0];\n\t\t\tvar str1 = node.value.split(\"-\")[1];\n\t\t\tvar str2 = node.value.split(\"-\")[2];\n\t\t\tinitPpid.push(str2);\n\t\t\tprojTypeSearchPpid.push(str2);\n\t\t    TextSearchPpid.push(str2);\n\t\t\tfunctionSearchPpid.push(str2);\n\t\t\tif(str1=='2'){\n\t\t\t\tpdfppidstore.push(str2);\n\t\t\t}else if(str0==\"1\"){\n\t\t\t\ttjnodestore.push(str2);\n\t\t\t}else if(str0==\"2\"){\n\t\t\t\tgjnodestore.push(str2);\n\t\t\t}else if(str0==\"3\"){\n\t\t\t\taznodestore.push(str2);\n\t\t\t}else if(str0==\"4\"){\n\t\t\t\trevitnodestore.push(str2);\n\t\t\t}else if(str0==\"5\"){\n\t\t\t\tteklanodestore.push(str2);\n\t\t\t}\n\t\t}\n\t\tfunction zTreeOnClick (event, treeId, treeNode) {\n\t\t\t//点击工程\n\t\t\tdataList.linkProjectSelected = treeNode;\n\t\t\tdataList.assembleLps = treeNode;\n\t\t\tppid = dataList.assembleLps.value.split('-')[2];\n\t\t\tprojType = dataList.assembleLps.value.split('-')[0];\n\t\t\tconsole.log('treeNode',treeNode);\n\t\t\tif((treeNode.name === 'PDS内网测试') || (treeNode.name === '临时')) {\n\t\t\t\t$('.confirm').attr('disabled', true);\n\t\t\t} else {\n\t\t\t\t$('.confirm').attr('disabled', false);\n\t\t\t}\n\t\t\ttreeObj = $.fn.zTree.getZTreeObj(\"tree\");\n\t\t\tvar sNodes = treeObj.getSelectedNodes();\n\t\t\tif (sNodes.length > 0) {\n\t\t\t\tvar node = sNodes[0].getParentNode();\n\t\t\t}\n\t\t\tdataList.parentNode = node;\n\t \t}\n\t \t\n\t \tfunction projTypeSwitch (n) {\n\t \t\tswitch(n)\n\t\t\t \t{\n\t\t\t \tcase 0:\n\t\t\t \t\treturn null;\n\t\t\t\tcase 1:\n\t\t\t\t  \treturn tjnodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t  \treturn gjnodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t  \treturn aznodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t  \treturn revitnodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t  \treturn teklanodestore;\n\t\t\t\t  \tbreak;\n\t\t\t\tcase 6:\n\t\t\t\t  \treturn pdfppidstore;\n\t\t\t\t  \tbreak;\n\t\t\t\t}\n\t \t}\n\t \t\n\t \tfunction filterchild(node) {\n\t\t\tvar searchname = $scope.formText;\n\t\t\treturn (node.type == 3 && node.name.indexOf(searchname)>-1);\n\t\t}\n\n\t\tfunction searchByText(){\n\t\t\t var shownodes = treeObj.getNodesByFilter(filterchild);\n\t\t\t var TextSearchPpid=[];\n\t\t\t for(var i=0;i<shownodes.length;i++){\n\t\t\t \tvar str2 = shownodes[i].value.split(\"-\")[2];\n\t\t\t \tTextSearchPpid.push(str2);\n\t\t\t }\n\t\t\t return TextSearchPpid;\n\t\t}\n\n\t\t//可以查询\n\t \tvar searchFlag;\n\t \tvar pollingFlag = true;\n\t \tvar checkSearchInterval;\n\t \t\n\t \t$scope.delayTreeSearch = function (type){\n\t \t\tsetSearchFlagFalse();\n\t \t\tif(pollingFlag){\n\t \t\t\tpollingFlag = false;\n\t \t\t\tcheckSearchInterval = setInterval(function() {checkCanSearch(type)},250);\n\t \t\t}\n\t \t\tsetTimeout(function() {setSearchFlagTrue()},500);\n\t \t\t//全部打开\n\t \t\tlevel = Cooperation.expandAll(\"tree\");\n\t \t};\n\t \t\n\t \tvar setSearchFlagFalse = function(){\n\t \t\tsearchFlag = false;\n\t \t}\n\t\tvar setSearchFlagTrue = function(){\n\t\t\tsearchFlag = true;\n\t \t}\n\t \t\n\t\tvar checkCanSearch = function(type){\n\t\t\tif(searchFlag){\n\t\t\t\tclearInterval(checkSearchInterval);\n\t\t\t\t$scope.treeSearch(type);\n\t\t\t\tpollingFlag = true;\n\t\t\t}\n\t\t}\n\t\t\n\t\t$scope.treeSearch = function (type) {\n\t\t\ttreeObj.showNodes(nodelist);\n\t\t\t//根据专业查询对应子节点\n\t\t\t//debugger;\n\t\t\tif(type==1){\n\t\t\t\tif($scope.projtype==0){\n\t\t\t\t\tprojTypeSearchPpid\t= initPpid;\n\t\t\t\t}else{\n\t\t\t\t\tprojTypeSearchPpid = projTypeSwitch(parseInt($scope.projtype));\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t//根据功能进行同步请求查询对应子节点\n\t\t\tif(type==2){\n\t\t\t\tif($scope.functionOption==0){\n\t\t\t\t\tfunctionSearchPpid = initPpid;\n\t\t\t\t}else{\n\t\t\t\t\tvar projTypeTextPpid = _.intersection(projTypeSearchPpid,TextSearchPpid);\n\t\t\t\t\tfunctionSearchPpid =[];\n\t\t\t\t\tfunctionFilter(projTypeTextPpid);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t//根据条件查询对应子节点\n\t\t\tif(type==3){\n\t\t\t\tif($scope.formText==\"\"||$scope.formText==null||$scope.formText==\"underfined\"){\n\t\t\t\t\tTextSearchPpid = initPpid;\n\t\t\t\t}else{\n\t\t\t\t\tTextSearchPpid = searchByText();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsearchPpid =  _.intersection(projTypeSearchPpid,functionSearchPpid,TextSearchPpid);\n\t\t\tvar showchildnodes = treeObj.getNodesByFilter(filterbyppid);\n\t\t\tvar hidenodes = treeObj.getNodesByFilter(filterhidechild);\n\t\t\ttreeObj.hideNodes(hidenodes);\n\t\t\ttreeObj.showNodes(showchildnodes);\n\t\t\thideparentnode();\n\t\t\t//全部打开\n\t \t\tlevel = Cooperation.expandAll(\"tree\");\n\t\t}\n\n\t\tfunction filterhidechild(node) {\n\t\t\treturn (node.type == 3);\n\t\t}\n\n\t\tfunction filterbyppid(node) {\n\t\t    return (node.type == 3 && searchPpid.indexOf(node.value.split(\"-\")[2])>-1);\n\t\t}\n\n\t\t//全部功能筛选树结构\n\t\tvar functionFilter = function (projTypeTextPpid) {\n\t\t\tvar ppids = [];\n\t\t\tvar data = {};\n\t\t\tvar infoType = parseInt('1200'+ $scope.functionOption);\n\t\t\tdata.infoType = infoType;\n\t\t\tdata.ppids = projTypeTextPpid;\n\t\t\tdata = JSON.stringify(data);\n\t\t\t// Cooperation.getProjTipInfo(data).then(function (data) {\n\t\t\t// \tconsole.log(data);\n\t\t\t// \treturn data\n\t\t\t// });\n\n\t\t\t$.ajax({\n\t\t\t\tcontentType: \"application/json; charset=utf-8\",\n\t\t\t\tdataType : 'json',\n\t\t\t\ttype: \"post\",\n\t\t\t\tdata:data,\n\t\t\t\turl: 'http://172.16.21.69:8080/bimco/rs/co/getProjTipInfo',\n\t\t\t    async : false,\n\t\t\t    success: function (data) {\n\t\t\t    \tfor(var i=0;i<data.length;i++){\n\t\t\t    \t\tvar ppid = data[i]+\"\";\n\t\t\t    \t\tfunctionSearchPpid.push(ppid);\n\t\t\t    \t}\n\t\t\t    },\n\t\t\t    error: function () {\n\t\t\t    }\n\t\t\t});\n\t\t}\n\n\t\tvar selectlevel;\n\t\tfunction hideparentnode(){\n\t\t\tfor(var i=maxlevel-1;i>0;i--){\n\t\t\t\tselectlevel = i;\n\t\t\t\tvar parentnodes = treeObj.getNodesByFilter(filterbylevel);\n\t\t\t\tvar needhidenods = [];\n\t\t\t\tfor(var j=0;j<parentnodes.length;j++){\n\t\t\t\t\tvar childnodes = parentnodes[j].children;\n\t\t\t\t\tvar ishide = true;\n\t\t\t\t\tif(childnodes!=null){\n\t\t\t\t\t\tfor(var n=0;n<childnodes.length;n++){\n\t\t\t\t\t\t\tif(childnodes[n].isHidden){\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tishide=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tishide = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(ishide){\n\t\t\t\t\t\tneedhidenods.push(parentnodes[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttreeObj.hideNodes(needhidenods);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterbylevel(node) {\n\t\t    return (node.level==selectlevel&&node.type!=3);\n\t\t}\n\n\t \t$scope.ok = function () {\n\t \t\t//console.log('dataList',dataList);\n\t \t\t//debugger;\n\t \t\t// switch (projType) {\n\t \t\t// \tcase \"1\":\n\t \t\t// \tprojType = '土建预算';\n\t \t\t// \tbreak;\n\t \t\t// \tcase \"2\":\n\t \t\t// \tprojType = '钢筋预算';\n\t \t\t// \tbreak;\n\t \t\t// \tcase \"3\":\n\t \t\t// \tprojType = '安装预算';\n\t \t\t// \tbreak;\n\t \t\t// \tcase \"4\":\n\t \t\t// \tprojType = 'Revit';\n\t \t\t// \tbreak;\n\t \t\t// \tcase \"5\":\n\t \t\t// \tprojType = 'Tekla';\n\t \t\t// \tbreak;\n\t \t\t// }\n\t \t\tdataList.assembleLps =[{ppid:ppid, projType:projType}];\n\t \t\t//通知pc端执行选择构件的方法\n\t \t\tBimCo.SelectComponent(ppid);\n\t \t\t//1.轮询2.获取状态\n\t \t\t// 001 - 完成\n\t \t\t// 002 - 取消选择\n\t \t\tsetRefreshInterval();\n\n\t \t\tfunction refreshState() {\n\n\t \t\t\tvar reCode = BimCo.GetSelectComponentStatus(ppid);\n\n\t \t\t\tswitch (reCode) {\n\t \t\t\t\tcase '001':\n\t \t\t\t\t//将当前选择的工程显示到页面\n\t \t\t\t\t$uibModalInstance.close(dataList);\n\t \t\t\t\tclearRefreshInterval();\n\t \t\t\t\tbreak;\n\t \t\t\t\tcase '002':\n\t \t\t\t\t//用户什么操作都没做，结束轮询\n\t \t\t\t\tclearRefreshInterval();\n\t \t\t\t\tbreak;\n\t \t\t\t}\n\t \t\t}\n\t \t\t\n\t \t\t// 设置间隔获取状态\n\t        function setRefreshInterval() {\n\t            //if (refreshID) return false;\n\t            refreshID = setInterval(refreshState, 1000);\n\t            console.log('我是轮询');\n\t        }\n\n\t        // 清除间隔获取状态\n\t        function clearRefreshInterval() {\n\t            clearInterval(refreshID);\n\t        }\n\n\t \t}\n\n\t \t$scope.cancel = function () {\n\t \t\t//if已经选择了构件，通知pc端\n\t \t\t$uibModalInstance.dismiss('cancel');\n\t \t}\n\t \t\n\t // 展开树节点\n\t \t$scope.expand = function () {\n\t \t\tvar obj = {type:\"expand\",operObj:\"tree\", level: level};\n\t \t\tlevel = Cooperation.openOrClose(obj);\n\t \t\t$('#content-a12')[0].scrollTop=0;\n\t \t}\n\t \t\n\t \t// 收起树节点\n\t \t$scope.collapse = function () {\n\t \t\tvar obj = {type:\"collapse\",operObj:\"tree\", level: level};\n\t \t\tlevel = Cooperation.openOrClose(obj);\n\t \t\t$('#content-a12')[0].scrollTop=0;\n\t \t}\n\t \t\n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/linkcomponent.ctrl.js\n ** module id = 32\n ** module chunks = 1\n **/","/**\n * linkbeCtrl\n */\nvar level = 0;\t// 当前树状态树展开、折叠深度\n//var checkAll = 0; // 是否全选 \nangular.module('cooperation').controller('linkbeCtrl', ['$scope', '$http', '$uibModalInstance','Cooperation','items','$timeout',\n\t function ($scope, $http, $uibModalInstance,Cooperation,items,$timeout) {\n\t \t$scope.selectedOption = {};\n\t \t$scope.projectOption = null;\n\t \t$scope.projectSelected = {};\n\t\t$scope.currentPage = 1; //默认第一页\n\t\t$scope.deptInfo = {\n\t\t\tavailableOptions:[]\n\t\t};\n\t\t$scope.projectList = {\n\t\t\tavailableOptions:[]\n\t\t};\n\t\t$scope.totalItems = 0;\n\t\tvar deptId, ppid;\n\t\tvar setting = {  \n\t\t\tview:{\n\t\t\t\tselectedMulti: false\n\t\t\t},\n\t\t\tcheck: {\n\t\t\t\tenable: true\n\t\t\t},\n\t\t\tcallback:{\n\t\t\t\tonCheck: onCheck,\n\t\t\t\tonCollapse: function (event, treeId, treeNode) {\n\t\t\t\t    level=treeNode.level;\n\t\t\t\t},\n\t\t\t\tonExpand: function (event, treeId, treeNode) {\n\t\t\t\t    level=treeNode.level;\n\t\t\t\t}\n\t\t\t}\n         };\n\t     var treeObj,nodes,params;\n\t     var selectedItem = [];\n\t     //组合查询条件\n\t     var queryData = {\n\t     \tppid: '',\n\t     \ttagids:[],\n\t     \tsearchText:'',\n\t     \tpageInfo:{}\n\t     };\n\n        //获取项目部\n\t\tCooperation.getDeptList().then(function (data) {\n\t\t\t$scope.deptInfo.availableOptions = data;\n\t\t\t$scope.selectedOption = $scope.deptInfo.availableOptions[0].deptId+'';\n\t\t\t//默认工程列表\n\t\t\tdeptId = $scope.selectedOption;\n\t\t\tif(deptId){\n                        $timeout(function() {\n                            $('.selectpicker1').selectpicker({\n                                style: '',\n                                size: 'auto'\n                            });\n                        },0);\n                     }\n\t\t\tCooperation.projectList(deptId).then(function (data) {\n\t\t\t\t\t$scope.projectList.availableOptions = data;\n\t\t\t\t\t$scope.projectOption = $scope.projectList.availableOptions[0].ppid+'';\n\t\t\t\t\tppid = data[0].ppid;\n\t\t\t\t\tif(ppid){\n                        $timeout(function() {\n                            $('.selectpicker2').selectpicker({\n                                style: '',\n                                size: 'auto'\n                            });\n                        },0);\n                     }\n                    initProjectSelected(data[0]);\n\t\t\t\t\t//获取BE资料树\n\t\t\t\t\t//getDocTagList(ppid);\n\t\t\t});\n\t\t});\n\n        //根据条件获取资料列表\n        var getDocList = function () {\n\t\t\t//组合搜索条件\n\t\t\tqueryData.ppid = $scope.projectOption;\n\t\t\tqueryData.tagids = selectedItem;\n\t\t\tqueryData.searchText = $scope.searchname;\n\t\t\tqueryData.pageInfo = {\n\t\t\t\tcurrentPage:$scope.currentPage?$scope.currentPage:1,\n\t\t\t\tpageSize:10\n\t\t\t};\n\t\t\tCooperation.getDocList(queryData).then(function (data) {\n\t\t\t\t$scope.docList = data.result;\n\t\t\t\t$scope.totalItems = data.pageInfo.totalNumber;\n\t\t\t});\n\t \t}\n\n\t \t//分页显示\n\t \t$scope.pageChanged = function () {\n\t \t\tgetDocList();\n\t \t}\n\n        function onCheck (event, treeId, treeNode) {\n\t\t\ttreeObj = $.fn.zTree.getZTreeObj(\"tree\");\n\t\t\t//选中节点(check)\n\t\t\tnodes = treeObj.getCheckedNodes(true);\n\t\t\t//type=2的节点\n\t\t\tvar unit = _.filter(nodes, function(o){\n\t\t\t\treturn o.type === 2\n\t\t\t});\n//\t\t\tconsole.log(unit)\n\t\t\tvar tempselectedItem = [];\n\t\t\tangular.forEach(unit, function(value,key) {\n\t\t\t\t//左侧树选中的节点\n\t\t\t\ttempselectedItem.push(value.value);\n\t\t\t});\n\t\t\tselectedItem = tempselectedItem;\n\t\t\tif(selectedItem.length){\n\t\t\t\tgetDocList();\n\t\t\t} else {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.totalItems = 0;\n\t\t\t\t\t$scope.docList = [];\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t \t}\n\t \t//选中需要上传的资料\n\t \tvar a = _.cloneDeep(items);\n\t \t//var docSelected = [];\n\t \tvar docSelected = a?a:[];\n        var updateSelected = function(action,id,name){\n        \tvar findIndex = _.findIndex(docSelected,id);\n            if(action == 'add' && findIndex == -1){\n               docSelected.push(id);\n           \t}\n            if(action == 'remove' && findIndex!=-1){\n                var idx = docSelected.indexOf(id);\n                docSelected.splice(findIndex,1);\n            }\n         }\n \n        $scope.updateSelection = function($event, id){\n        \t//debugger;\n            var checkbox = $event.target;\n            var action = (checkbox.checked?'add':'remove');\n            updateSelected(action,id,checkbox.name);\n            console.log(docSelected);\n        }\n \n        $scope.isSelected = function(id){\n//        \tconsole.log('id', _.findIndex(docSelected,id))\n            return _.findIndex(docSelected,id)>=0;\n        }\n\n        $scope.docSearch = function () {\n        \tgetDocList(queryData);\n        }\n\n        $scope.ok = function () {\n\t\t    $uibModalInstance.close(docSelected);\n\t\t};\n\t\t//根据deptId取工程列表\n\t \t$scope.switchDept = function (params) {\n\t \t\tdeptId = params;\n\t\t\tCooperation.projectList(params).then(function (data) {\n\t\t\t\t//debugger\n\t\t\t\t$scope.projectList.availableOptions = data;\n\t\t\t\t$scope.projectOption = data[0].ppid+'';\n\t\t\t\t//getDocTagList(data[0].ppid);\n\t\t\t\tinitProjectSelected(data[0]);\n\t\t\t  \t\n\t\t\t});\n\t \t}\n\n\t \t$scope.changeSelected = function(item) {\n\t \t\tinitProjectSelected(item);\n\t \t\t$scope.isCollapsed = false;\n\t \t}\n\n\t \tfunction initProjectSelected(data) {\n\t \t\t$scope.projectSelected.projectName = data.projectName;\n\t\t\t$scope.projectOption = data.ppid;\n\t\t\t\tif(data.projectType=='土建预算'){\n\t\t\t\t\t$scope.projectSelected.typeImg = 'imgs/icon/1.png';\n\t\t\t\t} else if(data.projectType=='钢筋预算') {\n\t\t\t\t\t\t$scope.projectSelected.typeImg = 'imgs/icon/2.png';\n\t\t\t\t} else if(data.projectType=='安装预算') {\n\t\t\t\t\t\t$scope.projectSelected.typeImg = 'imgs/icon/3.png';\n\t\t\t\t} else if(data.projectType=='Revit') {\n\t\t\t\t\t\t$scope.projectSelected.typeImg = 'imgs/icon/4.png';\n\t\t\t\t} else if(data.projectType=='Tekla') {\n\t\t\t\t\t\t$scope.projectSelected.typeImg = 'imgs/icon/5.png';\n\t\t\t\t} \n\n\t \t}\n\n\n\n\t \t//选择BE资料-工程所属资料标签树\n\t \tvar getDocTagList = function (params) {\n\t \t\tCooperation.getDocTagList(params).then(function (data) {\n\t \t\t\tvar treeObj = $.fn.zTree.init($(\"#tree\"), setting, data);\n\t\t\t\t//全部打开\n//\t\t\t\ttreeObj.expandAll(false);\n\t \t\t\t// 只打开第一层节点\n\t \t\t\ttreeObj.expandNode(treeObj.transformToArray(treeObj.getNodes())[0],true,false,true,false)\n\t \t\t});\n\t \t}\n\t \t$scope.switchPpid = function (projectOption) {\n\t\t\tppid = projectOption;\n\t\t\tgetDocTagList(ppid);\n\t\t}\n\t \t\n\n\t \t$scope.$watch('projectOption',function(newVal,oldVal){\n\t \t\tif(newVal != null){\n\t \t\t\t$scope.switchPpid($scope.projectOption);\n\t \t\t}\n\t\t});\n\n\t\t$scope.cancel = function () {\n\t\t\t$uibModalInstance.dismiss();\n\t\t}\n\t\t$scope.$on('ngRepeatFinished', function (ngRepeatFinishedEvent) {\n\t\t\t $('.check-now').click(function(){\n\t\t\t\t$(this).css('background',\"#eceef0\").siblings().css(\"background\",'#fff')\n\t\t\t })\n\n\t\t});\n\t\t\n\t\t// 展开树节点\n\t \t$scope.expand = function () {\n\t \t\tvar obj = {type:\"expand\",operObj:\"tree\", level: level};\n\t \t\tlevel = Cooperation.openOrClose(obj);\n\t \t\t$('#content-a6')[0].scrollTop=0;\n\t \t}\n\t \t\n\t \t// 收起树节点\n\t \t$scope.collapse = function () {\n\t \t\tvar obj = {type:\"collapse\",operObj:\"tree\", level: level};\n\t \t\tlevel = Cooperation.openOrClose(obj);\n\t \t\t$('#content-a6')[0].scrollTop=0;\n\t \t}\n\t \t\n\t \t//全选\n\t \t/*$scope.checkAllNodes = function() {\n\t        var treeObj = $.fn.zTree.getZTreeObj(\"tree\");\n\t        if(checkAll % 2 == 0) {\n\t        \ttreeObj.checkAllNodes(true);\n\t        } else {\n\t        \ttreeObj.checkAllNodes(false);\n\t        }\n\t        checkAll++;\n\t    }*/\n\t \t$scope.myKeyup = function(e){\n            var keycode = window.event?e.keyCode:e.which;\n            if(keycode==13 || $('#linkbeSear').val()==''){\n            \t$scope.docSearch();\n            }\n        };\n}]);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/linkbe.ctrl.js\n ** module id = 33\n ** module chunks = 1\n **/","/**\n * linkformCtrl\n */\nangular.module('cooperation').controller('linkformCtrl', ['$scope', '$http', '$uibModalInstance','Cooperation','items',\n\t function ($scope, $http, $uibModalInstance,Cooperation,items) {\n\t \tconsole.log(items);\n\t \t//默认模版类型\n\t \t$scope.selectedTypeId = items.typeid;\n\t \tCooperation.getTemplateNode(items.typeid).then(function (data) {\n\t \t\t$scope.templateNode = data;\n\t \t});\n\t \tCooperation.getTypeList().then(function (data) {\n\t \t\t$scope.typeList = data;\n\t \t});\n\n\t \t$scope.switchType = function (selectedTypeId) {\n\t \t\tCooperation.getTemplateNode(selectedTypeId).then(function (data) {\n\t \t\t$scope.templateNode = data;\n\t \t});\n\t \t}\n\n\t \t//选中表单中需要上传的资料\n\t \tvar a = _.cloneDeep(items.formSelectedList);\n\t \tvar formSelected = a?a:[];\n        var updateSelected = function(action,id,name){\n        \tvar findIndex = _.findIndex(formSelected,id);\n            if(action == 'add' && findIndex == -1){\n               formSelected.push(id);\n           \t}\n             if(action == 'remove' && findIndex!=-1){\n                formSelected.splice(findIndex,1);\n             }\n         }\n \n        $scope.updateSelection = function($event, id){\n        \t//debugger;\n            var checkbox = $event.target;\n            var action = (checkbox.checked?'add':'remove');\n            updateSelected(action,id,checkbox.name);\n            console.log(formSelected);\n        }\n \n        $scope.isSelected = function(id){\n        \tconsole.log('_.findIndex(formSelected,id)',_.findIndex(formSelected,id));\n            return _.findIndex(formSelected,id)>=0;\n        }\n\n        $scope.ok = function () {\n        \t$uibModalInstance.close(formSelected);\n        }\n\n\t\t$scope.cancel = function () {\n\t\t\t$uibModalInstance.dismiss();\n\t\t}\n\t\t$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){\n\t\t\t$(\".tab-tr\").on(\"click\",function(){\n\t\t\t\t$(this).css('background',\"#eceef0\").siblings().css(\"background\",'#fff')\n\t\t\t})\n\t\t})\n}]);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/controllers/linkform.ctrl.js\n ** module id = 34\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('cooperation').service('Cooperation', function ($http, $q) {\n    \n    var url = basePath;\n \n    //url=\"http://172.16.21.69:8080/bimco\";\n    /**\n     *获取项目部列表\n     */\n    this.getDeptInfo = function () {\n        var delay = $q.defer();\n        var url_join= url+\"rs/co/deptInfoList\";\n        $http.get('dept.json',{cache:true})\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    };\n\n    //获取新建页面项目部列表\n    this.getDeptList = function () {\n        var delay = $q.defer();\n        var url_join= url+\"rs/co/deptList\";\n        $http.get(url_join,{cache:true})\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    };\n\n    //获取项目部下对应的联系人列表\n    this.getUserList = function (params) {\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/pcUserList';\n        var params = JSON.stringify(params);\n        $http.get(url_join,params,{cache:true,transformRequest:angular.identity})\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data) {\n                delay.reject(data);\n        });\n        return delay.promise;\n    }\n\n    //获取项目部下工程列表\n    this.projectList = function (params) {\n        var delay = $q.defer();\n        var url_join = url +'rs/co/projectList/'+ params;\n        $http.get('projectlist.json',{cache:false})\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    \n    //获取项目下工程\n    this.getProjectList = function(params){\n        var delay = $q.defer();\n        var url_join = url+'rs/co/projectInfoList/'+params;\n        $http.get('projectlist.json').success(function(data){\n            delay.resolve(data)\n        }).error(function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n\n    //获取bv\n    this.getBVRectifyStatus = function(){\n        var delay = $q.defer();\n        var url_join = url+'rs/co/getBVRectifyStatus';\n        $http.get(url_join,{cache:true}).success(function(data){\n            delay.resolve(data)\n        }).error(function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n    //获取协同列表\n    this.getCollaborationList = function (params) {\n        var params = JSON.stringify(params);\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/collaborationList';\n        $http.get('collaboration.json',params,{transformRequest: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    //选择BE资料-工程所属资料标签树\n    this.getDocTagList = function (params) {\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/docTagList/' + params;\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n    //获取工程对应资料列表\n    this.getDocList = function (params) {\n        var delay = $q.defer();\n        var params = JSON.stringify(params);\n        var url_join = url + 'rs/co/docList';\n        $http.get(url_join,params,{transformRequest: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    //获取工程树节点\n    this.getProjectTree = function () {\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/projectTree';\n        $http.get('tree.json')\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n    //获取构件\n    this.getFloorCompClassList = function (params) {\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/floorCompClassList';\n        $http.get(url_join,params,{transformRequest: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    //获取协作详情列表\n    this.getCollaboration = function (coid) {\n        var delay = $q.defer();\n        // var url_join= tempUrl + 'detail/' + coid;\n        var url_join= url + 'rs/co/detail/' + coid;\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    };\n\n    //获取类型列表\n    this.getTypeList = function () {\n        var delay = $q.defer();\n        var url_join= url + 'rs/co/typeList';\n        $http.get('typelist.json')\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n\n    //获取选择表单列表\n    this.getTemplateNode = function (params) {\n        var delay = $q.defer();\n        var url_join= url + 'rs/co/template/' + params + '/pdf';\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n\n\n    //创建协作\n    this.createCollaboration = function (params) {\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/collaboration';\n        $http.get(url_join,params,{transformRequest: angular.identity, transformResponse: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n\n    //获取标识\n    this.getMarkerList = function (params) {\n        var delay = $q.defer();\n        var url_join= url + 'rs/co/markers';\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n\n    //获取优先级列表\n    this.getPriorityList = function () {\n        var delay = $q.defer();\n        var url_join= url + 'rs/co/priorityList';\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n    //获取有相关功能的工程列表 \n    this.getProjTipInfo = function (params) {\n        var delay = $q.defer();\n        var url_join = url + 'rs/co/getProjTipInfo';\n        $http.get(url_join,params,{transformRequest: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n\n    //获取筛选动态列表\n    this.getCoQueryFilter = function (params) {\n        var delay = $q.defer();\n        var params = JSON.stringify({queryBvToPc:true});\n        var url_join = url + 'rs/co/coQueryFilter';\n        $http.get('coquery.json',params,{transformRequest: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    \n    //编辑协作\n    this.updateCollaboration = function (params) {\n        var delay = $q.defer();\n        var params = JSON.stringify(params);\n        var url_join = url + 'rs/co/updateCollaboration';\n        $http.get(url_join,params,{transformRequest: angular.identity}).success(function (data, status) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise;\n    }\n    //协作详情右侧动态列表\n    this.getOperationList = function (coid) {\n        var delay = $q.defer();\n        var url_join= url + 'rs/co/operation/' + coid;\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n\n    \n    //更新评论\n    this.commentToCollaboration = function (params) {\n        var delay = $q.defer();\n        var params = JSON.stringify(params);\n        var url_join = url + 'rs/co/commentToCollaboration';\n        $http.get(url_join,params,{transformRequest: angular.identity}).success(function (data) {\n            delay.resolve(data);\n        }).error(function (data) {\n            delay.reject(data);\n        });\n        return delay.promise; \n    }\n\n    //获取系统时间\n    this.getCurrentDate = function () {\n        var cDate = new Date();\n        //console.info($scope.date)\n        var cYear = cDate.getFullYear();\n        var cMouth = cDate.getMonth()+1;\n        var cDay = cDate.getDate();\n        var cWeekday=new Array(7);\n        cWeekday[0]=\"星期日\";\n        cWeekday[1]=\"星期一\";\n        cWeekday[2]=\"星期二\";\n        cWeekday[3]=\"星期三\";\n        cWeekday[4]=\"星期四\";\n        cWeekday[5]=\"星期五\";\n        cWeekday[6]=\"星期六\";\n       var currentDate =  cYear+\"年\"+ cMouth+\"月\"+cDay+\"日\"+cWeekday[cDate.getDay()];\n       return currentDate;\n    }\n    //统计页面获取数据\n    this.getCoStatisticsInfo = function(params){\n        var delay = $q.defer();\n        var url_join = url + \"rs/co/coStatistics\";\n        var params = JSON.stringify(params);\n        $http.get(url_join,params,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n            //console.info(\"统计页面\",data)\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n\n    // 协作操作 PC/BV 签署／签名／通过／拒绝／结束 PC/BV\n    this.doCollaboration = function(params){\n        var delay = $q.defer();\n        var url_join = url + \"rs/co/doCollaboration\";\n        var params = JSON.stringify(params);\n        $http.get(url_join,params,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n            //console.info(\"统计页面\",data)\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n\n    //获取签名uuid\n    this.getSignature = function () {\n       var delay = $q.defer();\n        var url_join= url + 'rs/co/signature';\n        $http.get(url_join)\n            .success(function (data) {\n                delay.resolve(data);\n            }).error(function (data, status) {\n                delay.reject(data);\n            });\n        return delay.promise;\n    }\n\n    // 获取服务器时间\n    this.getTrendsSystem = function(params){\n        var delay = $q.defer();\n        var url_join = url + \"rs/trends/system\";\n        var obj = JSON.stringify(params);\n        $http.get(url_join,obj,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n\n    //签入\n    this.checkIn = function(coid){\n        var delay = $q.defer();\n        var url_join = url + \"rs/co/checkIn/\"+coid;\n        var params = JSON.stringify(params);\n        $http.get(url_join,params,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n            //console.info(\"统计页面\",data)\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n\n    //签出\n    this.checkOut = function(coid){\n        var delay = $q.defer();\n        var url_join = url + \"rs/co/checkOut/\"+coid;\n        var params;\n        // var params={\"coid\":coid}\n        // var params = JSON.stringify(params);\n        $http.get(url_join,params,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n            //console.info(\"统计页面\",data)\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n//    草稿箱信息删除\n    this.removeDraft = function(coid){\n        var delay = $q.defer();\n        var url_join = url + \"rs/co/removeDraft/\"+coid;\n        var params;\n        $http.get(url_join,params,{transformRequest: angular.identity}).then(function(data){\n            delay.resolve(data);\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n    //获取当前用户信息\n    this.getCurrentUser = function(){\n        var delay = $q.defer();\n        var url_join = url + \"rs/co/currentUser\";\n        $http.get(url_join,{},{transformRequest: angular.identity, transformResponse: angular.identity}).then(function(data){\n            delay.resolve(data);\n        },function(err){\n            delay.reject(err)\n        })\n        return delay.promise;\n    }\n\n    //获取指定的UUID的下载地址\n//    this.getDownFileUrl = function (uuids){\n//    \tvar delay = $q.defer();\n//    \tvar url_join = url + \"rs/co/downFileUrl\";\n//    \t$http.get(url_join,uuids,{transformRequest: angular.identity}).then(function(data){\n//    \t\tdelay.resolve(data);\n//    \t},function(err){\n//            delay.reject(err);\n//        })\n//        return delay.promise;\n//    }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/services/cooperation.service.js\n ** module id = 35\n ** module chunks = 1\n **/","'use strict';\n\nangular.module('cooperation').service('TreeSearch', function ($http, $q, Cooperation) {\n    var url = ApplicationConfiguration.urls.apiUrl;\n    var coUrl = ApplicationConfiguration.urls.coUrl;\n    var tempUrl = 'http://192.168.13.222:8080/bimco/rs/co/';\n\n    //即时搜索\n    function searchByText(){\n         var shownodes = treeObj.getNodesByFilter(filterchild);\n         var TextSearchPpid=[];\n         for(var i=0;i<shownodes.length;i++){\n            var str2 = shownodes[i].value.split(\"-\")[2];\n            TextSearchPpid.push(str2);\n         }\n         return TextSearchPpid;\n    }\n    //筛选出type=3的所有节点\n    function filterhidechild(node) {\n        return (node.type == 3);\n    }\n\n    //根据type=3,ppid来筛选\n    function filterbyppid(node) {\n        return (node.type == 3 && searchPpid.indexOf(node.value.split(\"-\")[2])>-1);\n    }\n    //根据全部专业分类ppid\n    this.projTypeSwitch = function (n) {\n        switch(n)\n            {\n            case 0:\n                return null;\n            case 1:\n                return tjnodestore;\n                break;\n            case 2:\n                return gjnodestore;\n                break;\n            case 3:\n                return aznodestore;\n                break;\n            case 4:\n                return revitnodestore;\n                break;\n            case 5:\n                return teklanodestore;\n                break;\n            case 6:\n                return pdfppidstore;\n                break;\n            }\n    }\n\n\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./modules/cooperation/services/treesearch.service.js\n ** module id = 36\n ** module chunks = 1\n **/"],"sourceRoot":""}